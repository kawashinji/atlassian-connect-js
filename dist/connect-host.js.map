{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/base-64/base64.js","node_modules/events/events.js","node_modules/jsuri/Uri.js","node_modules/simple-xdm/dist/node_modules/simple-xdm/dist/node_modules/browser-pack/_prelude.js","../../../cwhittington/Documents/simple-xdm/src/host/index.js","../../../cwhittington/Documents/simple-xdm/src/common/postmessage.js","../../../cwhittington/Documents/simple-xdm/src/common/util.js","../../../cwhittington/Documents/simple-xdm/src/host/xdmrpc.js","node_modules/utf8/utf8.js","src/host/actions/analytics_action.js","src/host/actions/button_actions.js","src/host/actions/dialog_actions.js","src/host/actions/dialog_extension_actions.js","src/host/actions/dom_event_actions.js","src/host/actions/env_actions.js","src/host/actions/event_actions.js","src/host/actions/flag_actions.js","src/host/actions/iframe_actions.js","src/host/actions/inline_dialog_actions.js","src/host/actions/jwt_actions.js","src/host/actions/loading_indicator_actions.js","src/host/actions/module_actions.js","src/host/actions/webitem_actions.js","src/host/components/button.js","src/host/components/dialog.js","src/host/components/dialog_extension.js","src/host/components/dialog_webitem.js","src/host/components/flag.js","src/host/components/iframe.js","src/host/components/iframe_container.js","src/host/components/inline_dialog.js","src/host/components/inline_dialog_webitem.js","src/host/components/loading_indicator.js","src/host/components/webitem.js","src/host/create.js","src/host/dispatchers/analytics_dispatcher.js","src/host/dispatchers/event_dispatcher.js","src/host/dollar.js","src/host/index.js","src/host/modules/analytics.js","src/host/modules/dialog.js","src/host/modules/env.js","src/host/modules/events.js","src/host/modules/flag.js","src/host/modules/inline-dialog.js","src/host/modules/messages.js","src/host/underscore.js","src/host/util.js","src/host/utils/button.js","src/host/utils/dialog.js","src/host/utils/iframe.js","src/host/utils/jwt.js","src/host/utils/url.js","src/host/utils/webitem.js"],"names":[],"mappings":"AAAA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACrKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC5cA;;;;;;;;;sBCAmB,UAAU;;;;0BACX,gBAAgB;;;;IAE5B,OAAO;AAEA,WAFP,OAAO,GAEG;0BAFV,OAAO;;AAGT,QAAI,CAAC,IAAI,GAAG,yBAAY,CAAC;GAC1B;;;;;;;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YAAY,EAAE;;;AAC3C,cAAI,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;AAC5C,cAAI,CAAC,OAAO,CAAC,UAAC,KAAK,EAAK;AACtB,gBAAI,OAAO,GAAG,OAAK,cAAc,CAAC,KAAK,CAAC,CAAC;AACzC,gBAAI,UAAU,GAAG,OAAO,CAAC,UAAU,IAAI,EAAE,CAAC;;AAE1C,gBAAI,UAAU,CAAC,SAAS,KAAK,YAAY,CAAC,SAAS,CAAC,SAAS,EAAE;AAC7D,qBAAO,OAAK,cAAc,CAAC,KAAK,CAAC,CAAC;aACnC;WACF,CAAC,CAAC;;AAEH,iBAAO,IAAI,CAAC,qBAAqB,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC;SAC9D,EAAE,IAAI,CAAC,CAAC;OACV;KACF;;;SA5YG,MAAM;;;AAgZZ,MAAM,CAAC,OAAO,GAAG,MAAM,CAAC;;;;;;;;;;AC7bxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;2CCpP4B,8BAA8B;;;;qBAE3C;AACb,2BAAyB,EAAA,mCAAC,UAAU,EAAE,SAAS,EAAE;AAC/C,6CAAgB,QAAQ,CAAC,kCAAkC,EAAE,EAAC,UAAU,EAAV,UAAU,EAAE,SAAS,EAAT,SAAS,EAAC,CAAC,CAAC;GACvF;CACF;;;;;;;;2CCN2B,8BAA8B;;;;AAE1D,MAAM,CAAC,OAAO,GAAG;AACf,SAAO,EAAE,iBAAC,GAAG,EAAK;AAChB,6CAAgB,QAAQ,CAAC,gBAAgB,EAAE;AACzC,SAAG,EAAH,GAAG;KACJ,CAAC,CAAC;GACJ;AACD,QAAM,EAAE,gBAAC,GAAG,EAAE,QAAQ,EAAK;AACzB,6CAAgB,QAAQ,CAAC,eAAe,EAAE;AACxC,SAAG,EAAH,GAAG;AACH,cAAQ,EAAR,QAAQ;KACT,CAAC,CAAC;GACJ;AACD,kBAAgB,EAAE,0BAAC,GAAG,EAAE,MAAM,EAAK;AACjC,6CAAgB,QAAQ,CAAC,0BAA0B,EAAE;AACnD,SAAG,EAAH,GAAG;AACH,YAAM,EAAN,MAAM;KACP,CAAC,CAAC;GACJ;CACF,CAAC;;;;;;;2CCpB0B,8BAA8B;;;;AAE1D,MAAM,CAAC,OAAO,GAA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","file":"connect-host.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */\n;(function(root) {\n\n\t// Detect free variables `exports`.\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`.\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code, and use\n\t// it as `root`.\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar InvalidCharacterError = function(message) {\n\t\tthis.message = message;\n\t};\n\tInvalidCharacterError.prototype = new Error;\n\tInvalidCharacterError.prototype.name = 'InvalidCharacterError';\n\n\tvar error = function(message) {\n\t\t// Note: the error messages used throughout this file match those used by\n\t\t// the native `atob`/`btoa` implementation in Chromium.\n\t\tthrow new InvalidCharacterError(message);\n\t};\n\n\tvar TABLE = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\t// http://whatwg.org/html/common-microsyntaxes.html#space-character\n\tvar REGEX_SPACE_CHARACTERS = /[\\t\\n\\f\\r ]/g;\n\n\t// `decode` is designed to be fully compatible with `atob` as described in the\n\t// HTML Standard. http://whatwg.org/html/webappapis.html#dom-windowbase64-atob\n\t// The optimized base64-decoding algorithm used is based on @atks excellent\n\t// implementation. https://gist.github.com/atk/1020396\n\tvar decode = function(input) {\n\t\tinput = String(input)\n\t\t\t.replace(REGEX_SPACE_CHARACTERS, '');\n\t\tvar length = input.length;\n\t\tif (length % 4 == 0) {\n\t\t\tinput = input.replace(/==?$/, '');\n\t\t\tlength = input.length;\n\t\t}\n\t\tif (\n\t\t\tlength % 4 == 1 ||\n\t\t\t// http://whatwg.org/C#alphanumeric-ascii-characters\n\t\t\t/[^+a-zA-Z0-9/]/.test(input)\n\t\t) {\n\t\t\terror(\n\t\t\t\t'Invalid character: the string to be decoded is not correctly encoded.'\n\t\t\t);\n\t\t}\n\t\tvar bitCounter = 0;\n\t\tvar bitStorage;\n\t\tvar buffer;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\twhile (++position < length) {\n\t\t\tbuffer = TABLE.indexOf(input.charAt(position));\n\t\t\tbitStorage = bitCounter % 4 ? bitStorage * 64 + buffer : buffer;\n\t\t\t// Unless this is the first of a group of 4 characters\n\t\t\tif (bitCounter++ % 4) {\n\t\t\t\t// convert the first 8 bits to a single ASCII character.\n\t\t\t\toutput += String.fromCharCode(\n\t\t\t\t\t0xFF & bitStorage >> (-2 * bitCounter & 6)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t};\n\n\t// `encode` is designed to be fully compatible with `btoa` as described in the\n\t// HTML Standard: http://whatwg.org/html/webappapis.html#dom-windowbase64-btoa\n\tvar encode = function(input) {\n\t\tinput = String(input);\n\t\tif (/[^\\0-\\xFF]/.test(input)) {\n\t\t\t// Note: no need to special-case astral symbols here, as surrogates are\n\t\t\t// matched, and the input is supposed to only contain ASCII anyway.\n\t\t\terror(\n\t\t\t\t'The string to be encoded contains characters outside of the ' +\n\t\t\t\t'Latin1 range.'\n\t\t\t);\n\t\t}\n\t\tvar padding = input.length % 3;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\tvar a;\n\t\tvar b;\n\t\tvar c;\n\t\tvar d;\n\t\tvar buffer;\n\t\t// Make sure any padding is handled outside of the loop.\n\t\tvar length = input.length - padding;\n\n\t\twhile (++position < length) {\n\t\t\t// Read three bytes, i.e. 24 bits.\n\t\t\ta = input.charCodeAt(position) << 16;\n\t\t\tb = input.charCodeAt(++position) << 8;\n\t\t\tc = input.charCodeAt(++position);\n\t\t\tbuffer = a + b + c;\n\t\t\t// Turn the 24 bits into four chunks of 6 bits each, and append the\n\t\t\t// matching character for each of them to the output.\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 18 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 12 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 6 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer & 0x3F)\n\t\t\t);\n\t\t}\n\n\t\tif (padding == 2) {\n\t\t\ta = input.charCodeAt(position) << 8;\n\t\t\tb = input.charCodeAt(++position);\n\t\t\tbuffer = a + b;\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 10) +\n\t\t\t\tTABLE.charAt((buffer >> 4) & 0x3F) +\n\t\t\t\tTABLE.charAt((buffer << 2) & 0x3F) +\n\t\t\t\t'='\n\t\t\t);\n\t\t} else if (padding == 1) {\n\t\t\tbuffer = input.charCodeAt(position);\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 2) +\n\t\t\t\tTABLE.charAt((buffer << 4) & 0x3F) +\n\t\t\t\t'=='\n\t\t\t);\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tvar base64 = {\n\t\t'encode': encode,\n\t\t'decode': decode,\n\t\t'version': '0.1.0'\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn base64;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = base64;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (var key in base64) {\n\t\t\t\tbase64.hasOwnProperty(key) && (freeExports[key] = base64[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.base64 = base64;\n\t}\n\n}(this));\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","/*!\n * jsUri\n * https://github.com/derek-watson/jsUri\n *\n * Copyright 2013, Derek Watson\n * Released under the MIT license.\n *\n * Includes parseUri regular expressions\n * http://blog.stevenlevithan.com/archives/parseuri\n * Copyright 2007, Steven Levithan\n * Released under the MIT license.\n */\n\n /*globals define, module */\n\n(function(global) {\n\n  var re = {\n    starts_with_slashes: /^\\/+/,\n    ends_with_slashes: /\\/+$/,\n    pluses: /\\+/g,\n    query_separator: /[&;]/,\n    uri_parser: /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@\\/]*)(?::([^:@]*))?)?@)?(\\[[0-9a-fA-F:.]+\\]|[^:\\/?#]*)(?::(\\d+|(?=:)))?(:)?)((((?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/\n  };\n\n  /**\n   * Define forEach for older js environments\n   * @see https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach#Compatibility\n   */\n  if (!Array.prototype.forEach) {\n    Array.prototype.forEach = function(callback, thisArg) {\n      var T, k;\n\n      if (this == null) {\n        throw new TypeError(' this is null or not defined');\n      }\n\n      var O = Object(this);\n      var len = O.length >>> 0;\n\n      if (typeof callback !== \"function\") {\n        throw new TypeError(callback + ' is not a function');\n      }\n\n      if (arguments.length > 1) {\n        T = thisArg;\n      }\n\n      k = 0;\n\n      while (k < len) {\n        var kValue;\n        if (k in O) {\n          kValue = O[k];\n          callback.call(T, kValue, k, O);\n        }\n        k++;\n      }\n    };\n  }\n\n  /**\n   * unescape a query param value\n   * @param  {string} s encoded value\n   * @return {string}   decoded value\n   */\n  function decode(s) {\n    if (s) {\n        s = s.toString().replace(re.pluses, '%20');\n        s = decodeURIComponent(s);\n    }\n    return s;\n  }\n\n  /**\n   * Breaks a uri string down into its individual parts\n   * @param  {string} str uri\n   * @return {object}     parts\n   */\n  function parseUri(str) {\n    var parser = re.uri_parser;\n    var parserKeys = [\"source\", \"protocol\", \"authority\", \"userInfo\", \"user\", \"password\", \"host\", \"port\", \"isColonUri\", \"relative\", \"path\", \"directory\", \"file\", \"query\", \"anchor\"];\n    var m = parser.exec(str || '');\n    var parts = {};\n\n    parserKeys.forEach(function(key, i) {\n      parts[key] = m[i] || '';\n    });\n\n    return parts;\n  }\n\n  /**\n   * Breaks a query string down into an array of key/value pairs\n   * @param  {string} str query\n   * @return {array}      array of arrays (key/value pairs)\n   */\n  function parseQuery(str) {\n    var i, ps, p, n, k, v, l;\n    var pairs = [];\n\n    if (typeof(str) === 'undefined' || str === null || str === '') {\n      return pairs;\n    }\n\n    if (str.indexOf('?') === 0) {\n      str = str.substring(1);\n    }\n\n    ps = str.toString().split(re.query_separator);\n\n    for (i = 0, l = ps.length; i < l; i++) {\n      p = ps[i];\n      n = p.indexOf('=');\n\n      if (n !== 0) {\n        k = decode(p.substring(0, n));\n        v = decode(p.substring(n + 1));\n        pairs.push(n === -1 ? [p, null] : [k, v]);\n      }\n\n    }\n    return pairs;\n  }\n\n  /**\n   * Creates a new Uri object\n   * @constructor\n   * @param {string} str\n   */\n  function Uri(str) {\n    this.uriParts = parseUri(str);\n    this.queryPairs = parseQuery(this.uriParts.query);\n    this.hasAuthorityPrefixUserPref = null;\n  }\n\n  /**\n   * Define getter/setter methods\n   */\n  ['protocol', 'userInfo', 'host', 'port', 'path', 'anchor'].forEach(function(key) {\n    Uri.prototype[key] = function(val) {\n      if (typeof val !== 'undefined') {\n        this.uriParts[key] = val;\n      }\n      return this.uriParts[key];\n    };\n  });\n\n  /**\n   * if there is no protocol, the leading // can be enabled or disabled\n   * @param  {Boolean}  val\n   * @return {Boolean}\n   */\n  Uri.prototype.hasAuthorityPrefix = function(val) {\n    if (typeof val !== 'undefined') {\n      this.hasAuthorityPrefixUserPref = val;\n    }\n\n    if (this.hasAuthorityPrefixUserPref === null) {\n      return (this.uriParts.source.indexOf('//') !== -1);\n    } else {\n      return this.hasAuthorityPrefixUserPref;\n    }\n  };\n\n  Uri.prototype.isColonUri = function (val) {\n    if (typeof val !== 'undefined') {\n      this.uriParts.isColonUri = !!val;\n    } else {\n      return !!this.uriParts.isColonUri;\n    }\n  };\n\n  /**\n   * Serializes the internal state of the query pairs\n   * @param  {string} [val]   set a new query string\n   * @return {string}         query string\n   */\n  Uri.prototype.query = function(val) {\n    var s = '', i, param, l;\n\n    if (typeof val !== 'undefined') {\n      this.queryPairs = parseQuery(val);\n    }\n\n    for (i = 0, l = this.queryPairs.length; i < l; i++) {\n      param = this.queryPairs[i];\n      if (s.length > 0) {\n        s += '&';\n      }\n      if (param[1] === null) {\n        s += param[0];\n      } else {\n        s += param[0];\n        s += '=';\n        if (typeof param[1] !== 'undefined') {\n          s += encodeURIComponent(param[1]);\n        }\n      }\n    }\n    return s.length > 0 ? '?' + s : s;\n  };\n\n  /**\n   * returns the first query param value found for the key\n   * @param  {string} key query key\n   * @return {string}     first value found for key\n   */\n  Uri.prototype.getQueryParamValue = function (key) {\n    var param, i, l;\n    for (i = 0, l = this.queryPairs.length; i < l; i++) {\n      param = this.queryPairs[i];\n      if (key === param[0]) {\n        return param[1];\n      }\n    }\n  };\n\n  /**\n   * returns an array of query param values for the key\n   * @param  {string} key query key\n   * @return {array}      array of values\n   */\n  Uri.prototype.getQueryParamValues = function (key) {\n    var arr = [], i, param, l;\n    for (i = 0, l = this.queryPairs.length; i < l; i++) {\n      param = this.queryPairs[i];\n      if (key === param[0]) {\n        arr.push(param[1]);\n      }\n    }\n    return arr;\n  };\n\n  /**\n   * removes query parameters\n   * @param  {string} key     remove values for key\n   * @param  {val}    [val]   remove a specific value, otherwise removes all\n   * @return {Uri}            returns self for fluent chaining\n   */\n  Uri.prototype.deleteQueryParam = function (key, val) {\n    var arr = [], i, param, keyMatchesFilter, valMatchesFilter, l;\n\n    for (i = 0, l = this.queryPairs.length; i < l; i++) {\n\n      param = this.queryPairs[i];\n      keyMatchesFilter = decode(param[0]) === decode(key);\n      valMatchesFilter = param[1] === val;\n\n      if ((arguments.length === 1 && !keyMatchesFilter) || (arguments.length === 2 && (!keyMatchesFilter || !valMatchesFilter))) {\n        arr.push(param);\n      }\n    }\n\n    this.queryPairs = arr;\n\n    return this;\n  };\n\n  /**\n   * adds a query parameter\n   * @param  {string}  key        add values for key\n   * @param  {string}  val        value to add\n   * @param  {integer} [index]    specific index to add the value at\n   * @return {Uri}                returns self for fluent chaining\n   */\n  Uri.prototype.addQueryParam = function (key, val, index) {\n    if (arguments.length === 3 && index !== -1) {\n      index = Math.min(index, this.queryPairs.length);\n      this.queryPairs.splice(index, 0, [key, val]);\n    } else if (arguments.length > 0) {\n      this.queryPairs.push([key, val]);\n    }\n    return this;\n  };\n\n  /**\n   * test for the existence of a query parameter\n   * @param  {string}  key        add values for key\n   * @param  {string}  val        value to add\n   * @param  {integer} [index]    specific index to add the value at\n   * @return {Uri}                returns self for fluent chaining\n   */\n  Uri.prototype.hasQueryParam = function (key) {\n    var i, len = this.queryPairs.length;\n    for (i = 0; i < len; i++) {\n      if (this.queryPairs[i][0] == key)\n        return true;\n    }\n    return false;\n  };\n\n  /**\n   * replaces query param values\n   * @param  {string} key         key to replace value for\n   * @param  {string} newVal      new value\n   * @param  {string} [oldVal]    replace only one specific value (otherwise replaces all)\n   * @return {Uri}                returns self for fluent chaining\n   */\n  Uri.prototype.replaceQueryParam = function (key, newVal, oldVal) {\n    var index = -1, len = this.queryPairs.length, i, param;\n\n    if (arguments.length === 3) {\n      for (i = 0; i < len; i++) {\n        param = this.queryPairs[i];\n        if (decode(param[0]) === decode(key) && decodeURIComponent(param[1]) === decode(oldVal)) {\n          index = i;\n          break;\n        }\n      }\n      if (index >= 0) {\n        this.deleteQueryParam(key, decode(oldVal)).addQueryParam(key, newVal, index);\n      }\n    } else {\n      for (i = 0; i < len; i++) {\n        param = this.queryPairs[i];\n        if (decode(param[0]) === decode(key)) {\n          index = i;\n          break;\n        }\n      }\n      this.deleteQueryParam(key);\n      this.addQueryParam(key, newVal, index);\n    }\n    return this;\n  };\n\n  /**\n   * Define fluent setter methods (setProtocol, setHasAuthorityPrefix, etc)\n   */\n  ['protocol', 'hasAuthorityPrefix', 'isColonUri', 'userInfo', 'host', 'port', 'path', 'query', 'anchor'].forEach(function(key) {\n    var method = 'set' + key.charAt(0).toUpperCase() + key.slice(1);\n    Uri.prototype[method] = function(val) {\n      this[key](val);\n      return this;\n    };\n  });\n\n  /**\n   * Scheme name, colon and doubleslash, as required\n   * @return {string} http:// or possibly just //\n   */\n  Uri.prototype.scheme = function() {\n    var s = '';\n\n    if (this.protocol()) {\n      s += this.protocol();\n      if (this.protocol().indexOf(':') !== this.protocol().length - 1) {\n        s += ':';\n      }\n      s += '//';\n    } else {\n      if (this.hasAuthorityPrefix() && this.host()) {\n        s += '//';\n      }\n    }\n\n    return s;\n  };\n\n  /**\n   * Same as Mozilla nsIURI.prePath\n   * @return {string} scheme://user:password@host:port\n   * @see  https://developer.mozilla.org/en/nsIURI\n   */\n  Uri.prototype.origin = function() {\n    var s = this.scheme();\n\n    if (this.userInfo() && this.host()) {\n      s += this.userInfo();\n      if (this.userInfo().indexOf('@') !== this.userInfo().length - 1) {\n        s += '@';\n      }\n    }\n\n    if (this.host()) {\n      s += this.host();\n      if (this.port() || (this.path() && this.path().substr(0, 1).match(/[0-9]/))) {\n        s += ':' + this.port();\n      }\n    }\n\n    return s;\n  };\n\n  /**\n   * Adds a trailing slash to the path\n   */\n  Uri.prototype.addTrailingSlash = function() {\n    var path = this.path() || '';\n\n    if (path.substr(-1) !== '/') {\n      this.path(path + '/');\n    }\n\n    return this;\n  };\n\n  /**\n   * Serializes the internal state of the Uri object\n   * @return {string}\n   */\n  Uri.prototype.toString = function() {\n    var path, s = this.origin();\n\n    if (this.isColonUri()) {\n      if (this.path()) {\n        s += ':'+this.path();\n      }\n    } else if (this.path()) {\n      path = this.path();\n      if (!(re.ends_with_slashes.test(s) || re.starts_with_slashes.test(path))) {\n        s += '/';\n      } else {\n        if (s) {\n          s.replace(re.ends_with_slashes, '/');\n        }\n        path = path.replace(re.starts_with_slashes, '/');\n      }\n      s += path;\n    } else {\n      if (this.host() && (this.query().toString() || this.anchor())) {\n        s += '/';\n      }\n    }\n    if (this.query().toString()) {\n      s += this.query().toString();\n    }\n\n    if (this.anchor()) {\n      if (this.anchor().indexOf('#') !== 0) {\n        s += '#';\n      }\n      s += this.anchor();\n    }\n\n    return s;\n  };\n\n  /**\n   * Clone a Uri object\n   * @return {Uri} duplicate copy of the Uri\n   */\n  Uri.prototype.clone = function() {\n    return new Uri(this.toString());\n  };\n\n  /**\n   * export via AMD or CommonJS, otherwise leak a global\n   */\n  if (typeof define === 'function' && define.amd) {\n    define(function() {\n      return Uri;\n    });\n  } else if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\n    module.exports = Uri;\n  } else {\n    global.Uri = Uri;\n  }\n}(this));\n","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import XDMRPC from './xdmrpc';\nimport Utils from '../common/util';\n\nclass Connect {\n\n  constructor() {\n    this._xdm = new XDMRPC();\n  }\n\n  /**\n   * Send a message to iframes matching the targetSpec. This message is added to\n   *  a message queue for delivery to ensure the message is received if an iframe\n   *  has not yet loaded\n   *\n   * @param type The name of the event type\n   * @param targetSpec The spec to match against extensions when sending this event\n   * @param event The event payload\n   * @param callback A callback to be executed when the remote iframe calls its callback\n   */\n  dispatch(type, targetSpec, event, callback) {\n    this._xdm.queueEvent(type, targetSpec, event, callback);\n    return this.getExtensions(targetSpec);\n  }\n\n  /**\n   * Send a message to iframes matching the targetSpec immediately. This message will\n   *  only be sent to iframes that are already open, and will not be delivered if none\n   *  are currently open.\n   *\n   * @param type The name of the event type\n   * @param targetSpec The spec to match against extensions when sending this event\n   * @param event The event payload\n   */\n  broadcast(type, targetSpec, event) {\n    this._xdm.dispatch(type, targetSpec, event, null, null);\n    return this.getExtensions(targetSpec);\n  }\n\n  _createId(extension) {\n    if(!extension.addon_key || !extension.key){\n      throw Error('Extensions require addon_key and key');\n    }\n    return extension.addon_key + '__' + extension.key + '__' + Utils.randomString();\n  }\n  /**\n  * Creates a new iframed module, without actually creating the DOM element.\n  * The iframe attributes are passed to the 'setupCallback', which is responsible for creating\n  * the DOM element and returning the window reference.\n  *\n  * @param extension The extension definition. Example:\n  *   {\n  *     addon_key: 'my-addon',\n  *     key: 'my-module',\n  *     url: 'https://example.com/my-module',\n  *     options: { autoresize: false }\n  *   }\n  *\n  * @param initCallback The optional initCallback is called when the bridge between host and iframe is established.\n  **/\n  create(extension, initCallback) {\n    let extension_id = this.registerExtension(extension, initCallback);\n\n    let data = {\n      extension_id: extension_id,\n      api: this._xdm.getApiSpec(),\n      origin: Utils.locationOrigin(),\n      options: extension.options || {}\n    };\n\n    return {\n      id: extension_id,\n      name: JSON.stringify(data),\n      src: extension.url\n    };\n  }\n\n  registerRequestNotifier(callback) {\n    this._xdm.registerRequestNotifier(callback);\n  }\n\n  registerExtension(extension, initCallback, unloadCallback) {\n    let extension_id = this._createId(extension);\n    this._xdm.registerExtension(extension_id, {\n      extension: extension,\n      initCallback: initCallback,\n      unloadCallback: unloadCallback\n    });\n    return extension_id;\n  }\n\n  registerKeyListener(extension_id, key, modifiers, callback) {\n    this._xdm.registerKeyListener(extension_id, key, modifiers, callback);\n  }\n\n  unregisterKeyListener(extension_id, key, modifiers, callback) {\n    this._xdm.unregisterKeyListener(extension_id, key, modifiers, callback);\n  }\n\n  defineModule(moduleName, module) {\n    this._xdm.defineAPIModule(module, moduleName);\n  }\n\n  defineGlobals(module) {\n    this._xdm.defineAPIModule(module);\n  }\n\n  getExtensions(filter) {\n    return this._xdm.getRegisteredExtensions(filter);\n  }\n\n  unregisterExtension(filter) {\n    return this._xdm.unregisterExtension(filter);\n  }\n\n}\n\nmodule.exports = new Connect();","import Util from './util';\nclass PostMessage {\n\n  constructor(data) {\n    let d = data || {};\n    this._registerListener(d.listenOn);\n  }\n\n // listen for postMessage events (defaults to window).\n  _registerListener(listenOn) {\n    if(!listenOn || !listenOn.addEventListener) {\n      listenOn = window;\n    }\n    listenOn.addEventListener(\"message\", Util._bind(this, this._receiveMessage), false);\n  }\n\n  _receiveMessage (event) {\n    let extensionId = event.data.eid,\n      reg;\n\n    if(extensionId && this._registeredExtensions){\n      reg = this._registeredExtensions[extensionId];\n    }\n\n    if (!this._checkOrigin(event, reg)) {\n      return false;\n    }\n\n    var handler = this._messageHandlers[event.data.type];\n    if (handler) {\n      handler.call(this, event, reg);\n    }\n  }\n\n}\n\nmodule.exports = PostMessage;","const LOG_PREFIX = \"[Simple-XDM] \";\n\nconst util = {\n\n  locationOrigin() {\n    if (!window.location.origin) {\n      return window.location.protocol + \"//\" + window.location.hostname + ( window.location.port ? ':' + window.location.port : '' );\n    } else {\n      return window.location.origin;\n    }\n  },\n\n  randomString() {\n    return Math.floor(Math.random() * 1000000000).toString(16);\n  },\n\n  isString(str) {\n    return typeof str === \"string\" || str instanceof String;\n  },\n\n  argumentsToArray(arrayLike) {\n    return Array.prototype.slice.call(arrayLike);\n  },\n\n  argumentNames(fn) {\n    return fn.toString()\n        .replace(/((\\/\\/.*$)|(\\/\\*[^]*?\\*\\/))/mg, '') // strip comments\n        .replace(/[^(]+\\(([^)]*)[^]+/, '$1') // get signature\n        .match(/([^\\s,]+)/g) || [];\n  },\n\n  hasCallback(args) {\n    var length = args.length;\n    return length > 0 && typeof args[length - 1] === 'function';\n  },\n\n  error(msg) {\n    if (window.console) {\n      console.error(LOG_PREFIX + msg);\n    }\n  },\n\n  warn(msg) {\n    if (window.console) {\n      console.warn(LOG_PREFIX + msg);\n    }\n  },\n\n  _bind(thisp, fn){\n    if (Function.prototype.bind) {\n      return fn.bind(thisp);\n    }\n    return function () {\n      return fn.apply(thisp, arguments);\n    };\n  },\n\n  each(list, iteratee) {\n    var length;\n    var key;\n    if (list) {\n      length = list.length;\n      if (length != null && typeof list !== 'function') {\n        key = 0;\n        while (key < length) {\n          if (iteratee.call(list[key], key, list[key]) === false) {\n            break;\n          }\n          key += 1;\n        }\n      } else {\n        for (key in list) {\n          if (list.hasOwnProperty(key)) {\n            if (iteratee.call(list[key], key, list[key]) === false) {\n              break;\n            }\n          }\n        }\n      }\n    }\n  },\n\n  extend(dest) {\n    var args = arguments;\n    var srcs = [].slice.call(args, 1, args.length);\n    srcs.forEach(function (source) {\n      if (typeof source === \"object\") {\n        Object.getOwnPropertyNames(source).forEach(function (name) {\n          dest[name] = source[name];\n        });\n      }\n    });\n    return dest;\n  },\n\n  sanitizeStructuredClone(object) {\n    const whiteList = [Boolean, String, Date, RegExp, Blob, File, FileList, ArrayBuffer];\n    const blackList = [Error, Node];\n    const warn = util.warn;\n    var visitedObjects = [];\n\n    function _clone(value) {\n      if (typeof value === 'function') {\n        warn(\"A function was detected and removed from the message.\");\n        return null;\n      }\n\n      if (blackList.some(t => {\n        if (value instanceof t) {\n          warn(`${t.name} object was detected and removed from the message.`);\n          return true;\n        }\n        return false;\n      })) {\n        return {};\n      }\n\n      if (value && typeof value === 'object' && whiteList.every(t => !(value instanceof t))) {\n        if (visitedObjects.indexOf(value) > -1) {\n          warn(\"A circular reference was detected and removed from the message.\");\n          return null;\n        }\n\n        visitedObjects.push(value);\n\n        let newValue;\n\n        if (Array.isArray(value)) {\n          newValue = value.map(function (element) {\n            return _clone(element);\n          });\n        } else {\n          newValue = {};\n          for (let name in value) {\n            if (value.hasOwnProperty(name)) {\n              let clonedValue = _clone(value[name]);\n              if (clonedValue !== null) {\n                newValue[name] = clonedValue;\n              }\n            }\n          }\n        }\n        return newValue;\n      }\n      return value;\n    }\n\n    return _clone(object);\n  }\n};\n\nexport default util;\n","/**\n* Postmessage format:\n*\n* Initialization\n* --------------\n* {\n*   type: 'init',\n*   eid: 'my-addon__my-module-xyz'  // the extension identifier, unique across iframes\n* }\n*\n* Request\n* -------\n* {\n*   type: 'req',\n*   eid: 'my-addon__my-module-xyz',  // the extension identifier, unique for iframe\n*   mid: 'xyz',  // a unique message identifier, required for callbacks\n*   mod: 'cookie',  // the module name\n*   fn: 'read',  // the method name\n*   args: [arguments]  // the method arguments\n* }\n*\n* Response\n* --------\n* {\n*   type: 'resp'\n*   eid: 'my-addon__my-module-xyz',  // the extension identifier, unique for iframe\n*   mid: 'xyz',  // a unique message identifier, obtained from the request\n*   args: [arguments]  // the callback arguments\n* }\n*\n* Event\n* -----\n* {\n*   type: 'evt',\n*   etyp: 'some-event',\n*   evnt: { ... }  // the event data\n*   mid: 'xyz', // a unique message identifier for the event\n* }\n**/\n\nimport Utils from '../common/util';\nimport PostMessage from '../common/postmessage';\n\nlet VALID_EVENT_TIME_MS = 30000; //30 seconds\n\nclass XDMRPC extends PostMessage {\n\n  constructor(config) {\n    config = config || {};\n    super(config);\n    this._registeredExtensions = config.extensions || {};\n    this._registeredAPIModules = {};\n    this._pendingCallbacks = {};\n    this._keycodeCallbacks = {};\n    this._pendingEvents = {};\n    this._messageHandlers = {\n      init: this._handleInit,\n      req: this._handleRequest,\n      resp: this._handleResponse,\n      event_query: this._handleEventQuery,\n      broadcast: this._handleBroadcast,\n      key_listen: this._handleKeyListen,\n      unload: this._handleUnload\n    };\n  }\n\n  _handleInit(event, reg) {\n    this._registeredExtensions[reg.extension_id].source = event.source;\n    if (reg.initCallback) {\n      reg.initCallback(event.data.eid);\n      delete reg.initCallback;\n    }\n  }\n\n  _handleResponse(event) {\n    var data = event.data;\n    var pendingCallback = this._pendingCallbacks[data.mid];\n    if (pendingCallback) {\n      delete this._pendingCallbacks[data.mid];\n      pendingCallback.apply(window, data.args);\n    }\n  }\n\n  registerRequestNotifier(cb) {\n    this._registeredRequestNotifier = cb;\n  }\n\n  _handleRequest(event, reg) {\n    function sendResponse() {\n      var args = Utils.sanitizeStructuredClone(Utils.argumentsToArray(arguments));\n      event.source.postMessage({\n        mid: event.data.mid,\n        type: 'resp',\n        args: args\n      }, reg.extension.url);\n    }\n\n    var data = event.data;\n    var module = this._registeredAPIModules[data.mod];\n    const extension = this.getRegisteredExtensions(reg.extension)[0];\n    if (module) {\n      let fnName = data.fn;\n      if (data._cls) {\n        const Cls = module[data._cls];\n        const ns = data.mod + '-' + data._cls + '-';\n        sendResponse._id = data._id;\n        if (fnName === 'constructor') {\n          if (!Cls._construct) {\n            Cls.constructor.prototype._destroy = function() {\n              delete this._context._proxies[ns + this._id];\n            };\n            Cls._construct = function(...args) {\n              const inst = new Cls.constructor(...args);\n              const callback = args[args.length - 1];\n              inst._id = callback._id;\n              inst._context = callback._context;\n              inst._context._proxies[ns + inst._id] = inst;\n              return inst;\n            };\n          }\n          module = Cls;\n          fnName = '_construct';\n        } else {\n          module = extension._proxies[ns + data._id];\n        }\n      }\n      let method = module[fnName];\n      if (method) {\n        var methodArgs = data.args;\n        sendResponse._context = extension;\n        methodArgs.push(sendResponse);\n        method.apply(module, methodArgs);\n        if(this._registeredRequestNotifier) {\n          this._registeredRequestNotifier.call(null, {\n            module: data.mod,\n            fn: data.fn,\n            type: data.type,\n            addon_key: reg.extension.addon_key,\n            key: reg.extension.key,\n            extension_id: reg.extension_id\n          });\n        }\n      }\n    }\n  }\n\n  _handleBroadcast(event, reg) {\n    var event_data = event.data;\n    var targetSpec = r => r.extension.addon_key === reg.extension.addon_key && r.extension_id !== reg.extension_id;\n    this.dispatch(event_data.etyp, targetSpec, event_data.evnt, null, null);\n  }\n\n  _handleKeyListen(event, reg) {\n    var eventData = event.data;\n    var keycodeEntry = this._keycodeKey(eventData.keycode, eventData.modifiers, reg.extension_id);\n    var listeners = this._keycodeCallbacks[keycodeEntry];\n    if(listeners) {\n      listeners.forEach((listener) => {\n        listener.call(null, {\n          addon_key: reg.extension.addon_key,\n          key: reg.extension.key,\n          extension_id: reg.extension_id,\n          keycode: eventData.keycode,\n          modifiers: eventData.modifiers\n        });\n      }, this);\n    }\n  }\n\n  defineAPIModule(module, moduleName){\n    if(moduleName){\n      this._registeredAPIModules[moduleName] = module;\n    } else {\n      this._registeredAPIModules._globals = Utils.extend({}, this._registeredAPIModules._globals, module);\n    }\n    return this._registeredAPIModules;\n  }\n\n  _fullKey(targetSpec){\n    var key = targetSpec.addon_key || 'global';\n    if(targetSpec.key){\n      key = `${key}@@${targetSpec.key}`;\n    }\n\n    return key;\n  }\n\n  queueEvent(type, targetSpec, event, callback) {\n    var loaded_frame,\n      targets = this._findRegistrations(targetSpec);\n\n    loaded_frame = targets.some((target) => {\n      return target.registered_events !== undefined;\n    }, this);\n\n    if(loaded_frame){\n      this.dispatch(type, targetSpec, event, callback);\n    } else {\n      this._pendingEvents[this._fullKey(targetSpec)] = {\n        type,\n        targetSpec,\n        event,\n        callback,\n        time: new Date().getTime(),\n        uid: Utils.randomString()\n      };\n    }\n  }\n\n  _handleEventQuery(message, extension) {\n    let executed = {};\n    let now = new Date().getTime();\n    let keys = Object.keys(this._pendingEvents);\n    keys.forEach((index) => {\n      let element = this._pendingEvents[index];\n      let eventIsValid = (now - element.time) <= VALID_EVENT_TIME_MS;\n      let isSameTarget = !element.targetSpec || this._findRegistrations(element.targetSpec).length !== 0;\n\n      if (eventIsValid && isSameTarget) {\n        executed[index] = element;\n        element.targetSpec = element.targetSpec || {};\n        element.targetSpec.addon_key = extension.extension.addon_key;\n        element.targetSpec.key = extension.extension.key;\n        this.dispatch(element.type, element.targetSpec, element.event, element.callback, message.source);\n      } else if (!eventIsValid) {\n        delete this._pendingEvents[index];\n      }\n    });\n\n    this._registeredExtensions[extension.extension_id].registered_events = message.data.args;\n\n    return executed;\n  }\n\n  _handleUnload(event, reg) {\n    delete this._registeredExtensions[reg.extension_id].source;\n    if (reg.unloadCallback) {\n      reg.unloadCallback(event.data.eid);\n    }\n  }\n\n  dispatch(type, targetSpec, event, callback, source) {\n    function sendEvent(reg, evnt) {\n      if (reg.source) {\n        var mid;\n        if (callback) {\n          mid = Utils.randomString();\n          this._pendingCallbacks[mid] = callback;\n        }\n\n        reg.source.postMessage({\n          type: 'evt',\n          mid: mid,\n          etyp: type,\n          evnt: evnt\n        }, reg.extension.url);\n      }\n    }\n\n    var registrations = this._findRegistrations(targetSpec || {});\n    registrations.forEach(function (reg) {\n      if(source){\n        reg.source = source;\n      }\n\n      if (reg.source) {\n        Utils._bind(this, sendEvent)(reg, event);\n      }\n    }, this);\n  }\n\n  _findRegistrations(targetSpec) {\n    if(this._registeredExtensions.length === 0){\n      Utils.error('no registered extensions', this._registeredExtensions);\n      return [];\n    }\n    var keys = Object.getOwnPropertyNames(targetSpec);\n    var registrations = Object.getOwnPropertyNames(this._registeredExtensions).map((key) => {\n      return this._registeredExtensions[key];\n    });\n\n    if (targetSpec instanceof Function) {\n      return registrations.filter(targetSpec);\n    } else {\n      return registrations.filter(function (reg) {\n        return keys.every(function (key) {\n          return reg.extension[key] === targetSpec[key];\n        });\n      });\n    }\n  }\n\n  registerExtension(extension_id, data) {\n    // delete duplicate registrations\n    if(data.extension.addon_key && data.extension.key){\n      let existingView = this._findRegistrations({\n        addon_key: data.extension.addon_key,\n        key: data.extension.key\n      });\n      if(existingView.length !== 0){\n        delete this._registeredExtensions[existingView[0].extension_id];\n      }\n    }\n    data._proxies = {};\n    data.extension_id = extension_id;\n    this._registeredExtensions[extension_id] = data;\n  }\n\n  _keycodeKey(key, modifiers, extension_id) {\n    var code = key;\n\n    if(modifiers) {\n      if(typeof modifiers === \"string\") {\n        modifiers = [modifiers];\n      }\n      modifiers.sort();\n      modifiers.forEach((modifier) => {\n        code += '$$' + modifier;\n      }, this);\n    }\n\n    return code + '__' + extension_id;\n  }\n\n  registerKeyListener(extension_id, key, modifiers, callback) {\n    if(typeof modifiers === \"string\") {\n      modifiers = [modifiers];\n    }\n    var reg = this._registeredExtensions[extension_id];\n    var keycodeEntry = this._keycodeKey(key, modifiers, extension_id);\n    if(!this._keycodeCallbacks[keycodeEntry]) {\n      this._keycodeCallbacks[keycodeEntry] = [];\n      reg.source.postMessage({\n        type: 'key_listen',\n        keycode: key,\n        modifiers: modifiers,\n        action: 'add'\n      }, reg.extension.url);\n    }\n    this._keycodeCallbacks[keycodeEntry].push(callback);\n  }\n\n  unregisterKeyListener(extension_id, key, modifiers, callback) {\n    var keycodeEntry = this._keycodeKey(key, modifiers, extension_id);\n    var potentialCallbacks = this._keycodeCallbacks[keycodeEntry];\n    var reg = this._registeredExtensions[extension_id];\n\n    if(potentialCallbacks) {\n      if(callback) {\n        var index = potentialCallbacks.indexOf(callback);\n        this._keycodeCallbacks[keycodeEntry].splice(index, 1);\n      } else {\n        delete this._keycodeCallbacks[keycodeEntry];\n      }\n\n      reg.source.postMessage({\n        type: 'key_listen',\n        keycode: key,\n        modifiers: modifiers,\n        action: 'remove'\n      }, reg.extension.url);\n    }\n  }\n\n  getApiSpec() {\n    let that = this;\n    function createModule(moduleName) {\n      var module = that._registeredAPIModules[moduleName];\n      if(!module){\n        throw new Error(\"unregistered API module: \" + moduleName);\n      }\n      function getModuleDefinition(mod) {\n        return Object.getOwnPropertyNames(mod).reduce((accumulator, memberName) => {\n          const member = mod[memberName];\n          switch (typeof member) {\n          case 'function':\n            accumulator[memberName] = {\n              args: Utils.argumentNames(member)\n            };\n            break;\n          case 'object':\n            if (member.hasOwnProperty('constructor')) {\n              accumulator[memberName] = getModuleDefinition(member);\n            }\n            break;\n          }\n          return accumulator;\n        }, {});\n      }\n      return getModuleDefinition(module);\n    }\n    return Object.getOwnPropertyNames(this._registeredAPIModules).reduce((accumulator, moduleName) => {\n      accumulator[moduleName] = createModule(moduleName);\n      return accumulator;\n    }, {});\n  }\n\n\n  // validate origin of postMessage\n  _checkOrigin(event, reg) {\n    let no_source_types = ['init', 'event_query'];\n    let isNoSourceType = reg && !reg.source && no_source_types.indexOf(event.data.type) > -1;\n    let sourceTypeMatches = reg && event.source === reg.source;\n    let hasExtensionUrl = reg && reg.extension.url.indexOf(event.origin) === 0;\n    let isValidOrigin = hasExtensionUrl && (isNoSourceType || sourceTypeMatches);\n\n    // check undefined for chromium (Issue 395010)\n    if(event.data.type === 'unload' && (sourceTypeMatches || event.source === undefined)) {\n      isValidOrigin = true;\n    }\n\n    if(!isValidOrigin) {\n      Utils.warn(\"Failed to validate origin: \" + event.origin);\n    }\n    return isValidOrigin;\n  }\n\n  getRegisteredExtensions(filter) {\n    if(filter) {\n      return this._findRegistrations(filter);\n    }\n    return this._registeredExtensions;\n  }\n\n  unregisterExtension(filter) {\n    let registrations = this._findRegistrations(filter);\n    if(registrations.length !== 0){\n      registrations.forEach(function(registration) {\n        let keys = Object.keys(this._pendingEvents);\n        keys.forEach((index) => {\n          let element = this._pendingEvents[index];\n          let targetSpec = element.targetSpec || {};\n\n          if (targetSpec.addon_key === registration.extension.addon_key) {\n            delete this._pendingEvents[index];\n          }\n        });\n\n        delete this._registeredExtensions[registration.extension_id];\n      }, this);\n    }\n  }\n\n}\n\nmodule.exports = XDMRPC;\n","/*! https://mths.be/utf8js v2.0.0 by @mathias */\n;(function(root) {\n\n\t// Detect free variables `exports`\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code,\n\t// and use it as `root`\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar stringFromCharCode = String.fromCharCode;\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2decode(string) {\n\t\tvar output = [];\n\t\tvar counter = 0;\n\t\tvar length = string.length;\n\t\tvar value;\n\t\tvar extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2encode(array) {\n\t\tvar length = array.length;\n\t\tvar index = -1;\n\t\tvar value;\n\t\tvar output = '';\n\t\twhile (++index < length) {\n\t\t\tvalue = array[index];\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t}\n\t\treturn output;\n\t}\n\n\tfunction checkScalarValue(codePoint) {\n\t\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\t\tthrow Error(\n\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t' is not a scalar value'\n\t\t\t);\n\t\t}\n\t}\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction createByte(codePoint, shift) {\n\t\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n\t}\n\n\tfunction encodeCodePoint(codePoint) {\n\t\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\t\treturn stringFromCharCode(codePoint);\n\t\t}\n\t\tvar symbol = '';\n\t\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t\t}\n\t\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\t\tcheckScalarValue(codePoint);\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\t\tsymbol += createByte(codePoint, 12);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\t\treturn symbol;\n\t}\n\n\tfunction utf8encode(string) {\n\t\tvar codePoints = ucs2decode(string);\n\t\tvar length = codePoints.length;\n\t\tvar index = -1;\n\t\tvar codePoint;\n\t\tvar byteString = '';\n\t\twhile (++index < length) {\n\t\t\tcodePoint = codePoints[index];\n\t\t\tbyteString += encodeCodePoint(codePoint);\n\t\t}\n\t\treturn byteString;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction readContinuationByte() {\n\t\tif (byteIndex >= byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\tif ((continuationByte & 0xC0) == 0x80) {\n\t\t\treturn continuationByte & 0x3F;\n\t\t}\n\n\t\t// If we end up here, its not a continuation byte\n\t\tthrow Error('Invalid continuation byte');\n\t}\n\n\tfunction decodeSymbol() {\n\t\tvar byte1;\n\t\tvar byte2;\n\t\tvar byte3;\n\t\tvar byte4;\n\t\tvar codePoint;\n\n\t\tif (byteIndex > byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tif (byteIndex == byteCount) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Read first byte\n\t\tbyte1 = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\t// 1-byte sequence (no continuation bytes)\n\t\tif ((byte1 & 0x80) == 0) {\n\t\t\treturn byte1;\n\t\t}\n\n\t\t// 2-byte sequence\n\t\tif ((byte1 & 0xE0) == 0xC0) {\n\t\t\tvar byte2 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\t\tif (codePoint >= 0x80) {\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 3-byte sequence (may include unpaired surrogates)\n\t\tif ((byte1 & 0xF0) == 0xE0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\t\tif (codePoint >= 0x0800) {\n\t\t\t\tcheckScalarValue(codePoint);\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 4-byte sequence\n\t\tif ((byte1 & 0xF8) == 0xF0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tbyte4 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x0F) << 0x12) | (byte2 << 0x0C) |\n\t\t\t\t(byte3 << 0x06) | byte4;\n\t\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\t\treturn codePoint;\n\t\t\t}\n\t\t}\n\n\t\tthrow Error('Invalid UTF-8 detected');\n\t}\n\n\tvar byteArray;\n\tvar byteCount;\n\tvar byteIndex;\n\tfunction utf8decode(byteString) {\n\t\tbyteArray = ucs2decode(byteString);\n\t\tbyteCount = byteArray.length;\n\t\tbyteIndex = 0;\n\t\tvar codePoints = [];\n\t\tvar tmp;\n\t\twhile ((tmp = decodeSymbol()) !== false) {\n\t\t\tcodePoints.push(tmp);\n\t\t}\n\t\treturn ucs2encode(codePoints);\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar utf8 = {\n\t\t'version': '2.0.0',\n\t\t'encode': utf8encode,\n\t\t'decode': utf8decode\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn utf8;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = utf8;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tvar object = {};\n\t\t\tvar hasOwnProperty = object.hasOwnProperty;\n\t\t\tfor (var key in utf8) {\n\t\t\t\thasOwnProperty.call(utf8, key) && (freeExports[key] = utf8[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.utf8 = utf8;\n\t}\n\n}(this));\n","import EventDispatcher from 'dispatchers/event_dispatcher';\n\nexport default {\n  trackDeprecatedMethodUsed(methodUsed, extension) {\n    EventDispatcher.dispatch('analytics-deprecated-method-used', {methodUsed, extension});\n  }\n};","import EventDispatcher from 'dispatchers/event_dispatcher';\n\nmodule.exports = {\n  clicked: ($el) => {\n    EventDispatcher.dispatch('button-clicked', {\n      $el\n    });\n  },\n  toggle: ($el, disabled) => {\n    EventDispatcher.dispatch('button-toggle', {\n      $el,\n      disabled\n    });\n  },\n  toggleVisibility: ($el, hidden) => {\n    EventDispatcher.dispatch('button-toggle-visibility', {\n      $el,\n      hidden\n    });\n  }\n};\n","import EventDispatcher from 'dispatchers/event_dispatcher';\n\nmodule.exports = {\n  close: (data) => {\n    EventDispatcher.dispatch('dialog-close', {\n      dialog: data.dialog,\n      extension: data.extension,\n      customData: data.customData\n    });\n  },\n  closeActive: (data) => {\n    EventDispatcher.dispatch('dialog-close-active', data);\n  },\n  clickButton: (identifier, $el, extension) => {\n    EventDispatcher.dispatch('dialog-button-click', {\n      identifier,\n      $el,\n      extension\n    });\n  },\n  toggleButton: (data) => {\n    EventDispatcher.dispatch('dialog-button-toggle', data);\n  },\n  toggleButtonVisibility: (data) => {\n    EventDispatcher.dispatch('dialog-button-toggle-visibility', data);\n  }\n};\n","import EventDispatcher from 'dispatchers/event_dispatcher';\n\nmodule.exports = {\n  open: (extension, options) => {\n    EventDispatcher.dispatch('dialog-extension-open', {\n      extension: extension,\n      options: options\n    });\n  },\n  close: () => {\n    EventDispatcher.dispatch('dialog-close-active', {});\n  },\n  addUserButton: (options, extension) => {\n    EventDispatcher.dispatch('dialog-button-add', {\n      button: {\n        text: options.text,\n        identifier: options.identifier,\n        data: {\n          userButton: true\n        }\n      },\n      extension: extension\n    });\n  }\n};\n","import EventDispatcher from 'dispatchers/event_dispatcher';\nimport SimpleXDM from 'simple-xdm/dist/host';\n\nmodule.exports = {\n  registerKeyEvent: function(data){\n    SimpleXDM.registerKeyListener(data.extension_id, data.key, data.modifiers, data.callback);\n    EventDispatcher.dispatch('dom-event-register', data);\n  },\n  unregisterKeyEvent: function(data){\n    SimpleXDM.unregisterKeyListener(data.extension_id, data.key, data.modifiers, data.callback);\n    EventDispatcher.dispatch('dom-event-unregister', data);\n  },\n  registerWindowKeyEvent: function(data){\n    window.addEventListener('keydown', (event) => {\n      if (event.keyCode === data.keyCode) {\n        data.callback();\n      }\n    });\n  }\n};","import EventDispatcher from 'dispatchers/event_dispatcher';\nimport util from '../util';\nimport IframeComponent from 'components/iframe';\n\nEventDispatcher.register('iframe-resize', function(data){\n  IframeComponent.resize(data.width, data.height, data.$el);\n});\n\nEventDispatcher.register('iframe-size-to-parent', function(data){\n  var height = AJS.$(document).height() - AJS.$('#header > nav').outerHeight() - AJS.$('#footer').outerHeight() - 20;\n  var $el = util.getIframeByExtensionId(data.context.extension_id);\n  EventDispatcher.dispatch('iframe-resize', {width: '100%', height: height + 'px', $el});\n});\n\nAJS.$(window).on('resize', function (e) {\n  EventDispatcher.dispatch('host-window-resize', e);\n});\n\nmodule.exports = {\n  iframeResize: function(width, height, context){\n    var $el;\n    if(context.extension_id){\n      $el = util.getIframeByExtensionId(context.extension_id);\n    } else {\n      $el = context;\n    }\n\n    EventDispatcher.dispatch('iframe-resize', {width, height, $el, extension: context.extension});\n  },\n  sizeToParent: function(context){\n    EventDispatcher.dispatch('iframe-size-to-parent', {context});\n  }\n}","import EventDispatcher from 'dispatchers/event_dispatcher';\nimport SimpleXDM from 'simple-xdm/dist/host';\n\nmodule.exports = {\n  broadcast: function(type, targetSpec, event){\n    SimpleXDM.dispatch(type, targetSpec, event);\n    EventDispatcher.dispatch('event-dispatch', {\n      type: type,\n      targetSpec: targetSpec,\n      event: event\n    });\n  }\n};","import EventDispatcher from 'dispatchers/event_dispatcher';\n\nmodule.exports = {\n  open: function(flagId){\n    EventDispatcher.dispatch('flag-open', {id: flagId});\n  },\n  //called to close a flag\n  close: function(flagId){\n    EventDispatcher.dispatch('flag-close', {id: flagId});\n  },\n  //called by AUI when closed\n  closed: function(flagId){\n    EventDispatcher.dispatch('flag-closed', {id: flagId});\n  }\n};\n","import EventDispatcher from 'dispatchers/event_dispatcher';\nimport simpleXDM from 'simple-xdm/dist/host';\n\nmodule.exports = {\n  notifyIframeCreated: function($el, extension) {\n    EventDispatcher.dispatch('iframe-create', {$el, extension});\n  },\n\n  notifyBridgeEstablished: function($el, extension){\n    EventDispatcher.dispatch('iframe-bridge-established', {$el, extension});\n  },\n\n  notifyIframeDestroyed: function(extension_id){\n    var extension = simpleXDM.getExtensions({\n      extension_id: extension_id\n    });\n    if(extension.length === 1){\n      extension = extension[0];\n    }\n    EventDispatcher.dispatch('iframe-destroyed', {extension});\n    simpleXDM.unregisterExtension({extension_id: extension_id});\n  },\n\n  notifyUnloaded: function($el, extension){\n    EventDispatcher.dispatch('iframe-unload', {$el, extension});\n  }\n};","import EventDispatcher from 'dispatchers/event_dispatcher';\n\nmodule.exports = {\n  hide: function($el){\n    EventDispatcher.dispatch('inline-dialog-hide', {\n      $el: $el\n    });\n  },\n  refresh: function($el){\n    EventDispatcher.dispatch('inline-dialog-refresh', {$el});\n  },\n  hideTriggered: function(extension_id, $el){\n    EventDispatcher.dispatch('inline-dialog-hidden', {extension_id, $el});\n  },\n  close: function(){\n    EventDispatcher.dispatch('inline-dialog-close', {\n    });\n  },\n  created: function(data) {\n    EventDispatcher.dispatch('inline-dialog-opened', {\n      $el: data.$el,\n      trigger: data.trigger,\n      extension: data.extension\n    });\n  }\n};\n","import EventDispatcher from 'dispatchers/event_dispatcher';\nimport _ from '../underscore';\n\nmodule.exports = {\n  registerContentResolver: function(data) {\n    EventDispatcher.dispatch('content-resolver-register-by-extension', data);\n  },\n  requestRefreshUrl: function(data){\n    if(!data.resolver) {\n      throw Error('ACJS: No content resolver supplied');\n    }\n    var promise = data.resolver.call(null, _.extend({classifier: 'json'}, data.extension));\n    promise.done(function (promiseData) {\n      var newExtensionConfiguration = {};\n      if(_.isObject(promiseData)) {\n        newExtensionConfiguration = promiseData;\n      } else if(_.isString(promiseData)) {\n        try{\n          newExtensionConfiguration = JSON.parse(promiseData);\n        } catch(e){\n          console.error('ACJS: invalid response from content resolver');\n        }\n      }\n      data.extension.url = newExtensionConfiguration.url;\n      _.extend(data.extension.options, newExtensionConfiguration.options);\n      EventDispatcher.dispatch('jwt-url-refreshed', {\n        extension: data.extension,\n        $container: data.$container,\n        url: data.extension.url\n      });\n    });\n    EventDispatcher.dispatch('jwt-url-refresh-request', {data});\n  }\n\n};\n","import EventDispatcher from 'dispatchers/event_dispatcher';\n\nexport default {\n  timeout($el, extension) {\n    EventDispatcher.dispatch('iframe-bridge-timeout', {$el, extension});\n  },\n  cancelled($el, extension) {\n    EventDispatcher.dispatch('iframe-bridge-cancelled', {$el, extension});\n  }\n};","import EventDispatcher from 'dispatchers/event_dispatcher';\n\nmodule.exports = {\n  defineCustomModule: function(name, methods){\n    var data = {};\n    if(!methods){\n      data.methods = name;\n    } else {\n      data.methods = methods;\n      data.name = name;\n    }\n    EventDispatcher.dispatch('module-define-custom', data);\n  }\n}","import EventDispatcher from 'dispatchers/event_dispatcher';\nimport WebItemComponent from 'components/webitem';\nimport WebItemUtils from 'utils/webitem';\n\nexport default {\n  addWebItem: (potentialWebItem) => {\n    let webitem;\n    let existing = WebItemComponent.getWebItemsBySelector(potentialWebItem.selector);\n\n    if(existing) {\n      return false;\n    } else {\n      webitem = WebItemComponent.setWebItem(potentialWebItem);\n      EventDispatcher.dispatch('webitem-added', {webitem});\n    }\n\n  },\n\n  webitemInvoked: (webitem, event, extension) => {\n    EventDispatcher.dispatch('webitem-invoked:' + webitem.name, {webitem, event, extension});\n  }\n\n};","import EventDispatcher from 'dispatchers/event_dispatcher';\nimport $ from '../dollar';\nimport _ from '../underscore';\nimport ButtonActions from 'actions/button_actions';\nimport ButtonUtils from 'utils/button';\n\nconst BUTTON_TYPES = ['primary', 'link', 'secondary'];\nvar buttonId = 0;\n\nclass Button {\n  constructor() {\n    this.AP_BUTTON_CLASS = 'ap-aui-button';\n  }\n\n  setType($button, type){\n    if(type && _.contains(BUTTON_TYPES, type)) {\n      $button.addClass('aui-button-' + type);\n    }\n    return $button;\n  }\n\n  setDisabled($button, disabled) {\n    if(typeof disabled !== 'undefined' && !$button.data('immutable')) {\n      $button.attr('aria-disabled', disabled);\n    }\n    return $button;\n  }\n\n  setHidden($button, hidden) {\n    if(typeof hidden !== 'undefined' && !$button.data('immutable')) {\n      $button.toggle(!hidden);\n    }\n    return $button;\n  }\n\n  _setId($button, id) {\n    if(!id) {\n      id = 'ap-button-' + buttonId;\n      buttonId++;\n    }\n    $button.attr('id', id);\n    return $button;\n  }\n\n  _additionalClasses($button, classes) {\n    if(classes) {\n      if(typeof classes !== 'string') {\n        classes = classes.join(' ');\n      }\n      $button.addClass(classes);\n    }\n    return $button;\n  }\n\n  getName($button) {\n    return $($button).data('name');\n  }\n\n  getText($button) {\n    return $($button).text();\n  }\n\n  getIdentifier($button) {\n    return $($button).data('identifier');\n  }\n\n  isVisible($button) {\n    return $($button).is(':visible');\n  }\n\n  isEnabled($button) {\n    return !($($button).attr('aria-disabled') === 'true');\n  }\n\n  render (options) {\n    var $button = $('<button />');\n    options = options || {};\n    $button.addClass('aui-button ' + this.AP_BUTTON_CLASS);\n    $button.text(options.text);\n    $button.data(options.data);\n    $button.data({\n      name: options.name || options.identifier,\n      identifier: options.identifier || ButtonUtils.randomIdentifier(),\n      immutable: options.immutable || false\n    });\n    this._additionalClasses($button, options.additionalClasses);\n    this.setType($button, options.type);\n    this.setDisabled($button, options.disabled || false);\n    this._setId($button, options.id);\n    return $button;\n  }\n}\n\nvar ButtonComponent = new Button();\n// register 1 button listener globally on dom load\n$(function(){\n  $('body').on('click', '.' + ButtonComponent.AP_BUTTON_CLASS, function(e){\n    var $button = $(e.target).closest('.' + ButtonComponent.AP_BUTTON_CLASS);\n    if ($button.attr('aria-disabled') !== 'true') {\n      ButtonActions.clicked($button);\n    }\n  });\n});\n\nEventDispatcher.register('button-toggle', (data) => {\n  ButtonComponent.setDisabled(data.$el, data.disabled);\n});\n\nEventDispatcher.register('button-toggle-visibility', (data) => {\n  ButtonComponent.setHidden(data.$el, data.hidden);\n});\n\nexport default ButtonComponent;\n","import EventDispatcher from 'dispatchers/event_dispatcher';\nimport DomEventActions from 'actions/dom_event_actions';\nimport DialogActions from 'actions/dialog_actions';\nimport dialogUtils from 'utils/dialog';\nimport IframeComponent from 'components/iframe';\nimport Button from 'components/button';\nimport ButtonActions from 'actions/button_actions';\n\nimport $ from '../dollar';\nimport _ from '../underscore';\n\nconst DLGID_PREFIX = 'ap-dialog-';\nconst DIALOG_CLASS = 'ap-aui-dialog2';\nconst DLGID_REGEXP = new RegExp(`^${DLGID_PREFIX}[0-9A-Za-z]+$`);\nconst DIALOG_SIZES = ['small', 'medium', 'large', 'xlarge', 'fullscreen'];\nconst DIALOG_BUTTON_CLASS = 'ap-aui-dialog-button';\nconst DIALOG_BUTTON_CUSTOM_CLASS = 'ap-dialog-custom-button';\nconst DIALOG_FOOTER_CLASS = 'aui-dialog2-footer';\nconst DIALOG_FOOTER_ACTIONS_CLASS = 'aui-dialog2-footer-actions';\nconst DIALOG_HEADER_ACTIONS_CLASS = 'header-control-panel';\n\nfunction getActiveDialog() {\n  const $el = AJS.LayerManager.global.getTopLayer();\n  if ($el && DLGID_REGEXP.test($el.attr('id'))) {\n    const dialog = AJS.dialog2($el);\n    dialog._id = dialog.$el.attr('id').replace(DLGID_PREFIX, '');\n    return dialog;\n  }\n}\n\nfunction getActionBar($dialog) {\n  var $actionBar = $dialog.find('.' + DIALOG_HEADER_ACTIONS_CLASS);\n  if(!$actionBar.length) {\n    $actionBar = $dialog.find('.' + DIALOG_FOOTER_ACTIONS_CLASS);\n  }\n  return $actionBar;\n}\n\nfunction getButtonByIdentifier(id, $dialog) {\n  const $actionBar = getActionBar($dialog);\n  return $actionBar.find('.aui-button').filter(function () {\n    return Button.getIdentifier(this) === id;\n  });\n}\n\nclass Dialog {\n  constructor () {\n  }\n\n  _renderHeaderCloseBtn() {\n    const $close = $('<a />').addClass('aui-dialog2-header-close');\n    const $closeBtn = $('<span />').addClass('aui-icon aui-icon-small aui-iconfont-close-dialog').text('Close');\n    $close.append($closeBtn);\n    return $close;\n  }\n  //v3 ask DT about this DOM.\n  _renderFullScreenHeader($header, options) {\n    var $titleContainer = $('<div />').addClass('header-title-container aui-item expanded');\n    var $title = $('<div />').append($('<span />').addClass('header-title').text(options.header || ''));\n    $titleContainer.append($title);\n    $header.append($titleContainer).append(this._renderHeaderActions(options.actions, options.extension));\n    return $header;\n  }\n\n  _renderHeader(options){\n    const $header = $('<header />').addClass('aui-dialog2-header');\n    if(options.size === 'fullscreen') {\n      return this._renderFullScreenHeader($header, options);\n    }\n    if(options.header) {\n      const $title = $('<h2 />').addClass('aui-dialog2-header-main').text(options.header);\n      $header.append($title);\n    }\n    $header.append(this._renderHeaderCloseBtn());\n    return $header;\n  }\n\n  _renderHeaderActions(actions, extension) {\n    const $headerControls = $('<div />').addClass('aui-item ' + DIALOG_HEADER_ACTIONS_CLASS);\n    actions[0].additionalClasses = ['aui-icon', 'aui-icon-small', 'aui-iconfont-success'];\n    actions[1].additionalClasses = ['aui-icon', 'aui-icon-small', 'aui-iconfont-close-dialog'];\n    const $actions = this._renderActionButtons(actions, extension);\n    $actions.forEach(($action) => {\n      $headerControls.append($action);\n    });\n    return $headerControls;\n  }\n\n  _renderContent($content){\n    const $el = $('<div />').addClass('aui-dialog2-content');\n    if($content) {\n      $el.append($content);\n    }\n    return $el;\n  }\n\n  _renderFooter(options) {\n    const $footer = $('<footer />').addClass(DIALOG_FOOTER_CLASS);\n    if(options.size !== 'fullscreen') {\n      const $actions = this._renderFooterActions(options.actions, options.extension);\n      $footer.append($actions);\n    }\n    if(options.hint) {\n      const $hint = $('<div />').addClass('aui-dialog2-footer-hint').text(options.hint);\n      $footer.append($hint);\n    }\n    return $footer;\n  }\n\n  _renderActionButtons(actions, extension) {\n    var actionButtons = [];\n    [...actions].forEach(action => {\n      actionButtons.push(\n        this._renderDialogButton({\n          text: action.text,\n          name: action.name,\n          type: action.type,\n          additionalClasses: action.additionalClasses,\n          custom: action.custom || false,\n          identifier: action.identifier,\n          immutable: action.immutable\n        }, extension)\n      );\n    });\n    return actionButtons;\n  }\n\n  _renderFooterActions(actions, extension) {\n    const $actions = $('<div />').addClass(DIALOG_FOOTER_ACTIONS_CLASS);\n    const $buttons = this._renderActionButtons(actions, extension);\n    $buttons.forEach(($button) => {\n      $actions.append($button);\n    });\n    return $actions;\n  }\n\n  _renderDialogButton(options, extension) {\n    options.additionalClasses = options.additionalClasses || [];\n    options.additionalClasses.push(DIALOG_BUTTON_CLASS);\n    if(options.custom) {\n      options.additionalClasses.push(DIALOG_BUTTON_CUSTOM_CLASS);\n    }\n    const $button = Button.render(options);\n    $button.extension = extension;\n    return $button;\n  }\n\n  /**\n  {\n    id: 'some-dialog-id',\n    title: 'some header',\n    hint: 'some footer hint',\n    $content: $(<div />).text('my content'),\n    actions: []\n  }\n  **/\n  render(options){\n    var sanitizedOptions = dialogUtils.sanitizeOptions(options);\n    const $dialog = $('<section />').attr({\n      role: 'dialog',\n      id: DLGID_PREFIX + sanitizedOptions.id\n    });\n    $dialog.attr('data-aui-modal', 'true');\n    $dialog.data({\n      'aui-remove-on-hide': true,\n      'extension': sanitizedOptions.extension\n    });\n    $dialog.addClass('aui-layer aui-dialog2 ' + DIALOG_CLASS);\n\n    if (_.contains(DIALOG_SIZES, sanitizedOptions.size)) {\n      $dialog.addClass('aui-dialog2-' + sanitizedOptions.size);\n    }\n\n    if(sanitizedOptions.size === 'fullscreen') {\n      $dialog.addClass('ap-header-controls');\n      $dialog.addClass('aui-dialog2-maximum');\n    }\n\n    $dialog.append(this._renderContent(sanitizedOptions.$content));\n\n    if (sanitizedOptions.chrome) {\n      $dialog.prepend(this._renderHeader({\n        header: sanitizedOptions.header,\n        actions: sanitizedOptions.actions,\n        size: sanitizedOptions.size\n      }));\n\n      $dialog.append(this._renderFooter({\n        extension: sanitizedOptions.extension,\n        actions: sanitizedOptions.actions,\n        hint: sanitizedOptions.hint,\n        size: sanitizedOptions.size\n      }));\n    } else {\n      $dialog.addClass('aui-dialog2-chromeless');\n    }\n\n    const dialog = AJS.dialog2($dialog);\n    dialog._id = sanitizedOptions.id;\n    if(sanitizedOptions.size === 'fullscreen'){\n      sanitizedOptions.height = sanitizedOptions.width = '100%';\n    }\n    if (!sanitizedOptions.size || sanitizedOptions.size === 'fullscreen') {\n      AJS.layer($dialog).changeSize(sanitizedOptions.width, sanitizedOptions.height);\n    }\n    dialog.show();\n    dialog.$el.data('extension', sanitizedOptions.extension);\n    return $dialog;\n  }\n\n  setIframeDimensions($iframe){\n    IframeComponent.resize('100%', '100%', $iframe);\n  }\n\n  getActive(){\n    return getActiveDialog();\n  }\n\n  buttonIsEnabled(identifier) {\n    const dialog = getActiveDialog();\n    if (dialog) {\n      const $button = getButtonByIdentifier(identifier, dialog.$el);\n      return Button.isEnabled($button);\n    }\n  }\n\n  buttonIsVisible(identifier) {\n    const dialog = getActiveDialog();\n    if (dialog) {\n      const $button = getButtonByIdentifier(identifier, dialog.$el);\n      return Button.isVisible($button);\n    }\n  }\n\n  /**\n  * takes either a target spec or a filter function\n  * returns all matching dialogs\n  */\n  getByExtension(extension) {\n    var filterFunction;\n    if(typeof extension === 'function') {\n      filterFunction = extension;\n    } else {\n      var keys = Object.getOwnPropertyNames(extension);\n      filterFunction = function(dialog) {\n        var dialogData = $(dialog).data('extension');\n        return keys.every((key) => {\n          return dialogData[key] === extension[key];\n        });\n      };\n    }\n\n    return $('.' + DIALOG_CLASS).toArray().filter(filterFunction).map(($el) => {\n      return AJS.dialog2($el);\n    });\n  }\n\n  // add user defined button to an existing dialog\n  addButton(extension, options) {\n    options.custom = true;\n    var $button = this._renderDialogButton(options, extension);\n    var $dialog = this.getByExtension({\n      addon_key: extension.addon_key,\n      key: extension.key\n    })[0].$el;\n    var $actionBar = getActionBar($dialog);\n    $actionBar.append($button);\n    return $dialog;\n  }\n}\n\nconst DialogComponent = new Dialog();\n\nEventDispatcher.register('iframe-bridge-established', (data) => {\n  if(data.extension.options.isDialog && data.extension.options.closeOnEscape){\n    DomEventActions.registerKeyEvent({\n      extension_id: data.extension.id,\n      key: 27,\n      callback: () => {\n        DialogActions.close({\n          dialog: getActiveDialog(),\n          extension: data.extension\n        });\n      }\n    });\n\n    EventDispatcher.registerOnce('dialog-close', (d) => {\n      DomEventActions.unregisterKeyEvent({\n        extension_id: data.extension.id,\n        key: 27\n      });\n    });\n  }\n});\n\nEventDispatcher.register('dialog-close-active', (data) => {\n  var activeDialog = getActiveDialog();\n  if(activeDialog){\n    DialogActions.close({\n      customData: data.customData,\n      dialog: activeDialog,\n      extension: data.extension\n    });\n  }\n});\n\nEventDispatcher.register('dialog-close', (data) => {\n  data.dialog.hide();\n});\n\nEventDispatcher.register('dialog-button-toggle', (data) => {\n  const dialog = getActiveDialog();\n  if (dialog) {\n    const $button = getButtonByIdentifier(data.identifier, dialog.$el);\n    ButtonActions.toggle($button, !data.enabled);\n  }\n});\n\nEventDispatcher.register('dialog-button-toggle-visibility', (data) => {\n  const dialog = getActiveDialog();\n  if (dialog) {\n    const $button = getButtonByIdentifier(data.identifier, dialog.$el);\n    ButtonActions.toggleVisibility($button, data.hidden);\n  }\n});\n\nEventDispatcher.register('button-clicked', (data) => {\n  var $button = data.$el;\n  if($button.hasClass(DIALOG_BUTTON_CLASS)) {\n    var $dialog = $button.parents('.' + DIALOG_CLASS);\n    var $iframe = $dialog.find('iframe');\n    if ($iframe.length && $iframe[0].bridgeEstablished) {\n      DialogActions.clickButton(Button.getIdentifier($button), $button, $dialog.data('extension'));\n    } else {\n      DialogActions.close({\n        dialog: getActiveDialog(),\n        extension: $button.extension\n      });\n    }\n  }\n});\n\nEventDispatcher.register('iframe-create', (data) => {\n  if(data.extension.options && data.extension.options.isDialog){\n    DialogComponent.setIframeDimensions(data.extension.$el);\n  }\n});\n\nEventDispatcher.register('dialog-button-add', (data) => {\n  DialogComponent.addButton(data.extension, data.button);\n});\n\nDomEventActions.registerWindowKeyEvent({\n  keyCode: 27,\n  callback: () => {\n    DialogActions.closeActive({\n      customData: {},\n      extension: null\n    });\n  }\n});\n\nexport default DialogComponent;\n","import DialogComponent from 'components/dialog';\nimport IframeContainerComponent from 'components/iframe_container';\nimport EventDispatcher from 'dispatchers/event_dispatcher';\n\nclass DialogExtension {\n\n  render(extension, dialogOptions){\n    extension.options = extension.options || {};\n    dialogOptions = dialogOptions || {};\n    extension.options.isDialog = true;\n    var $iframeContainer = IframeContainerComponent.createExtension(extension);\n    var $dialog = DialogComponent.render({\n      extension:  extension,\n      $content:   $iframeContainer,\n      chrome:     dialogOptions.chrome,\n      width:      dialogOptions.width,\n      height:     dialogOptions.height,\n      size:       dialogOptions.size,\n      header:     dialogOptions.header,\n      hint:       dialogOptions.hint,\n      submitText: dialogOptions.submitText,\n      cancelText: dialogOptions.cancelText,\n      buttons:    dialogOptions.buttons\n    });\n    return $dialog;\n  }\n\n  getActiveDialog(){\n    return DialogComponent.getActive();\n  }\n\n  buttonIsEnabled(identifier) {\n    return DialogComponent.buttonIsEnabled(identifier);\n  }\n\n  buttonIsVisible(identifier) {\n    return DialogComponent.buttonIsVisible(identifier);\n  }\n\n  getByExtension(extension) {\n    if(typeof extension === 'string'){\n      extension = {\n        id: extension\n      };\n    }\n    return DialogComponent.getByExtension(extension);\n  }\n\n}\n\nvar DialogExtensionComponent = new DialogExtension();\nEventDispatcher.register('dialog-extension-open', function(data){\n  DialogExtensionComponent.render(data.extension, data.options);\n});\n\nexport default DialogExtensionComponent;\n","import WebItemActions from 'actions/webitem_actions';\nimport EventDispatcher from 'dispatchers/event_dispatcher';\nimport WebItemUtils from 'utils/webitem';\nimport dialogUtils from 'utils/dialog';\nimport DialogExtensionActions from 'actions/dialog_extension_actions';\nimport _ from '../underscore';\n\nconst ITEM_NAME = 'dialog';\nconst SELECTOR = '.ap-dialog';\nconst TRIGGERS = ['click'];\nconst WEBITEM_UID_KEY = 'dialog-target-uid';\nconst DEFAULT_WEBITEM_OPTIONS = {\n  chrome: true\n};\n\nclass DialogWebItem {\n  constructor(){\n    this._dialogWebItem = {\n      name: ITEM_NAME,\n      selector: SELECTOR,\n      triggers: TRIGGERS\n    };\n  }\n\n  getWebItem(){\n    return this._dialogWebItem;\n  }\n\n  _dialogOptions(options){\n    return _.extend({}, DEFAULT_WEBITEM_OPTIONS, options || {});\n  }\n\n  triggered(data) {\n    var $target = $(data.event.currentTarget);\n    var webitemId = $target.data(WEBITEM_UID_KEY);\n    var dialogOptions = this._dialogOptions(data.extension.options);\n    dialogOptions.id = webitemId;\n    DialogExtensionActions.open(data.extension, dialogOptions);\n  }\n\n  createIfNotExists(data) {\n    var $target = $(data.event.currentTarget);\n    var uid = $target.data(WEBITEM_UID_KEY);\n\n    if(!uid) {\n      uid = WebItemUtils.uniqueId();\n      $target.data(WEBITEM_UID_KEY, uid);\n    }\n  }\n\n}\n\nlet dialogInstance = new DialogWebItem();\nlet webitem = dialogInstance.getWebItem();\nEventDispatcher.register('webitem-invoked:' + webitem.name, function(data){\n  dialogInstance.triggered(data);\n});\nEventDispatcher.register('before:webitem-invoked:' + webitem.name, dialogInstance.createIfNotExists);\n\nWebItemActions.addWebItem(webitem);\nexport default dialogInstance;","import $ from '../dollar';\nimport FlagActions from 'actions/flag_actions';\nimport EventDispatcher from 'dispatchers/event_dispatcher';\nconst FLAGID_PREFIX = 'ap-flag-';\nvar AUI_FLAG = undefined;\n\nwindow.require(['aui/flag'], function(f){\n  AUI_FLAG = f;\n});\n\nclass Flag {\n\n  _toHtmlString(str) {\n    if($.type(str) === 'string'){\n      return str;\n    } else if($.type(str) === 'object' && (str instanceof $) ){\n      return str.html();\n    }\n  }\n\n  render (options) {\n    var _id = FLAGID_PREFIX + options.id;\n    var auiFlag = AUI_FLAG({\n      type: options.type,\n      title: options.title,\n      body: this._toHtmlString(options.body),\n      close: options.close\n    });\n    auiFlag.setAttribute('id', _id);\n    var $auiFlag = $(auiFlag);\n    $auiFlag.close = auiFlag.close;\n\n    return $auiFlag;\n  }\n\n  close (id) {\n    var f = document.getElementById(id);\n    f.close();\n  }\n\n}\n\nvar FlagComponent = new Flag();\n\n$(document).on('aui-flag-close', (e) => {\n  const _id = e.target.id;\n  FlagActions.closed(_id);\n});\n\nEventDispatcher.register('flag-close', (data) => {\n  FlagComponent.close(data.id);\n});\n\nexport default FlagComponent;","import EventDispatcher from 'dispatchers/event_dispatcher';\nimport IframeActions from 'actions/iframe_actions';\nimport $ from '../dollar';\nimport util from '../util';\nimport simpleXDM from 'simple-xdm/dist/host';\nimport urlUtil from 'utils/url';\nimport JwtActions from 'actions/jwt_actions';\nimport iframeUtils from 'utils/iframe';\n\nconst CONTAINER_CLASSES = ['ap-container'];\n\nclass Iframe {\n\n  constructor () {\n    this._contentResolver = false;\n  }\n\n  setContentResolver(callback) {\n    this._contentResolver = callback;\n  }\n\n  resize(width, height, $el){\n    width = util.stringToDimension(width);\n    height = util.stringToDimension(height);\n    $el.css({\n      width: width,\n      height: height\n    });\n    $el.trigger('resized', {width: width, height: height});\n  }\n\n  simpleXdmExtension(extension, $container) {\n    if(!extension.url || (urlUtil.hasJwt(extension.url) && urlUtil.isJwtExpired(extension.url))){\n      if(this._contentResolver){\n        JwtActions.requestRefreshUrl({\n          extension: extension,\n          resolver: this._contentResolver,\n          $container: $container\n        });\n      } else {\n        console.error('JWT is expired and no content resolver was specified');\n      }\n    } else {\n      this._appendExtension($container, this._simpleXdmCreate(extension));\n    }\n  }\n\n  _simpleXdmCreate(extension){\n    var iframeAttributes = simpleXDM.create(extension, () => {\n      if(!extension.options){\n        extension.options = {};\n      }\n      IframeActions.notifyBridgeEstablished(extension.$el, extension);\n    }, () => {\n      IframeActions.notifyUnloaded(extension.$el, extension);\n    });\n    extension.id = iframeAttributes.id;\n    $.extend(iframeAttributes, iframeUtils.optionsToAttributes(extension.options));\n    extension.$el = this.render(iframeAttributes);\n    return extension;\n  }\n\n  _appendExtension($container, extension){\n    var existingFrame = $container.find('iframe');\n    if(existingFrame.length > 0) {\n      existingFrame.destroy();\n    }\n    $container.prepend(extension.$el);\n    IframeActions.notifyIframeCreated(extension.$el, extension);\n  }\n\n  resolverResponse(data) {\n    var simpleExtension = this._simpleXdmCreate(data.extension);\n    this._appendExtension(data.$container, simpleExtension);\n  }\n\n  render(attributes){\n    return $('<iframe />').attr(attributes).addClass('ap-iframe');\n  }\n}\n\nvar IframeComponent = new Iframe();\n\nEventDispatcher.register('iframe-resize', function(data){\n  IframeComponent.resize(data.width, data.height, data.$el);\n});\n\nEventDispatcher.register('content-resolver-register-by-extension', function(data){\n  IframeComponent.setContentResolver(data.callback);\n});\n\nEventDispatcher.register('jwt-url-refreshed', function(data) {\n  IframeComponent.resolverResponse(data);\n});\n\nEventDispatcher.register('after:iframe-bridge-established', function(data) {\n  data.$el[0].bridgeEstablished = true;\n});\n\nexport default IframeComponent;","import $ from '../dollar';\nimport IframeComponent from 'components/iframe';\nimport LoadingIndicatorComponent from 'components/loading_indicator';\nimport EventDispatcher from 'dispatchers/event_dispatcher';\n\nconst CONTAINER_CLASSES = ['ap-iframe-container'];\n\nclass IframeContainer {\n\n  createExtension(extension, options) {\n    var $container = this._renderContainer();\n    if(!options || options.loadingIndicator !== false){\n      $container.append(this._renderLoadingIndicator());\n    }\n    IframeComponent.simpleXdmExtension(extension, $container);\n    return $container;\n  }\n\n  _renderContainer(attributes){\n    var container = $('<div />').attr(attributes || {});\n    container.addClass(CONTAINER_CLASSES.join(' '));\n    return container;\n  }\n\n  _renderLoadingIndicator(){\n    return LoadingIndicatorComponent.render();\n  }\n\n}\n\nvar IframeContainerComponent = new IframeContainer();\n\nEventDispatcher.register('iframe-create', (data) => {\n  var id = 'embedded-' + data.extension.id;\n  data.extension.$el.parents('.ap-iframe-container').attr('id', id);\n});\n\nexport default IframeContainerComponent;","import EventDispatcher from 'dispatchers/event_dispatcher';\nimport InlineDialogActions from 'actions/inline_dialog_actions';\nimport $ from '../dollar';\nimport util from '../util';\n\nclass InlineDialog {\n\n  resize(data){\n    var width = util.stringToDimension(data.width);\n    var height = util.stringToDimension(data.height);\n    var $content = data.$el.find('.contents');\n    if($content.length === 1){\n      $content.css({\n        width: width,\n        height: height\n      });\n      InlineDialogActions.refresh(data.$el);\n    }\n  }\n\n  refresh($el){\n    $el[0].popup.reset();\n  }\n\n  _getInlineDialog($el){\n    return AJS.InlineDialog($el);\n  }\n  _renderContainer(){\n    return $('<div />').addClass('aui-inline-dialog-contents');\n  }\n  _displayInlineDialog(data){\n    InlineDialogActions.created({\n      $el: data.$el,\n      trigger: data.trigger,\n      extension: data.extension\n    });\n  }\n  hideInlineDialog($el){\n    $el.hide();\n  }\n\n  closeInlineDialog(){\n    $('.aui-inline-dialog').filter(function(){\n      return $(this).find('.ap-iframe-container').length > 0;\n    }).hide();\n  }\n\n  render(data){\n    var $inlineDialog = $(document.getElementById('inline-dialog-' + data.id));\n\n    if ($inlineDialog.length !== 0) {\n      $inlineDialog.remove();\n    }\n\n    var $el = AJS.InlineDialog(\n      data.bindTo,\n      //assign unique id to inline Dialog\n      data.id,\n      ($placeholder, trigger, showInlineDialog) => {\n        $placeholder.append(data.$content);\n        this._displayInlineDialog({\n          extension: data.extension,\n          $el: $placeholder,\n          trigger: trigger\n        });\n        showInlineDialog();\n      },\n      data.dialogOptions\n    );\n    return $el;\n  }\n\n}\n\nvar InlineDialogComponent = new InlineDialog();\n\nEventDispatcher.register('iframe-resize', function(data) {\n  var container = data.$el.parents('.aui-inline-dialog');\n  if(container.length === 1) {\n    InlineDialogComponent.resize({\n      width: data.width,\n      height: data.height,\n      $el: container\n    });\n  }\n});\n\nEventDispatcher.register('inline-dialog-refresh', function(data){\n  InlineDialogComponent.refresh(data.$el);\n});\n\nEventDispatcher.register('inline-dialog-hide', function(data) {\n  InlineDialogComponent.hideInlineDialog(data.$el);\n});\n\nEventDispatcher.register('inline-dialog-close', function(data) {\n  InlineDialogComponent.closeInlineDialog();\n});\n\n\nexport default InlineDialogComponent;","import WebItemActions from 'actions/webitem_actions';\nimport EventDispatcher from 'dispatchers/event_dispatcher';\nimport InlineDialogComponent from 'components/inline_dialog';\nimport WebitemComponent from 'components/webitem';\nimport WebItemUtils from 'utils/webitem';\nimport IframeContainer from 'components/iframe_container';\nimport $ from '../dollar';\nimport create from '../create';\n\nconst ITEM_NAME = 'inline-dialog';\nconst SELECTOR = '.ap-inline-dialog';\nconst TRIGGERS = ['mouseover', 'click'];\nconst WEBITEM_UID_KEY = 'inline-dialog-target-uid';\n\nclass InlineDialogWebItem {\n  constructor(){\n    this._inlineDialogWebItemSpec = {\n      name: ITEM_NAME,\n      selector: SELECTOR,\n      triggers: TRIGGERS\n    };\n    this._inlineDialogWebItems = {};\n  }\n\n  getWebItem(){\n    return this._inlineDialogWebItemSpec;\n  }\n\n  _createInlineDialog(data){\n    var $iframeContainer = IframeContainer.createExtension(data.extension);\n    var $inlineDialog = InlineDialogComponent.render({\n      extension: data.extension,\n      id: data.id,\n      bindTo: data.$target,\n      $content: $iframeContainer,\n      dialogOptions: {} // fill this with dialog options.\n    });\n\n    return $inlineDialog;\n  }\n\n  triggered(data) {\n    var $target = $(data.event.currentTarget);\n    var webitemId = $target.data(WEBITEM_UID_KEY);\n\n    var $inlineDialog = this._createInlineDialog({\n      id: webitemId,\n      extension: data.extension,\n      $target: $target,\n      options: data.options || {}\n    });\n\n    $inlineDialog.show();\n  }\n\n  opened(data){\n    var contentRequest = WebitemComponent.requestContent(data.extension);\n    if(!contentRequest){\n      console.warn('no content resolver found');\n      return false;\n    }\n    contentRequest.then(function(content){\n      content.options = {\n        autoresize: true,\n        widthinpx: true\n      };\n      var addon = create(content);\n      data.$el.empty().append(addon);\n    });\n  }\n\n  createIfNotExists(data) {\n    var $target = $(data.event.currentTarget);\n    var uid = $target.data(WEBITEM_UID_KEY);\n\n    if(!uid) {\n      uid = WebItemUtils.uniqueId();\n      $target.data(WEBITEM_UID_KEY, uid);\n    }\n  }\n\n}\n\nlet inlineDialogInstance = new InlineDialogWebItem();\nlet webitem = inlineDialogInstance.getWebItem();\nEventDispatcher.register('before:webitem-invoked:' + webitem.name, function(data){\n  inlineDialogInstance.createIfNotExists(data);\n});\nEventDispatcher.register('webitem-invoked:' + webitem.name, function(data){\n  inlineDialogInstance.triggered(data);\n});\nEventDispatcher.register('inline-dialog-opened', function(data){\n  inlineDialogInstance.opened(data);\n});\nWebItemActions.addWebItem(webitem);\n\nexport default inlineDialogInstance;","import EventDispatcher from 'dispatchers/event_dispatcher';\nimport LoadingIndicatorActions from 'actions/loading_indicator_actions';\nimport $ from '../dollar';\nimport util from '../util';\n\nconst LOADING_INDICATOR_CLASS = 'ap-status-indicator';\n\nconst LOADING_STATUSES = {\n  loading: '<div class=\"ap-loading\"><div class=\"small-spinner\"></div>Loading add-on...</div>',\n  'load-timeout': '<div class=\"ap-load-timeout\"><div class=\"small-spinner\"></div>Add-on is not responding. Wait or <a href=\"#\" class=\"ap-btn-cancel\">cancel</a>?</div>',\n  'load-error': 'Add-on failed to load.'\n};\n\nconst LOADING_TIMEOUT = 12000;\n\nclass LoadingIndicator {\n  constructor () {\n    this._stateRegistry = {};\n  }\n\n  _loadingContainer($iframeContainer){\n    return $iframeContainer.find('.' + LOADING_INDICATOR_CLASS);\n  }\n\n  render() {\n    var $container = $('<div />').addClass(LOADING_INDICATOR_CLASS);\n    $container.append(LOADING_STATUSES.loading);\n    var spinner = $container.find('.small-spinner');\n    if (spinner.length && spinner.spin) {\n      spinner.spin({lines: 12, length: 3, width: 2, radius: 3, trail: 60, speed: 1.5, zIndex: 1});\n    }\n    return $container;\n  }\n\n  hide($iframeContainer, extensionId){\n    clearTimeout(this._stateRegistry[extensionId]);\n    delete this._stateRegistry[extensionId];\n    this._loadingContainer($iframeContainer).hide();\n  }\n\n  cancelled($iframeContainer, extensionId){\n    var status = LOADING_STATUSES['load-error'];\n    this._loadingContainer($iframeContainer).empty().text(status);\n  }\n\n  _setupTimeout($container, extension){\n    this._stateRegistry[extension.id] = setTimeout(() => {\n      LoadingIndicatorActions.timeout($container, extension);\n    }, LOADING_TIMEOUT);\n  }\n\n  timeout($iframeContainer, extensionId){\n    var status = $(LOADING_STATUSES['load-timeout']);\n    var container = this._loadingContainer($iframeContainer);\n    container.empty().append(status);\n    $('a.ap-btn-cancel', container).click(function () {\n      LoadingIndicatorActions.cancelled($iframeContainer, extensionId);\n    });\n    delete this._stateRegistry[extensionId];\n    return container;\n  }\n}\n\nvar LoadingComponent = new LoadingIndicator();\n\nEventDispatcher.register('iframe-create', (data) => {\n  LoadingComponent._setupTimeout(data.$el.parents('.ap-iframe-container'), data.extension);\n});\n\nEventDispatcher.register('iframe-bridge-established', (data) => {\n  LoadingComponent.hide(data.$el.parents('.ap-iframe-container'), data.extension.id);\n});\n\nEventDispatcher.register('iframe-bridge-timeout', (data) => {\n  LoadingComponent.timeout(data.$el, data.extension.id);\n});\n\nEventDispatcher.register('iframe-bridge-cancelled', (data) => {\n  LoadingComponent.cancelled(data.$el, data.extension.id);\n});\n\nexport default LoadingComponent;","import $ from '../dollar';\nimport _ from '../underscore';\nimport EventDispatcher from 'dispatchers/event_dispatcher';\nimport WebItemActions from 'actions/webitem_actions';\nimport WebItemUtils from 'utils/webitem';\n\nclass WebItem {\n\n  constructor() {\n    this._webitems = {};\n    this._contentResolver = function noop(){};\n  }\n\n  setContentResolver(resolver) {\n    this._contentResolver = resolver;\n  }\n\n  requestContent(extension) {\n    if(extension.addon_key && extension.key) {\n      return this._contentResolver.call(null, _.extend({classifier: 'json'}, extension));\n    }\n  }\n\n  getWebItemsBySelector(selector) {\n    return _.find(this._webitems, function(obj) {\n      if(obj.selector){\n        return obj.selector.trim() === selector.trim();\n      }\n      return false;\n    });\n  }\n\n  setWebItem(potentialWebItem) {\n    return this._webitems[potentialWebItem.name] = {\n      name: potentialWebItem.name,\n      selector: potentialWebItem.selector,\n      triggers: potentialWebItem.triggers\n    };\n\n  }\n\n  _removeTriggers(webitem) {\n    var onTriggers = WebItemUtils.sanitizeTriggers(webitem.triggers);\n    $(() => {\n      $('body').off(onTriggers, webitem.selector, this._webitems[webitem.name]._on);\n    });\n    delete this._webitems[webitem.name]._on;\n  }\n\n  _addTriggers (webitem) {\n    var onTriggers = WebItemUtils.sanitizeTriggers(webitem.triggers);\n    webitem._on = (event) => {\n      event.preventDefault();\n      var $target = $(event.target).closest(webitem.selector);\n      var extension = {\n        addon_key: WebItemUtils.getExtensionKey($target),\n        key: WebItemUtils.getKey($target),\n        options: WebItemUtils.getOptionsForWebItem($target)\n      };\n\n      WebItemActions.webitemInvoked(webitem, event, extension);\n    };\n    $(() => {\n      $('body').on(onTriggers, webitem.selector, webitem._on);\n    });\n  }\n\n}\n\nvar webItemInstance = new WebItem();\n\nEventDispatcher.register('webitem-added', (data) => {\n  webItemInstance._addTriggers(data.webitem);\n});\n\nEventDispatcher.register('content-resolver-register-by-extension', function(data){\n  webItemInstance.setContentResolver(data.callback);\n});\n\n\nexport default webItemInstance;","import $ from './dollar';\nimport EventDispatcher from 'dispatchers/event_dispatcher';\nimport IframeContainerComponent from 'components/iframe_container';\n\nfunction create(extension) {\n  var simpleXdmExtension = {\n    addon_key: extension.addon_key,\n    key: extension.key,\n    url: extension.url,\n    options: extension.options\n  };\n  return IframeContainerComponent.createExtension(simpleXdmExtension);\n\n  // return IframeComponent.simpleXdmExtension(simpleXdmExtension);\n\n}\n\nmodule.exports = create;","import EventDispatcher from 'dispatchers/event_dispatcher';\n\nconst EVENT_NAME_PREFIX = 'connect.addon.';\n\n/**\n * Timings beyond 20 seconds (connect's load timeout) will be clipped to an X.\n * @const\n * @type {int}\n */\nconst LOADING_TIME_THRESHOLD = 20000;\n\n/**\n * Trim extra zeros from the load time.\n * @const\n * @type {int}\n */\nconst LOADING_TIME_TRIMP_PRECISION = 100;\n\n\nclass AnalyticsDispatcher {\n\n  constructor() {\n    this._addons = {};\n  }\n\n  _track(name, data) {\n    var w = window;\n    var prefixedName = EVENT_NAME_PREFIX + name;\n    data.version = w._AP.version;\n\n    if(w.AJS.Analytics){\n      w.AJS.Analytics.triggerPrivacyPolicySafeEvent(prefixedName, data);\n    } else if(w.AJS.trigger) {\n      // BTF fallback\n      AJS.trigger('analyticsEvent', {\n        name: prefixedName,\n        data: data\n      });\n    } else {\n      return false;\n    }\n    return true;\n  }\n\n  _time() {\n    return window.performance && window.performance.now ? window.performance.now() : new Date().getTime();\n  }\n\n  trackLoadingStarted(extension) {\n    extension.startLoading = this._time();\n    this._addons[extension.id] = extension;\n  }\n\n  trackLoadingEnded(extension) {\n    var value = this._time() - this._addons[extension.id].startLoading;\n    this._track('iframe.performance.load', {\n      addonKey: extension.addon_key,\n      moduleKey: extension.key,\n      value: value > LOADING_TIME_THRESHOLD ? 'x' : Math.ceil((value) / LOADING_TIME_TRIMP_PRECISION)\n    });\n  }\n\n  trackLoadingTimeout(extension) {\n    this._track('iframe.performance.timeout', {\n      addonKey: extension.addon_key,\n      moduleKey: extension.key\n    });\n    //track an end event during a timeout so we always have complete start / end data.\n    this.trackLoadingEnded(extension);\n  }\n\n  trackLoadingCancel(extension) {\n    this._track('iframe.performance.cancel', {\n      addonKey: extension.addon_key,\n      moduleKey: extension.key\n    });\n  }\n\n  trackUseOfDeprecatedMethod(methodUsed, extension) {\n    this._track('jsapi.deprecated', {\n      addonKey: extension.addon_key,\n      moduleKey: extension.key,\n      methodUsed: methodUsed\n    });\n  }\n\n  dispatch(name, data) {\n    this._track(name, data);\n  }\n}\n\nvar analytics = new AnalyticsDispatcher();\nEventDispatcher.register('iframe-create', function(data) {\n  analytics.trackLoadingStarted(data.extension);\n});\nEventDispatcher.register('iframe-bridge-established', function(data) {\n  analytics.trackLoadingEnded(data.extension);\n});\nEventDispatcher.register('iframe-bridge-timeout', function (data) {\n  analytics.trackLoadingTimeout(data.extension);\n});\nEventDispatcher.register('iframe-bridge-cancelled', function(data) {\n  analytics.trackLoadingCancel(data.extension);\n});\nEventDispatcher.register('analytics-deprecated-method-used', function(data) {\n  analytics.trackUseOfDeprecatedMethod(data.methodUsed, data.extension);\n});\n\nmodule.exports = analytics;","/**\n* pub/sub for extension state (created, destroyed, initialized)\n* taken from hipchat webcore\n**/\nimport _ from '../underscore';\nimport {EventEmitter} from 'events';\n\nclass EventDispatcher extends EventEmitter {\n\n  constructor() {\n    super();\n    this.setMaxListeners(20);\n  }\n\n  dispatch(action, ...args) {\n    this.emit.apply(this, ['before:' + action].concat(args));\n    this.emit.apply(this, arguments);\n    this.emit.apply(this, ['after:' + action].concat(args));\n  }\n\n  registerOnce(action, callback) {\n    if (_.isString(action)) {\n      this.once(action, callback);\n    } else if (_.isObject(action)) {\n      _.keys(action).forEach((val, key) => {\n        this.once(key, val);\n      }, this);\n    }\n  }\n\n  register(action, callback) {\n    if (_.isString(action)) {\n      this.on(action, callback);\n    } else if (_.isObject(action)) {\n      _.keys(action).forEach((val, key) => {\n        this.on(key, val);\n      }, this);\n    }\n  }\n\n  unregister(action, callback) {\n    if (_.isString(action)) {\n      this.removeListener(action, callback);\n    } else if (_.isObject(action)) {\n      _.keys(action).forEach((val, key) => {\n        this.removeListener(key, val);\n      }, this);\n    }\n  }\n}\n\nmodule.exports = new EventDispatcher();","/**\n * The iframe-side code exposes a jquery-like implementation via _dollar.\n * This runs on the product side to provide AJS.$ under a _dollar module to provide a consistent interface\n * to code that runs on host and iframe.\n */\nexport default AJS.$;","import AnalyticsDispatcher from 'dispatchers/analytics_dispatcher';\nimport EventDispatcher from 'dispatchers/event_dispatcher';\nimport simpleXDM from 'simple-xdm/dist/host';\nimport jwtActions from 'actions/jwt_actions';\nimport events from './modules/events';\nimport create from './create';\nimport dialog from './modules/dialog';\nimport env from './modules/env';\nimport inlineDialog from './modules/inline-dialog';\nimport loadingIndicator from './components/loading_indicator';\nimport messages from './modules/messages';\nimport flag from './modules/flag';\nimport analytics from './modules/analytics';\nimport ModuleActions from 'actions/module_actions';\nimport DomEventActions from 'actions/dom_event_actions';\nimport _ from './underscore';\nimport EventActions from 'actions/event_actions';\nimport IframeActions from 'actions/iframe_actions';\nimport DialogExtensionActions from 'actions/dialog_extension_actions';\n\nimport InlineDialogWebItemComponent from 'components/inline_dialog_webitem';\nimport DialogWebItemComponent from 'components/dialog_webitem';\nimport DialogExtensionComponent from 'components/dialog_extension';\n\n/**\n * Private namespace for host-side code.\n * @type {*|{}}\n * @private\n * @deprecated use AMD instead of global namespaces. The only thing that should be on _AP is _AP.define and _AP.require.\n */\nif (!window._AP) {\n  window._AP = {};\n}\n\n/*\n * Add version\n */\nif (!window._AP.version) {\n  window._AP.version = '%%GULP_INJECT_VERSION%%';\n}\n\nsimpleXDM.defineModule('messages', messages);\nsimpleXDM.defineModule('flag', flag);\nsimpleXDM.defineModule('dialog', dialog);\nsimpleXDM.defineModule('inlineDialog', inlineDialog);\nsimpleXDM.defineModule('env', env);\nsimpleXDM.defineModule('events', events);\nsimpleXDM.defineModule('_analytics', analytics);\n\n// rpc.extend(propagator);\n\nEventDispatcher.register('module-define-custom', function(data){\n  simpleXDM.defineModule(data.name, data.methods);\n});\n\nsimpleXDM.registerRequestNotifier(function(data){\n  AnalyticsDispatcher.dispatch('bridge.invokemethod', {\n    module: data.module,\n    fn: data.fn,\n    addonKey: data.addon_key,\n    moduleKey: data.key\n  });\n});\n\nexport default {\n  dialog: {\n    create: (extension, dialogOptions) => {\n      DialogExtensionActions.open(extension, dialogOptions);\n    },\n    close: () => {\n      DialogExtensionActions.close();\n    }\n  },\n  onKeyEvent: (extension_id, key, modifiers, callback) => {\n    DomEventActions.registerKeyEvent({extension_id, key, modifiers, callback});\n  },\n  offKeyEvent: (extension_id, key, modifiers, callback) => {\n    DomEventActions.unregisterKeyEvent({extension_id, key, modifiers, callback});\n  },\n  onIframeEstablished: (callback) => {\n    EventDispatcher.register('after:iframe-bridge-established', function(data) {\n      callback.call(null, {\n        $el: data.$el,\n        extension: _.pick(data.extension, ['id', 'addon_key', 'key', 'options', 'url'])\n      });\n    });\n  },\n  onIframeUnload: (callback) => {\n    EventDispatcher.register('after:iframe-unload', function(data) {\n      callback.call(null, {\n        $el: data.$el,\n        extension: _.pick(data.extension, ['id', 'addon_key', 'key', 'options', 'url'])\n      });\n    });\n  },\n  destroy: function(extension_id){\n    IframeActions.notifyIframeDestroyed({extension_id: extension_id});\n  },\n  registerContentResolver: {\n    resolveByExtension: (callback) => {\n      jwtActions.registerContentResolver({callback: callback});\n    }\n  },\n  defineModule: (name, methods) => {\n    ModuleActions.defineCustomModule(name, methods);\n  },\n  broadcastEvent: (type, targetSpec, event) => {\n    EventActions.broadcast(type, targetSpec, event);\n  },\n  create: create,\n  getExtensions: (filter) => {\n    return simpleXDM.getExtensions(filter);\n  }\n};","import AnalyticsAction from 'actions/analytics_action';\n\nexport default {\n  trackDeprecatedMethodUsed: (methodUsed, callback) => {\n    AnalyticsAction.trackDeprecatedMethodUsed(methodUsed, callback._context.extension);\n  }\n}\n","import EventDispatcher from 'dispatchers/event_dispatcher';\nimport DialogExtensionActions from 'actions/dialog_extension_actions';\nimport DialogActions from 'actions/dialog_actions';\nimport EventActions from 'actions/event_actions';\nimport DialogExtensionComponent from 'components/dialog_extension';\nimport util from '../util';\nimport ButtonComponent from 'components/button';\nimport DialogUtils from 'utils/dialog';\nimport _ from '../underscore';\n\nconst _dialogs = {};\n\nEventDispatcher.register('dialog-close', function (data) {\n  const dialog = data.dialog;\n  if (dialog && data.extension) {\n    EventActions.broadcast('dialog.close', {\n      addon_key: data.extension.addon_key\n    }, data.customData);\n  }\n});\n\nEventDispatcher.register('dialog-button-click', (data) => {\n  var eventData = {\n    button: {\n      name: ButtonComponent.getName(data.$el),\n      identifier: ButtonComponent.getIdentifier(data.$el),\n      text: ButtonComponent.getText(data.$el)\n    }\n  };\n  var eventName = 'dialog.button.click';\n\n  // Old buttons, (submit and cancel) use old events\n  if(!data.$el.hasClass('ap-dialog-custom-button')) {\n    eventName = `dialog.${eventData.button.name}`;\n  }\n\n  EventActions.broadcast(eventName, {\n    addon_key: data.extension.addon_key,\n    key: data.extension.key\n  }, eventData);\n});\n\n/**\n * @class Dialog~Dialog\n * @description A dialog object that is returned when a dialog is created using the [dialog module](module-Dialog.html).\n */\nclass Dialog {\n  constructor(options, callback) {\n    const _id = callback._id;\n    const extension = callback._context.extension;\n\n    var dialogExtension = {\n      addon_key: extension.addon_key,\n      key: options.key,\n      options: _.pick(callback._context.extension.options, ['customData', 'productContext'])\n    };\n\n    // ACJS-185: the following is a really bad idea but we need it\n    // for compat until AP.dialog.customData has been deprecated\n    dialogExtension.options.customData = options.customData;\n\n    // ACJS-268: probably just as bad as the above...\n    // Defaults to true if value is undefined.\n    dialogExtension.options.closeOnEscape = options.closeOnEscape === false ? false : true;\n\n    // terrible idea! - we need to remove this from p2 ASAP!\n    var dialogModuleOptions = DialogUtils.moduleOptionsFromGlobal(dialogExtension.addon_key, dialogExtension.key);\n    options = _.extend({}, dialogModuleOptions || {}, options);\n\n    var dialogOptions = {\n      id: _id,\n      size: options.size,\n      width: options.width,\n      height: options.height,\n      chrome: !!options.chrome,\n      header: options.header,\n      hint: options.hint,\n      actions: options.actions,\n      submitText: options.submitText,\n      cancelText: options.cancelText,\n      buttons: options.buttons\n    };\n\n    DialogExtensionActions.open(dialogExtension, dialogOptions);\n    this.customData = options.customData;\n    _dialogs[_id] = this;\n  }\n}\n\n/**\n * @class Dialog~DialogButton\n * @description A dialog button that can be controlled with JavaScript\n */\nclass Button {\n  constructor(identifier) {\n    if (!DialogExtensionComponent.getActiveDialog()) {\n      throw new Error('Failed to find an active dialog.');\n    }\n    this.name = identifier;\n    this.identifier = identifier;\n    this.enabled = DialogExtensionComponent.buttonIsEnabled(identifier);\n    this.hidden = !DialogExtensionComponent.buttonIsVisible(identifier);\n  }\n  /**\n   * Sets the button state to enabled\n   * @method enable\n   * @memberOf Dialog~DialogButton\n   * @noDemo\n   * @example\n   * AP.require('dialog', function(dialog){\n   *   dialog.getButton('submit').enable();\n   * });\n   */\n  enable() {\n    this.setState({\n      enabled: true\n    });\n  }\n  /**\n   * Sets the button state to disabled. A disabled button cannot be clicked and emits no events.\n   * @method disable\n   * @memberOf Dialog~DialogButton\n   * @noDemo\n   * @example\n   * AP.require('dialog', function(dialog){\n   *   dialog.getButton('submit').disable();\n   * });\n   */\n  disable() {\n    this.setState({\n      enabled: false\n    });\n  }\n  /**\n   * Query a button for its current state.\n   * @method isEnabled\n   * @memberOf Dialog~DialogButton\n   * @param {Function} callback function to receive the button state.\n   * @noDemo\n   * @example\n   * AP.require('dialog', function(dialog){\n   *   dialog.getButton('submit').isEnabled(function(enabled){\n   *     if(enabled){\n   *       //button is enabled\n   *     }\n   *   });\n   * });\n   */\n  isEnabled(callback) {\n    callback(this.enabled);\n  }\n  /**\n   * Toggle the button state between enabled and disabled.\n   * @method toggle\n   * @memberOf Dialog~DialogButton\n   * @noDemo\n   * @example\n   * AP.require('dialog', function(dialog){\n   *   dialog.getButton('submit').toggle();\n   * });\n   */\n  toggle() {\n    this.setState({\n      enabled: !this.enabled\n    });\n  }\n  setState(state) {\n    this.enabled = state.enabled;\n    DialogActions.toggleButton({\n      identifier: this.identifier,\n      enabled: this.enabled\n    });\n  }\n  /**\n   * Trigger a callback bound to a button.\n   * @method trigger\n   * @memberOf Dialog~DialogButton\n   * @noDemo\n   * @example\n   * AP.require('dialog', function(dialog){\n   *   dialog.getButton('submit').bind(function(){\n   *     alert('clicked!');\n   *   });\n   *   dialog.getButton('submit').trigger();\n   * });\n   */\n  trigger(callback) {\n    if (this.enabled) {\n      DialogActions.dialogMessage({\n        name: this.name,\n        extension: callback._context.extension\n      });\n    }\n  }\n\n  /**\n   * Query a button for its current hidden/visible state.\n   * @method isHidden\n   * @memberOf Dialog~DialogButton\n   * @param {Function} callback function to receive the button state.\n   * @noDemo\n   * @example\n   * AP.require('dialog', function(dialog){\n   *   dialog.getButton('submit').isHidden(function(hidden){\n   *     if(hidden){\n   *       //button is hidden\n   *     }\n   *   });\n   * });\n   */\n  isHidden(callback) {\n    callback(this.hidden);\n  }\n  /**\n   * Sets the button state to hidden\n   * @method hide\n   * @memberOf Dialog~DialogButton\n   * @noDemo\n   * @example\n   * AP.require('dialog', function(dialog){\n   *   dialog.getButton('submit').hide();\n   * });\n   */\n  hide() {\n    this.setHidden(true);\n  }\n  /**\n   * Sets the button state to visible\n   * @method show\n   * @memberOf Dialog~DialogButton\n   * @noDemo\n   * @example\n   * AP.require('dialog', function(dialog){\n   *   dialog.getButton('submit').show();\n   * });\n   */\n  show() {\n    this.setHidden(false);\n  }\n\n  setHidden(hidden) {\n    this.hidden = hidden;\n    DialogActions.toggleButtonVisibility({\n      identifier: this.identifier,\n      hidden: this.hidden\n    });\n  }\n}\n\nfunction getDialogFromContext(context) {\n  return  _dialogs[context.extension.options.dialogId];\n}\n\nclass CreateButton {\n  constructor(options, callback) {\n    DialogExtensionActions.addUserButton({\n      identifier: options.identifier,\n      text: options.text\n    }, callback._context.extension);\n  }\n}\n\n/**\n * The Dialog module provides a mechanism for launching an add-on's modules as modal dialogs from within an add-on's iframe.\n * A modal dialog displays information without requiring the user to leave the current page.\n * The dialog is opened over the entire window, rather than within the iframe itself.\n *\n * <h3>Styling your dialog to look like a standard Atlassian dialog</h3>\n *\n * By default the dialog iframe is undecorated. It's up to you to style the dialog.\n * <img src=\"../assets/images/connectdialogchromelessexample.jpeg\" width=\"100%\" />\n *\n * In order to maintain a consistent look and feel between the host application and the add-on,\n * we encourage you to style your dialogs to match Atlassian's Design Guidelines for modal dialogs.\n * To do that, you'll need to add the AUI styles to your dialog.\n *\n * For more information, read about the Atlassian User Interface [dialog component](https://docs.atlassian.com/aui/latest/docs/dialog.html).\n * @exports Dialog\n */\nmodule.exports = {\n  /**\n   * @class Dialog~DialogOptions\n   * @description The options supplied to a [dialog.create()](module-Dialog.html) call.\n   *\n   * @property {String}        key         The module key of a dialog, or the key of a page or web-item that you want to open as a dialog.\n   * @property {String}        size        Opens the dialog at a preset size: small, medium, large, x-large or fullscreen (with chrome).\n   * @property {Number|String} width       if size is not set, define the width as a percentage (append a % to the number) or pixels.\n   * @property {Number|String} height      if size is not set, define the height as a percentage (append a % to the number) or pixels.\n   * @property {Boolean}       chrome      (optional) opens the dialog with heading and buttons.\n   * @property {String}        header      (optional) text to display in the header if opening a dialog with chrome.\n   * @property {String}        submitText  (optional) text for the submit button if opening a dialog with chrome.\n   * @property {String}        cancelText  (optional) text for the cancel button if opening a dialog with chrome.\n   * @property {Object}        customData  (optional) custom data object that can be accessed from the actual dialog iFrame.\n   * @property {Boolean}       closeOnEscape (optional) if true, pressing ESC will close the dialog (default is true).\n   * @property {Array}         buttons     (optional) an array of custom buttons to be added to the dialog if opening a dialog with chrome.\n   */\n\n  /**\n   * Creates a dialog for a common dialog, page or web-item module key.\n   * @param {Dialog~DialogOptions} options configuration object of dialog options.\n   * @method create\n   * @noDemo\n   * @example\n   * AP.require('dialog', function(dialog){\n   *   dialog.create({\n   *     key: 'my-module-key',\n   *     width: '500px',\n   *     height: '200px',\n   *     chrome: true,\n   *     buttons: [\n   *      {\n   *        text: 'my button',\n   *        identifier: 'my_unique_identifier'\n   *      }\n   *     ]\n   *   }).on(\"close\", callbackFunc);\n   * });\n   *\n   * @return {Dialog~Dialog} Dialog object allowing for callback registrations\n   */\n  create: {\n    constructor: Dialog\n  },\n  /**\n   * Closes the currently open dialog. Optionally pass data to listeners of the `dialog.close` event.\n   * This will only close a dialog that has been opened by your add-on.\n   * You can register for close events using the `dialog.close` event and the [events module](module-Events.html).\n   * @param {Object} data An object to be emitted on dialog close.\n   * @noDemo\n   * @example\n   * AP.require('dialog', function(dialog){\n         *   dialog.close({foo: 'bar'});\n         * });\n   */\n  close: (data, callback) => {\n    if (!$.isFunction(callback)) {\n      callback = data;\n      data = {};\n    }\n    var dialogToClose;\n    if(callback._context.extension.options.isDialog){\n      dialogToClose = DialogExtensionComponent.getByExtension(callback._context.extension.id)[0];\n    } else {\n      dialogToClose = DialogExtensionComponent.getActiveDialog();\n    }\n\n    DialogActions.close({\n      customData: data,\n      dialog: dialogToClose,\n      extension: callback._context.extension\n    });\n  },\n  /**\n   * Returns the data Object passed to the dialog at creation.\n   * @noDemo\n   * @name customData\n   * @method\n   * @param {Function} callback - Callback method to be executed with the custom data.\n   * @example\n   * AP.require('dialog', function(dialog){\n   *   var myDataVariable = dialog.customData.myDataVariable;\n   * });\n   *\n   * @return {Object} Data Object passed to the dialog on creation.\n   */\n  getCustomData: (callback) => {\n    const dialog = getDialogFromContext(callback._context);\n    if (dialog) {\n      callback(dialog.customData);\n    }\n  },\n  /**\n   * Returns the button that was requested (either cancel or submit). If the requested button does not exist, an empty Object will be returned instead.\n   * @method getButton\n   * @returns {Dialog~DialogButton}\n   * @noDemo\n   * @example\n   * AP.require('dialog', function(dialog){\n   *   dialog.getButton('submit');\n   * });\n   */\n  getButton: {\n    constructor: Button,\n    enable: Button.prototype.enable,\n    disable: Button.prototype.disable,\n    toggle: Button.prototype.toggle,\n    isEnabled: Button.prototype.isEnabled,\n    trigger: Button.prototype.trigger,\n    hide: Button.prototype.hide,\n    show: Button.prototype.show,\n    isHidden: Button.prototype.isHidden\n  },\n  /**\n   * Creates a dialog button that can be controlled with javascript\n   * @method createButton\n   * @returns {Dialog~DialogButton}\n   * @noDemo\n   * @example\n   * AP.require('dialog', function(dialog){\n   *   dialog.createButton({\n   *     text: 'button text',\n   *     identifier: 'button.1'\n   *   }).bind(function mycallback(){});\n   * });\n   */\n  createButton: {\n    constructor: CreateButton\n  }\n};","import $ from '../dollar';\nimport EnvActions from 'actions/env_actions';\nimport EventDispatcher from 'dispatchers/event_dispatcher';\nimport util from '../util';\n\nvar debounce = AJS.debounce || $.debounce;\n\nexport default {\n  getLocation: function (callback) {\n    callback(window.location.href);\n  },\n  resize: debounce(function(width, height, callback) {\n    var options = callback._context.extension.options;\n    if (options && !options.isDialog){\n      EnvActions.iframeResize(width, height, callback._context);\n    }\n  }),\n\n  sizeToParent: debounce(function (callback) {\n    // sizeToParent is only available for general-pages\n    if (callback._context.extension.options.isFullPage) {\n      // This adds border between the iframe and the page footer as the connect addon has scrolling content and can't do this\n      util.getIframeByExtensionId(callback._context.extension_id).addClass('full-size-general-page');\n      EventDispatcher.register('host-window-resize', (data) => {\n        EnvActions.sizeToParent(callback._context);\n      });\n      EnvActions.sizeToParent(callback._context);\n    } else {\n      // This is only here to support integration testing\n      // see com.atlassian.plugin.connect.test.pageobjects.RemotePage#isNotFullSize()\n      util.getIframeByExtensionId(callback._context.extension_id).addClass('full-size-general-page-fail');\n    }\n  })\n};","import _ from '../underscore';\nimport EventActions from 'actions/event_actions';\n\nexport default {\n  emit: function(name, ...args) {\n    var callback = _.last(args);\n    args = _.first(args, -1);\n    EventActions.broadcast(name, {\n      addon_key: callback._context.extension.addon_key\n    }, args);\n  }\n};","/**\n* Flags are the primary method for providing system feedback in the product user interface. Messages include notifications of various kinds: alerts, confirmations, notices, warnings, info and errors.\n* @module Flag\n*/\n\nimport $ from '../dollar';\nimport EventDispatcher from 'dispatchers/event_dispatcher';\nimport FlagActions from 'actions/flag_actions';\nimport FlagComponent from 'components/flag';\n\nconst _flags = {};\n\n/**\n* @class Flag~Flag\n* @description A flag object created by the [AP.flag]{@link module:Flag} module.\n*/\nclass Flag {\n  constructor(options, callback) {\n\n    this.flag = FlagComponent.render({\n      type: options.type,\n      title: options.title,\n      body: AJS.escapeHtml(options.body),\n      close: options.close,\n      id: callback._id\n    });\n\n    FlagActions.open(this.flag.attr('id'));\n\n    this.onTriggers= {};\n\n    _flags[this.flag.attr('id')] = this;\n  }\n\n  /**\n  * @name on\n  * @memberof Flag~Flag\n  * @method\n  * @description Binds a callback function to an event that is triggered by the Flag.\n  * @param {Event} event A flag event; currently, the only valid option is 'close'.\n  * @param {Function} callback The function that runs when the event occurs.\n  * @example\n  * // Display a nice green flag using the Flags JavaScript API.\n  * var flag = AP.flag.create({\n  *   title: 'Successfully created a flag.',\n  *   body: 'This is a flag.',\n  *   type: 'info'\n  * });\n  *\n  * // Log a message to the console when the flag has closed.\n  * flag.on('close', function (data) {\n  *   console.log('Flag has been closed!');\n  * })\n  *\n  */\n  on(event, callback) {\n    const id = this.flag.id;\n    if ($.isFunction(callback)) {\n      this.onTriggers[event] = callback;\n    }\n  }\n\n  /**\n  * @name close\n  * @memberof Flag~Flag\n  * @method\n  * @description Closes the Flag.\n  * @example\n  * // Display a nice green flag using the Flags JavaScript API.\n  * var flag = AP.flag.create({\n  *   title: 'Successfully created a flag.',\n  *   body: 'This is a flag.',\n  *   type: 'info'\n  * });\n  *\n  * // Close the flag.\n  * flag.close()\n  *\n  */\n  close() {\n    this.flag.close();\n  }\n}\n\nEventDispatcher.register('flag-closed', (data) => {\n  if (_flags[data.id] && $.isFunction(_flags[data.id].onTriggers['close'])) {\n    _flags[data.id].onTriggers['close']();\n  }\n  if (_flags[data.id]) {\n    delete _flags[data.id];\n  }\n});\n\nexport default {\n  /**\n  * @name create\n  * @method\n  * @description Creates a new flag.\n  * @param {Object} options           Options of the flag.\n  * @param {String} options.title     The title text of the flag.\n  * @param {String} options.body      The body text of the flag.\n  * @param {String} options.type=info Sets the type of the message. Valid options are \"info\", \"success\", \"warning\" and \"error\".\n  * @param {String} options.close     The closing behaviour that this flag has. Valid options are \"manual\", \"auto\" and \"never\".\n  * @returns {Flag~Flag}\n  * @example\n  * // Display a nice green flag using the Flags JavaScript API.\n  * var flag = AP.flag.create({\n  *   title: 'Successfully created a flag.',\n  *   body: 'This is a flag.',\n  *   type: 'success'\n  * });\n  */\n  create: {\n    constructor: Flag,\n    on: Flag.prototype.on,\n    close: Flag.prototype.close\n  }\n}\n","/**\n * The inline dialog is a wrapper for secondary content/controls to be displayed on user request. Consider this component as displayed in context to the triggering control with the dialog overlaying the page content.\n * A inline dialog should be preferred over a modal dialog when a connection between the action has a clear benefit versus having a lower user focus.\n *\n * Inline dialogs can be shown via a [web item target](../modules/common/web-item.html#target).\n *\n * For more information, read about the Atlassian User Interface [inline dialog component](https://docs.atlassian.com/aui/latest/docs/inline-dialog.html).\n * @module inline-dialog\n */\n\nimport InlineDialogActions from 'actions/inline_dialog_actions';\n\nexport default {\n  /**\n   * Hide the inline dialog that contains the iframe where this method is called from.\n   * @memberOf module:inline-dialog\n   * @method hide\n   * @noDemo\n   * @example\n   * AP.require('inline-dialog', function(inlineDialog){\n   *   inlineDialog.hide();\n   * });\n   */\n  hide: function(callback){\n    InlineDialogActions.close();\n  }\n};","/**\n* Messages are the primary method for providing system feedback in the product user interface.\n* Messages include notifications of various kinds: alerts, confirmations, notices, warnings, info and errors.\n* For visual examples of each kind please see the [Design guide](https://developer.atlassian.com/design/latest/communicators/messages/).\n* ### Example ###\n* ```\n* AP.require(\"messages\", function(messages){\n*   //create a message\n*   var message = messages.info('plain text title', 'plain text body');\n* });\n* ```\n* This module has been deprecated and may be removed in future releases. Please use the [Flag module](module-Flag.html) instead.\n* @name messages\n* @module\n*/\n\nimport $ from '../dollar';\nimport _ from '../underscore';\n\nconst MESSAGE_BAR_ID = 'ac-message-container';\nconst MESSAGE_TYPES = ['generic', 'error', 'warning', 'success', 'info', 'hint'];\nconst MSGID_PREFIX = 'ap-message-';\nconst MSGID_REGEXP = new RegExp(`^${MSGID_PREFIX}[0-9A-fa-f]+$`);\nconst _messages = {};\n\nfunction validateMessageId(msgId) {\n  return MSGID_REGEXP.test(msgId);\n}\n\nfunction getMessageBar() {\n  let $msgBar = $('#' + MESSAGE_BAR_ID);\n\n  if ($msgBar.length < 1) {\n    $msgBar = $('<div id=\"' + MESSAGE_BAR_ID + '\" />').appendTo('body');\n  }\n  return $msgBar;\n}\n\nfunction filterMessageOptions(options) {\n  const copy = {};\n  const allowed = ['closeable', 'fadeout', 'delay', 'duration', 'id'];\n  if(_.isObject(options)){\n    allowed.forEach(key => {\n      if (key in options) {\n        copy[key] = options[key];\n      }\n    })\n  }\n  return copy;\n}\n\nfunction showMessage(name, title, body, options) {\n  const $msgBar = getMessageBar();\n  options = filterMessageOptions(options);\n  $.extend(options, {\n    title: title,\n    body: AJS.escapeHtml(body)\n  });\n\n  if ($.inArray(name, MESSAGE_TYPES) < 0) {\n    throw 'Invalid message type. Must be: ' + MESSAGE_TYPES.join(', ');\n  }\n  if (validateMessageId(options.id)) {\n    AJS.messages[name]($msgBar, options);\n    // Calculate the left offset based on the content width.\n    // This ensures the message always stays in the centre of the window.\n    $msgBar.css('margin-left', '-' + $msgBar.innerWidth() / 2 + 'px');\n  }\n}\n\nconst deprecatedShowMessage = AJS.deprecate.fn(showMessage, 'AP.messages', {\n  deprecationType: 'API',\n  alternativeName:'AP.flag',\n  sinceVersion:'ACJS 5.0'\n});\n\n$(document).on('aui-message-close', function (e, $msg) {\n  const _id = $msg.attr('id').replace(MSGID_PREFIX, '');\n  if (_messages[_id]) {\n    if ($.isFunction(_messages[_id].onCloseTrigger)) {\n      _messages[_id].onCloseTrigger();\n    }\n    _messages[_id]._destroy();\n  }\n});\n\nvar toExport = {\n  /**\n  * Close a message\n  * @name clear\n  * @method\n  * @memberof module:messages#\n  * @param    {String}    id  The id that was returned when the message was created.\n  * @example\n  * AP.require(\"messages\", function(messages){\n  *   //create a message\n  *   var message = messages.info('title', 'body');\n  *   setTimeout(function(){\n  *     messages.clear(message);\n  *   }, 2000);\n  * });\n  */\n  clear: function (msg) {\n    const id = MSGID_PREFIX + msg._id;\n    if (validateMessageId(id)) {\n      $('#' + id).closeMessage();\n    }\n  },\n\n  /**\n  * Trigger an event when a message is closed\n  * @name onClose\n  * @method\n  * @memberof module:messages#\n  * @param    {String}    id  The id that was returned when the message was created.\n  * @param    {Function}  callback  The function that is run when the event is triggered\n  * @example\n  * AP.require(\"messages\", function(messages){\n  *   //create a message\n  *   var message = messages.info('title', 'body');\n  *   messages.onClose(message, function() {\n  *       console.log(message, ' has been closed!');\n  *   });\n  * });\n  */\n  onClose: function (msg, callback) {\n    const id = msg._id;\n    if (_messages[id]) {\n      _messages[id].onCloseTrigger = callback;\n    }\n  }\n};\n\n/**\n* Show a generic message\n* @name generic\n* @method\n* @memberof module:messages#\n* @param    {String}            title       Sets the title text of the message.\n* @param    {String}            body        The main content of the message.\n* @param    {Object}            options             Message Options\n* @param    {Boolean}           options.closeable   Adds a control allowing the user to close the message, removing it from the page.\n* @param    {Boolean}           options.fadeout     Toggles the fade away on the message\n* @param    {Number}            options.delay       Time to wait (in ms) before starting fadeout animation (ignored if fadeout==false)\n* @param    {Number}            options.duration    Fadeout animation duration in milliseconds (ignored if fadeout==false)\n* @returns  {String}    The id to be used when clearing the message\n* @example\n* AP.require(\"messages\", function(messages){\n*   //create a message\n*   var message = messages.generic('title', 'generic message example');\n* });\n*/\n\n/**\n* Show an error message\n* @name error\n* @method\n* @memberof module:messages#\n* @param    {String}            title       Sets the title text of the message.\n* @param    {String}            body        The main content of the message.\n* @param    {Object}            options             Message Options\n* @param    {Boolean}           options.closeable   Adds a control allowing the user to close the message, removing it from the page.\n* @param    {Boolean}           options.fadeout     Toggles the fade away on the message\n* @param    {Number}            options.delay       Time to wait (in ms) before starting fadeout animation (ignored if fadeout==false)\n* @param    {Number}            options.duration    Fadeout animation duration in milliseconds (ignored if fadeout==false)\n* @returns  {String}    The id to be used when clearing the message\n* @example\n* AP.require(\"messages\", function(messages){\n*   //create a message\n*   var message = messages.error('title', 'error message example');\n* });\n*/\n\n/**\n* Show a warning message\n* @name warning\n* @method\n* @memberof module:messages#\n* @param    {String}            title       Sets the title text of the message.\n* @param    {String}            body        The main content of the message.\n* @param    {Object}            options             Message Options\n* @param    {Boolean}           options.closeable   Adds a control allowing the user to close the message, removing it from the page.\n* @param    {Boolean}           options.fadeout     Toggles the fade away on the message\n* @param    {Number}            options.delay       Time to wait (in ms) before starting fadeout animation (ignored if fadeout==false)\n* @param    {Number}            options.duration    Fadeout animation duration in milliseconds (ignored if fadeout==false)\n* @returns  {String}    The id to be used when clearing the message\n* @example\n* AP.require(\"messages\", function(messages){\n*   //create a message\n*   var message = messages.warning('title', 'warning message example');\n* });\n*/\n\n/**\n* Show a success message\n* @name success\n* @method\n* @memberof module:messages#\n* @param    {String}            title       Sets the title text of the message.\n* @param    {String}            body        The main content of the message.\n* @param    {Object}            options             Message Options\n* @param    {Boolean}           options.closeable   Adds a control allowing the user to close the message, removing it from the page.\n* @param    {Boolean}           options.fadeout     Toggles the fade away on the message\n* @param    {Number}            options.delay       Time to wait (in ms) before starting fadeout animation (ignored if fadeout==false)\n* @param    {Number}            options.duration    Fadeout animation duration in milliseconds (ignored if fadeout==false)\n* @returns  {String}    The id to be used when clearing the message\n* @example\n* AP.require(\"messages\", function(messages){\n*   //create a message\n*   var message = messages.success('title', 'success message example');\n* });\n*/\n\n/**\n* Show an info message\n* @name info\n* @method\n* @memberof module:messages#\n* @param    {String}            title       Sets the title text of the message.\n* @param    {String}            body        The main content of the message.\n* @param    {Object}            options             Message Options\n* @param    {Boolean}           options.closeable   Adds a control allowing the user to close the message, removing it from the page.\n* @param    {Boolean}           options.fadeout     Toggles the fade away on the message\n* @param    {Number}            options.delay       Time to wait (in ms) before starting fadeout animation (ignored if fadeout==false)\n* @param    {Number}            options.duration    Fadeout animation duration in milliseconds (ignored if fadeout==false)\n* @returns  {String}    The id to be used when clearing the message\n* @example\n* AP.require(\"messages\", function(messages){\n*   //create a message\n*   var message = messages.info('title', 'info message example');\n* });\n*/\n\n/**\n* Show a hint message\n* @name hint\n* @method\n* @memberof module:messages#\n* @param    {String}            title               Sets the title text of the message.\n* @param    {String}            body                The main content of the message.\n* @param    {Object}            options             Message Options\n* @param    {Boolean}           options.closeable   Adds a control allowing the user to close the message, removing it from the page.\n* @param    {Boolean}           options.fadeout     Toggles the fade away on the message\n* @param    {Number}            options.delay       Time to wait (in ms) before starting fadeout animation (ignored if fadeout==false)\n* @param    {Number}            options.duration    Fadeout animation duration in milliseconds (ignored if fadeout==false)\n* @returns  {String}    The id to be used when clearing the message\n* @example\n* AP.require(\"messages\", function(messages){\n*   //create a message\n*   var message = messages.hint('title', 'hint message example');\n* });\n*/\nMESSAGE_TYPES.forEach((messageType) => {\n  toExport[messageType] = {\n    constructor: function(title, body, options, callback) {\n      if(options._context) {\n        callback = options;\n        options = {};\n      }\n      const _id = callback._id;\n      options.id = MSGID_PREFIX + _id;\n      deprecatedShowMessage(messageType, title, body, options);\n      _messages[_id] = this;\n    }\n  };\n}, this);\n\nexport default toExport;\n","// AUI includes underscore and exposes it globally.\nexport default window._;","import _ from './underscore';\n\nfunction escapeSelector(s) {\n  if (!s) {\n    throw new Error('No selector to escape');\n  }\n  return s.replace(/[!\"#$%&'()*+,.\\/:;<=>?@[\\\\\\]^`{|}~]/g, '\\\\$&');\n}\n\nfunction stringToDimension(value) {\n  var percent = false;\n  var unit = 'px';\n\n  if(_.isString(value)) {\n    percent = value.indexOf('%') === value.length - 1;\n    value = parseInt(value, 10);\n    if (percent) {\n      unit = '%';\n    }\n  }\n\n  if(!isNaN(value)) {\n    return value + unit;\n  }\n}\n\nfunction getIframeByExtensionId(id) {\n  return AJS.$('iframe#' + escapeSelector(id));\n}\n\nexport default {\n  escapeSelector,\n  stringToDimension,\n  getIframeByExtensionId\n};","class ButtonUtils {\n  // button identifier for XDM. NOT an id attribute\n  randomIdentifier(){\n    return Math.random().toString(16).substring(7);\n  }\n}\n\nvar buttonUtilsInstance = new ButtonUtils();\n\nexport default buttonUtilsInstance;","import $ from '../dollar';\nimport util from '../util';\nimport buttonUtils from './button';\n\nclass DialogUtils {\n  _size (options){\n    var size = options.size;\n    if (options.size === 'x-large') {\n      size = 'xlarge';\n    }\n    if (options.width === '100%' && options.height === '100%') {\n      size = 'fullscreen';\n    }\n    if (!options.size && !options.width && !options.height) {\n      size = 'medium';\n    }\n    return size;\n  }\n\n  _header(text){\n    var headerText = '';\n    switch(typeof text) {\n    case 'string':\n      headerText = text;\n      break;\n\n    case 'object':\n      headerText = text.value;\n      break;\n    }\n\n    return headerText;\n  }\n\n  _hint(text){\n    if(typeof text === 'string'){\n      return text;\n    }\n    return '';\n  }\n\n  _chrome(options){\n    var returnval = true;\n    if (typeof options.chrome === 'boolean') {\n      returnval = options.chrome;\n    }\n    if(options.size === 'fullscreen') {\n      returnval = true;\n    }\n    return returnval;\n  }\n\n  _width(dimension){\n    return util.stringToDimension(dimension);\n  }\n\n  _height(dimension){\n    return util.stringToDimension(dimension);\n  }\n\n  _actions(options){\n    var sanitizedActions = [];\n    options = options || {};\n    if (!options.actions) {\n\n      sanitizedActions = [\n        {\n          name: 'submit',\n          identifier: 'submit',\n          text: options.submitText || 'Submit',\n          type: 'primary'\n        },\n        {\n          name: 'cancel',\n          identifier: 'cancel',\n          text: options.cancelText || 'Cancel',\n          type: 'link',\n          immutable: true\n        }\n      ];\n    }\n\n    if(options.buttons) {\n      sanitizedActions = sanitizedActions.concat(this._buttons(options));\n    }\n\n    return sanitizedActions;\n\n  }\n\n  _id(str){\n    if(typeof str !== 'string'){\n      str = Math.random().toString(36).substring(2, 8);\n    }\n    return str;\n  }\n  // user defined action buttons\n  _buttons(options) {\n    var buttons = [];\n    if(options.buttons && Array.isArray(options.buttons)) {\n      options.buttons.forEach((button) => {\n        var text;\n        var identifier;\n        var disabled = false;\n        if(button.text && typeof button.text === 'string') {\n          text = button.text;\n        }\n        if(button.identifier && typeof button.identifier === 'string') {\n          identifier = button.identifier;\n        } else {\n          identifier = buttonUtils.randomIdentifier();\n        }\n        if(button.disabled && button.disabled === true) {\n          disabled === true;\n        }\n\n        buttons.push({\n          text: text,\n          identifier: identifier,\n          type: 'secondary',\n          custom: true,\n          disabled: disabled\n        });\n      });\n    }\n    return buttons;\n  }\n\n  sanitizeOptions(options){\n    options = options || {};\n    var sanitized = {\n      chrome: this._chrome(options),\n      header: this._header(options.header),\n      hint: this._hint(options.hint),\n      width: this._width(options.width),\n      height: this._height(options.height),\n      $content: options.$content,\n      extension: options.extension,\n      actions: this._actions(options),\n      id: this._id(options.id),\n      size: options.size\n    };\n    sanitized.size = this._size(sanitized);\n\n    return sanitized;\n  }\n  // such a bad idea! this entire concept needs rewriting in the p2 plugin.\n  moduleOptionsFromGlobal(addon_key, key) {\n    if(window._AP\n      && window._AP.dialogModules\n      && window._AP.dialogModules[addon_key]\n      && window._AP.dialogModules[addon_key][key]) {\n      return window._AP.dialogModules[addon_key][key].options;\n    }\n    return false;\n  }\n\n}\n\nvar dialogUtilsInstance = new DialogUtils();\n\nexport default dialogUtilsInstance;","import util from '../util';\n\nmodule.exports = {\n  optionsToAttributes: function(options){\n    var sanitized = {};\n    if(options && typeof options ==='object'){\n      if(options.width){\n        sanitized.width = util.stringToDimension(options.width);\n      }\n      if(options.height){\n        sanitized.height = util.stringToDimension(options.height);\n      }\n    }\n    return sanitized;\n  }\n};","import base64 from 'base-64';\nimport utf8 from 'utf8';\n\nfunction parseJwtIssuer(jwt) {\n  return parseJwtClaims(jwt)['iss'];\n}\n\nfunction parseJwtClaims(jwt) {\n\n  if (null === jwt || '' === jwt) {\n    throw('Invalid JWT: must be neither null nor empty-string.');\n  }\n\n  var firstPeriodIndex = jwt.indexOf('.');\n  var secondPeriodIndex = jwt.indexOf('.', firstPeriodIndex + 1);\n\n  if (firstPeriodIndex < 0 || secondPeriodIndex <= firstPeriodIndex) {\n    throw('Invalid JWT: must contain 2 period (\".\") characters.');\n  }\n\n  var encodedClaims = jwt.substring(firstPeriodIndex + 1, secondPeriodIndex);\n\n  if (null === encodedClaims || '' === encodedClaims) {\n    throw('Invalid JWT: encoded claims must be neither null nor empty-string.');\n  }\n\n  var claimsString = utf8.decode(base64.decode.call(window, encodedClaims));\n  return JSON.parse(claimsString);\n}\n\nfunction isJwtExpired(jwtString, skew) {\n  if (skew === undefined) {\n    skew = 60; // give a minute of leeway to allow clock skew\n  }\n  var claims = parseJwtClaims(jwtString);\n  var expires = 0;\n  var now = Math.floor(Date.now() / 1000); // UTC timestamp now\n\n  if (claims && claims.exp) {\n    expires = claims.exp;\n  }\n\n  if ((expires - now) < skew) {\n    return true;\n  }\n\n  return false;\n\n}\n\nexport default {\n  parseJwtIssuer,\n  parseJwtClaims,\n  isJwtExpired\n}","import jsuri from 'jsuri';\nimport jwtUtil from 'utils/jwt';\n\nfunction isJwtExpired(urlStr) {\n  var jwtStr = _getJwt(urlStr);\n  return jwtUtil.isJwtExpired(jwtStr);\n}\n\nfunction _getJwt(urlStr) {\n  var url = new jsuri(urlStr);\n  return url.getQueryParamValue('jwt');\n}\n\nfunction hasJwt(url) {\n  var jwt = _getJwt(url);\n  return (jwt && _getJwt(url).length !== 0);\n\n}\n\nmodule.exports = {\n  hasJwt,\n  isJwtExpired\n}","import _ from '../underscore';\nimport jsuri from 'jsuri';\n\nfunction sanitizeTriggers(triggers) {\n  var onTriggers;\n  if(_.isArray(triggers)) {\n    onTriggers = triggers.join(' ');\n  } else if (_.isString(triggers)) {\n    onTriggers = triggers.trim();\n  }\n  return onTriggers;\n}\n\nfunction uniqueId(){\n  return 'webitem-' + Math.floor(Math.random() * 1000000000).toString(16);\n}\n\n// LEGACY: get addon key by webitem for p2\nfunction getExtensionKey($target){\n  var cssClass = $target.attr('class');\n  var m = cssClass ? cssClass.match(/ap-plugin-key-([^\\s]*)/) : null;\n  return _.isArray(m) ? m[1] : false;\n}\n\n// LEGACY: get module key by webitem for p2\nfunction getKey($target){\n  var cssClass = $target.attr('class');\n  var m = cssClass ? cssClass.match(/ap-module-key-([^\\s]*)/) : null;\n  return _.isArray(m) ? m[1] : false;\n}\n\nfunction getTargetKey($target){\n  var cssClass = $target.attr('class');\n  var m = cssClass ? cssClass.match(/ap-target-key-([^\\s]*)/) : null;\n  return _.isArray(m) ? m[1] : false;\n}\n\nfunction getFullKey($target){\n  return getExtensionKey($target) + '__' + getKey($target);\n}\n\nfunction getModuleOptionsForWebitem(type, $target){\n  var addon_key = getExtensionKey($target);\n  var targetKey = getTargetKey($target);\n  var moduleType = type + 'Modules';\n  if(window._AP\n    && window._AP[moduleType]\n    && window._AP[moduleType][addon_key]\n    && window._AP[moduleType][addon_key][targetKey]) {\n    return window._AP[moduleType][addon_key][targetKey].options;\n  }\n}\n\n// LEGACY - method for handling webitem options for p2\nfunction getOptionsForWebItem($target) {\n  var fullKey = getFullKey($target);\n\n  var type = $target.hasClass('ap-inline-dialog') ? 'inlineDialog' : 'dialog';\n  var options = getModuleOptionsForWebitem(type, $target);\n  if(!options && window._AP && window._AP[type + 'Options']) {\n    options = window._AP[type + 'Options'][fullKey] || {};\n  }\n  if(!options){\n    options = {};\n    console.warn('no webitem ' + type + 'Options for ' + fullKey);\n  }\n  options.productContext = options.productContext || {};\n  // create product context from url params\n  new jsuri($target.attr('href')).queryPairs.forEach((param) => {\n    options.productContext[param[0]] = param[1];\n  });\n\n  return options;\n}\n\nmodule.exports = {\n  sanitizeTriggers,\n  uniqueId,\n  getExtensionKey,\n  getKey,\n  getOptionsForWebItem\n};"]}