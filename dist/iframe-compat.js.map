{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/plugin/consumer-options.js","src/plugin/dollar.js","src/plugin/index.js","src/plugin/util.js"],"names":[],"mappings":"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","file":"iframe-compat.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import $ from './dollar';\n\nclass ConsumerOptions {\n\n  _getConsumerOptions() {\n    var options = {};\n    var $script = $('script[src*=\\'/atlassian-connect/all\\']');\n\n    if ( !($script && /\\/atlassian-connect\\/all(-debug)?\\.js($|\\?)/.test($script.attr('src'))) ){\n      $script = $('#ac-iframe-options');\n    }\n\n    if($script && $script.length > 0) {\n      // get its data-options attribute, if any\n      var optStr = $script.attr('data-options');\n      if (optStr) {\n        // if found, parse the value into kv pairs following the format of a style element\n        optStr.split(';').forEach((nvpair) => {\n          nvpair = nvpair.trim();\n          if (nvpair) {\n            var nv = nvpair.split(':');\n            var k = nv[0].trim();\n            var v = nv[1].trim();\n            if (k && v != null) {\n              options[k] = v === 'true' || v === 'false' ? v === 'true' : v;\n            }\n          }\n        });\n      }\n    }\n\n    return options;\n  }\n\n  _flush() {\n    delete this._options;\n  }\n\n  get(key) {\n    if(!this._options) {\n      this._options = this._getConsumerOptions();\n    }\n    if(key) {\n      return this._options[key];\n    }\n    return this._options;\n  }\n\n}\n\nmodule.exports = new ConsumerOptions();","import util from './util';\n\nvar each = util.each,\n  extend = util.extend,\n  document = window.document;\n\nfunction $(sel, context) {\n\n  context = context || document;\n\n  var els = [];\n  if (sel) {\n    if (typeof sel === 'string') {\n      var results = context.querySelectorAll(sel);\n      each(results, function (i, v) { els.push(v); });\n    }\n    else if (sel.nodeType === 1) {\n      els.push(sel);\n    }\n    else if (sel === window) {\n      els.push(sel);\n    }\n  }\n\n  extend(els, {\n    each: function (it) {\n      each(this, it);\n      return this;\n    },\n    bind: function (name, callback) {\n      this.each(function (i, el) {\n        util.bind(el, name, callback);\n      });\n    },\n    attr: function (k) {\n      var v;\n      this.each(function (i, el) {\n        v = el[k] || (el.getAttribute && el.getAttribute(k));\n        return !v;\n      });\n      return v;\n    },\n    removeClass: function (className) {\n      return this.each(function (i, el) {\n        if (el.className) {\n          el.className = el.className.replace(new RegExp('(^|\\\\s)' + className + '(\\\\s|$)'), ' ');\n        }\n      });\n    },\n    html: function (html) {\n      return this.each(function (i, el) {\n        el.innerHTML = html;\n      });\n    },\n    append: function (spec) {\n      return this.each(function (i, to) {\n        var el = context.createElement(spec.tag);\n        each(spec, function (k, v) {\n          if (k === '$text') {\n            if (el.styleSheet) { // style tags in ie\n              el.styleSheet.cssText = v;\n            }\n            else {\n              el.appendChild(context.createTextNode(v));\n            }\n          }\n          else if (k !== 'tag') {\n            el[k] = v;\n          }\n        });\n        to.appendChild(el);\n      });\n    }\n  });\n\n  return els;\n}\n\nexport default extend($, util);","//INSERT AMD STUBBER HERE!\n// import amd from './amd';\nimport util from './util';\nimport $ from './dollar';\nimport consumerOptions from './consumer-options';\n\nAP._hostModules._dollar = $;\n\nif(consumerOptions.get('sizeToParent') === true) {\n  AP.env.sizeToParent();\n}\n","// universal iterator utility\nfunction each(o, it) {\n  var l;\n  var k;\n  if (o) {\n    l = o.length;\n    if (l != null && typeof o !== 'function') {\n        k = 0;\n        while (k < l) {\n            if (it.call(o[k], k, o[k]) === false) break;\n            k += 1;\n          }\n      } else {\n        for (k in o) {\n            if (o.hasOwnProperty(k)) {\n                if (it.call(o[k], k, o[k]) === false) break;\n              }\n          }\n      }\n  }\n}\n\nfunction binder(std, odd) {\n  std += 'EventListener';\n  odd += 'Event';\n  return function (el, e, fn) {\n    if (el[std]) {\n        el[std](e, fn, false);\n      } else if (el[odd]) {\n          el[odd]('on' + e, fn);\n        }\n  };\n}\n\nfunction log() {\n  var console = this.console;\n  if (console && console.log) {\n    var args = [].slice.call(arguments);\n    if (console.log.apply) {\n        console.log.apply(console, args);\n      } else {\n        for (var i = 0, l = args.length; i < l; i += 1) {\n            args[i] = JSON.stringify(args[i]);\n          }\n        console.log(args.join(' '));\n      }\n    return true;\n  }\n}\n\nfunction decodeQueryComponent(encodedURI) {\n  return encodedURI == null ? null : decodeURIComponent(encodedURI.replace(/\\+/g, '%20'));\n}\n\nexport default {\n  each,\n  log,\n  decodeQueryComponent,\n  bind: binder('add', 'attach'),\n  unbind: binder('remove', 'detach'),\n\n  extend: function (dest) {\n    var args = arguments;\n    var srcs = [].slice.call(args, 1, args.length);\n    each(srcs, function (i, src) {\n        each(src, function (k, v) {\n            dest[k] = v;\n          });\n      });\n    return dest;\n  },\n\n  trim: function (s) {\n    return s && s.replace(/^\\s+|\\s+$/g, '');\n  },\n\n  debounce: function (fn, wait) {\n    var timeout;\n    return function () {\n        var ctx = this;\n        var args = [].slice.call(arguments);\n        function later() {\n            timeout = null;\n            fn.apply(ctx, args);\n          }\n        if (timeout) {\n            clearTimeout(timeout);\n          }\n        timeout = setTimeout(later, wait || 50);\n      };\n  },\n\n  inArray: function (value, array, fromIndex) {\n        //optimisation for all browsers after IE8\n    if (Array.prototype.indexOf) {\n        return Array.prototype.indexOf.call(array, value, fromIndex);\n      }\n\n    var k = fromIndex >>> 0, len = array.length >>> 0;\n    for (; k < len; k += 1) {\n        if (array[k] === value) return k;\n      }\n    return -1;\n  },\n\n  isFunction: function (fn) {\n    return typeof fn === 'function';\n  },\n\n  handleError: function (err) {\n    if (!log.apply(this, err && err.message ? [err, err.message] : [err])) {\n        throw err;\n      }\n  }\n}"]}