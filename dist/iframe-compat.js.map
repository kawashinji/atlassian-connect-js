{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/plugin/consumer-options.js","src/plugin/dollar.js","src/plugin/index.js","src/plugin/util.js"],"names":[],"mappings":"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","file":"iframe-compat.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import $ from './dollar';\n\nclass ConsumerOptions {\n\n  _getConsumerOptions() {\n    var options = {},\n      $script = $(\"script[src*='/atlassian-connect/all']\");\n\n    if ( !($script && /\\/atlassian-connect\\/all(-debug)?\\.js($|\\?)/.test($script.attr(\"src\"))) ){\n      $script = $(\"#ac-iframe-options\");\n    }\n\n    if($script && $script.length > 0) {\n      // get its data-options attribute, if any\n      var optStr = $script.attr(\"data-options\");\n      if (optStr) {\n        // if found, parse the value into kv pairs following the format of a style element\n        optStr.split(\";\").forEach((nvpair) => {\n          nvpair = nvpair.trim();\n          if (nvpair) {\n            var nv = nvpair.split(\":\"), k = nv[0].trim(), v = nv[1].trim();\n            if (k && v != null) {\n              options[k] = v === \"true\" || v === \"false\" ? v === \"true\" : v;\n            }\n          }\n        });\n      }\n    }\n\n    return options;\n  }\n\n  _flush() {\n    delete this._options;\n  }\n\n  get(key) {\n    if(!this._options) {\n      this._options = this._getConsumerOptions();\n    }\n    if(key) {\n      return this._options[key];\n    }\n    return this._options;\n  }\n\n}\n\nmodule.exports = new ConsumerOptions();","import util from './util';\n\nvar each = util.each,\n    extend = util.extend,\n    document = window.document;\n\nfunction $(sel, context) {\n\n  context = context || document;\n\n  var els = [];\n  if (sel) {\n    if (typeof sel === 'string') {\n      var results = context.querySelectorAll(sel);\n      each(results, function (i, v) { els.push(v); });\n    }\n    else if (sel.nodeType === 1) {\n      els.push(sel);\n    }\n    else if (sel === window) {\n      els.push(sel);\n    }\n  }\n\n  extend(els, {\n    each: function (it) {\n      each(this, it);\n      return this;\n    },\n    bind: function (name, callback) {\n      this.each(function (i, el) {\n        util.bind(el, name, callback);\n      });\n    },\n    attr: function (k) {\n      var v;\n      this.each(function (i, el) {\n        v = el[k] || (el.getAttribute && el.getAttribute(k));\n        return !v;\n      });\n      return v;\n    },\n    removeClass: function (className) {\n      return this.each(function (i, el) {\n        if (el.className) {\n          el.className = el.className.replace(new RegExp('(^|\\\\s)' + className + '(\\\\s|$)'), ' ');\n        }\n      });\n    },\n    html: function (html) {\n      return this.each(function (i, el) {\n        el.innerHTML = html;\n      });\n    },\n    append: function (spec) {\n      return this.each(function (i, to) {\n        var el = context.createElement(spec.tag);\n        each(spec, function (k, v) {\n          if (k === '$text') {\n            if (el.styleSheet) { // style tags in ie\n              el.styleSheet.cssText = v;\n            }\n            else {\n              el.appendChild(context.createTextNode(v));\n            }\n          }\n          else if (k !== 'tag') {\n            el[k] = v;\n          }\n        });\n        to.appendChild(el);\n      });\n    }\n  });\n\n  return els;\n}\n\nexport default extend($, util);","//INSERT AMD STUBBER HERE!\n// import amd from './amd';\nimport util from './util';\nimport $ from './dollar';\nimport consumerOptions from './consumer-options';\n\nAP._hostModules._dollar = $;\n\nif(consumerOptions.get('sizeToParent') === true) {\n  AP.env.sizeToParent();\n}\n","// universal iterator utility\nfunction each(o, it) {\n    var l;\n    var k;\n    if (o) {\n        l = o.length;\n        if (l != null && typeof o !== 'function') {\n            k = 0;\n            while (k < l) {\n                if (it.call(o[k], k, o[k]) === false) break;\n                k += 1;\n            }\n        } else {\n            for (k in o) {\n                if (o.hasOwnProperty(k)) {\n                    if (it.call(o[k], k, o[k]) === false) break;\n                }\n            }\n        }\n    }\n}\n\nfunction binder(std, odd) {\n    std += 'EventListener';\n    odd += 'Event';\n    return function (el, e, fn) {\n        if (el[std]) {\n            el[std](e, fn, false);\n        } else if (el[odd]) {\n            el[odd]('on' + e, fn);\n        }\n    };\n}\n\nfunction log() {\n    var console = this.console;\n    if (console && console.log) {\n        var args = [].slice.call(arguments);\n        if (console.log.apply) {\n            console.log.apply(console, args);\n        } else {\n            for (var i = 0, l = args.length; i < l; i += 1) {\n              args[i] = JSON.stringify(args[i]);\n            }\n            console.log(args.join(' '));\n        }\n        return true;\n    }\n}\n\nfunction decodeQueryComponent(encodedURI) {\n    return encodedURI == null ? null : decodeURIComponent(encodedURI.replace(/\\+/g, '%20'));\n}\n\nexport default {\n    each,\n    log,\n    decodeQueryComponent,\n    bind: binder('add', 'attach'),\n    unbind: binder('remove', 'detach'),\n\n    extend: function (dest) {\n        var args = arguments;\n        var srcs = [].slice.call(args, 1, args.length);\n        each(srcs, function (i, src) {\n            each(src, function (k, v) {\n                dest[k] = v;\n            });\n        });\n        return dest;\n    },\n\n    trim: function (s) {\n        return s && s.replace(/^\\s+|\\s+$/g, '');\n    },\n\n    debounce: function (fn, wait) {\n        var timeout;\n        return function () {\n            var ctx = this;\n            var args = [].slice.call(arguments);\n            function later() {\n                timeout = null;\n                fn.apply(ctx, args);\n            }\n            if (timeout) {\n                clearTimeout(timeout);\n            }\n            timeout = setTimeout(later, wait || 50);\n        };\n    },\n\n    inArray: function (value, array, fromIndex) {\n        //optimisation for all browsers after IE8\n        if (Array.prototype.indexOf) {\n          return Array.prototype.indexOf.call(array, value, fromIndex);\n        }\n\n        var k = fromIndex >>> 0, len = array.length >>> 0;\n        for (; k < len; k += 1) {\n            if (array[k] === value) return k;\n        }\n        return -1;\n    },\n\n    isFunction: function (fn) {\n        return typeof fn === 'function';\n    },\n\n    handleError: function (err) {\n        if (!log.apply(this, err && err.message ? [err, err.message] : [err])) {\n            throw err;\n        }\n    }\n}"]}