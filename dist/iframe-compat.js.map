{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/plugin/amd.js","src/plugin/consumer-options.js","src/plugin/dialog.js","src/plugin/dollar.js","src/plugin/events.js","src/plugin/index.js","src/plugin/util.js"],"names":[],"mappings":"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","file":"iframe-compat.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var modules = {};\n\nfunction reqAll(deps, callback) {\n  var mods = [];\n  var i = 0;\n  var len = deps.length;\n  function addOne(mod) {\n    mods.push(mod);\n    if (mods.length === len) {\n      var exports = [];\n      var i = 0;\n      for (; i < len; i += 1) {\n        exports[i] = mods[i].exports;\n      }\n      if (callback) {\n        callback.apply(window, exports);\n      }\n    }\n  }\n  if (deps && deps.length > 0) {\n    for (; i < len; i += 1) {\n      reqOne(deps[i], addOne);\n    }\n  } else {\n    if (callback) {\n      callback();\n    }\n  }\n}\n\nfunction reqOne(name, callback) {\n  // naive impl that assumes all modules are already loaded\n  callback(getOrCreate(name));\n}\n\nfunction getOrCreate(name) {\n  return modules[name] = modules[name] || {\n    name: name,\n    exports: function () {\n      function exports() {\n        var target = exports.__target__;\n        if (target) {\n          return target.apply(window, arguments);\n        }\n      }\n      return exports;\n    }()\n  };\n}\n\n// define(name, objOrFn)\n// define(name, deps, fn(dep1, dep2, ...))\nmodule.exports = function(AP) {\n  // populate modules with existing ACJS modules\n  if (AP) {\n    for (let key of Object.keys(AP._hostModules)) {\n      if (!key.startsWith('_')) {\n        modules[key] = {\n          name: key,\n          exports: AP._hostModules[key]\n        }\n      }\n    }\n  }\n  return {\n    define: function (name, deps, exports) {\n      var mod = getOrCreate(name);\n      var factory;\n      if (!exports) {\n        exports = deps;\n        deps = [];\n      }\n      if (exports) {\n        factory = typeof exports !== 'function' ? function () {\n          return exports;\n        } : exports;\n        reqAll(deps, function () {\n          var exports = factory.apply(window, arguments);\n          if (exports) {\n            if (typeof exports === 'function') {\n              mod.exports.__target__ = exports;\n            }\n            for (var k in exports) {\n              if (exports.hasOwnProperty(k)) {\n                mod.exports[k] = exports[k];\n              }\n            }\n          }\n        });\n      }\n    },\n    require: function (deps, callback) {\n      reqAll(typeof deps === 'string' ? [deps] : deps, callback);\n    }\n  };\n};\n","import $ from './dollar';\n\nclass ConsumerOptions {\n\n  _getConsumerOptions() {\n    var options = {};\n    var $script = $('script[src*=\\'/atlassian-connect/all\\']');\n\n    if ( !($script && /\\/atlassian-connect\\/all(-debug)?\\.js($|\\?)/.test($script.attr('src'))) ){\n      $script = $('#ac-iframe-options');\n    }\n\n    if($script && $script.length > 0) {\n      // get its data-options attribute, if any\n      var optStr = $script.attr('data-options');\n      if (optStr) {\n        // if found, parse the value into kv pairs following the format of a style element\n        optStr.split(';').forEach((nvpair) => {\n          nvpair = nvpair.trim();\n          if (nvpair) {\n            var nv = nvpair.split(':');\n            var k = nv[0].trim();\n            var v = nv[1].trim();\n            if (k && v != null) {\n              options[k] = v === 'true' || v === 'false' ? v === 'true' : v;\n            }\n          }\n        });\n      }\n    }\n\n    return options;\n  }\n\n  _flush() {\n    delete this._options;\n  }\n\n  get(key) {\n    if(!this._options) {\n      this._options = this._getConsumerOptions();\n    }\n    if(key) {\n      return this._options[key];\n    }\n    return this._options;\n  }\n\n}\n\nmodule.exports = new ConsumerOptions();","import util from './util';\nimport events from './events';\nlet customButtonIncrement = 1;\n\nconst getCustomData = util.deprecateApi(() => {\n  return AP._data.options.customData;\n}, 'AP.dialog.customData', 'AP.dialog.getCustomData()', '5.0');\n\n\nObject.defineProperty(AP._hostModules.dialog, 'customData', {\n  get: getCustomData\n});\nObject.defineProperty(AP.dialog, 'customData', {\n  get: getCustomData\n});\n\nconst dialogHandlers = {};  \n\nevents.onAny(eventDelegator);\nfunction eventDelegator(name, args) {\n  let dialogEventMatch = name.match(/^dialog\\.(\\w+)/);\n  if(!dialogEventMatch) {\n    return;\n  }\n  if(name === 'dialog.button.click') {\n    customButtonEvent(args.button.identifier, args);\n  } else {\n    submitOrCancelEvent(dialogEventMatch[1], args);\n  }\n}\n\nfunction customButtonEvent(buttonIdentifier, args) {\n  var callbacks = dialogHandlers[buttonIdentifier];\n  if(callbacks && callbacks.length !== 0){\n    try{\n      callbacks.forEach((callback) => {\n        callback.call(null, args);\n      });\n    } catch (err) {\n      console.error(err);\n    }\n  }\n}\n\nfunction submitOrCancelEvent(name, args) {\n  let handlers = dialogHandlers[name];\n  let shouldClose = name !== 'close';\n  try {\n    if (handlers) {\n      shouldClose = handlers.reduce((result, cb) => cb(args) && result, shouldClose);\n    }\n  } catch (err) {\n    console.error(err);\n  } finally {\n    delete dialogHandlers[name];\n  }\n  if (shouldClose) {\n    AP.dialog.close();\n  }\n}\n\nfunction registerHandler(event, callback) {\n  if (typeof callback === 'function') {\n    if (!dialogHandlers[event]) {\n      dialogHandlers[event] = [];\n    }\n    dialogHandlers[event].push(callback);\n  }\n}\n\nconst original_dialogCreate = AP._hostModules.dialog.create;\n\nAP.dialog.create = AP._hostModules.dialog.create = (...args) => {\n  const dialog = original_dialogCreate(...args);\n  /**\n   * Allows the add-on to register a callback function for the given event. The listener is only called once and must be re-registered if needed.\n   * @memberOf Dialog~Dialog\n   * @method on\n   * @param {String} event name of the event to listen for, such as 'close'.\n   * @param {Function} callback function to receive the event callback.\n   * @noDemo\n   * @example\n   * AP.require('dialog', function(dialog){\n   *   dialog.create(opts).on(\"close\", callbackFunc);\n   * });\n   */\n  dialog.on = util.deprecateApi(registerHandler,\n    'AP.dialog.on(\"close\", callback)', 'AP.events.on(\"dialog.close\", callback)', '5.0');\n  return dialog;\n};\n\nlet original_dialogGetButton = AP.dialog.getButton.prototype.constructor.bind({});\n\nAP.dialog.getButton = AP._hostModules.dialog.getButton = function(name) {\n  try {\n    const button = original_dialogGetButton(name);\n    /**\n     * Registers a function to be called when the button is clicked.\n     * @method bind\n     * @memberOf Dialog~DialogButton\n     * @param {Function} callback function to be triggered on click or programatically.\n     * @noDemo\n     * @example\n     * AP.require('dialog', function(dialog){\n     *   dialog.getButton('submit').bind(function(){\n     *     alert('clicked!');\n     *   });\n     * });\n     */\n    button.bind = util.deprecateApi((callback) => registerHandler(name, callback),\n      'AP.dialog.getDialogButton().bind()', 'AP.events.on(\"dialog.message\", callback)', '5.0');\n\n    return button;\n  } catch (e) {\n    return {};\n  }\n};\n\nlet original_dialogCreateButton = AP.dialog.createButton.prototype.constructor.bind({});\n\nAP.dialog.createButton = AP._hostModules.dialog.createButton = function(options) {\n  let buttonProperties = {};\n  if(typeof options !== \"object\") {\n    buttonProperties.text = options;\n    buttonProperties.identifier = options;\n  } else {\n    buttonProperties = options;\n  }\n  if(!buttonProperties.identifier) {\n    buttonProperties.identifier = 'user.button.' + customButtonIncrement++;\n  }\n  let createButton = original_dialogCreateButton(buttonProperties);\n  return AP.dialog.getButton(buttonProperties.identifier);\n};\n\nAP.dialog.onDialogMessage = AP._hostModules.dialog.onDialogMessage = util.deprecateApi(registerHandler,\n  'AP.dialog.onDialogMessage()', 'AP.events.on(\"dialog.message\", callback)', '5.0');\n\nif(!AP.Dialog){\n  AP.Dialog = AP._hostModules.Dialog = AP.dialog;\n}","import util from './util';\n\nvar each = util.each,\n  extend = util.extend,\n  document = window.document;\n\nfunction $(sel, context) {\n\n  context = context || document;\n\n  var els = [];\n  if (sel) {\n    if (typeof sel === 'string') {\n      var results = context.querySelectorAll(sel);\n      each(results, function (i, v) { els.push(v); });\n    }\n    else if (sel.nodeType === 1) {\n      els.push(sel);\n    }\n    else if (sel === window) {\n      els.push(sel);\n    }\n  }\n\n  extend(els, {\n    each: function (it) {\n      each(this, it);\n      return this;\n    },\n    bind: function (name, callback) {\n      this.each(function (i, el) {\n        util.bind(el, name, callback);\n      });\n    },\n    attr: function (k) {\n      var v;\n      this.each(function (i, el) {\n        v = el[k] || (el.getAttribute && el.getAttribute(k));\n        return !v;\n      });\n      return v;\n    },\n    removeClass: function (className) {\n      return this.each(function (i, el) {\n        if (el.className) {\n          el.className = el.className.replace(new RegExp('(^|\\\\s)' + className + '(\\\\s|$)'), ' ');\n        }\n      });\n    },\n    html: function (html) {\n      return this.each(function (i, el) {\n        el.innerHTML = html;\n      });\n    },\n    append: function (spec) {\n      return this.each(function (i, to) {\n        var el = context.createElement(spec.tag);\n        each(spec, function (k, v) {\n          if (k === '$text') {\n            if (el.styleSheet) { // style tags in ie\n              el.styleSheet.cssText = v;\n            }\n            else {\n              el.appendChild(context.createTextNode(v));\n            }\n          }\n          else if (k !== 'tag') {\n            el[k] = v;\n          }\n        });\n        to.appendChild(el);\n      });\n    }\n  });\n\n  return els;\n}\n\nexport default extend($, util);","import $ from './dollar';\n/**\n * The Events module provides a mechanism for emitting and receiving events.\n * <h3>Basic example</h3>\n * ```\n * //The following will create an alert message every time the event `customEvent` is triggered.\n * AP.require('events', function(events){\n*   events.on('customEvent', function(){\n*       alert('event fired');\n*   });\n*   events.emit('customEvent');\n* });\n * ```\n * @name Events\n * @module\n */\nvar events = {};\nconst ANY_PREFIX = '_any';\nif(window.AP && window.AP.registerAny){\n  window.AP.registerAny(function(data, callback){\n    var eventName = callback._context.eventName;\n    var any = events[ANY_PREFIX] || [];\n    var byName = events[eventName] || [];\n\n    if(!Array.isArray(data)){\n      data = [data];\n    }\n\n    any.forEach((handler) => {\n      //clone data before modifying\n      var args = data.slice(0);\n      args.unshift(eventName);\n      args.push({\n        args: data,\n        name: eventName\n      });\n      handler.apply(null, args);\n    });\n\n    byName.forEach((handler) => {\n      handler.apply(null, data);\n    });\n  });\n}\n\nexport default {\n  off: function(name, listener){\n    var index = events[name].indexOf(listener);\n    events[name].splice(index, 1);\n  },\n  offAll: function(name){\n    delete events[name];\n  },\n  offAny: function(listener){\n    this.off(ANY_PREFIX, listener);\n  },\n  on: function(name, listener){\n    if(!events[name]){\n      events[name] = [];\n    }\n    events[name].push(listener);\n  },\n  onAny: function(listener){\n    this.on(ANY_PREFIX, listener);\n  },\n  once: function(name, listener){\n    this.on(name, function(){\n      listener.call(null, arguments);\n      this.off(name, listener);\n    });\n  }\n  /**\n   * Adds a listener for all occurrences of an event of a particular name.\n   * Listener arguments include any arguments passed to `events.emit`, followed by an object describing the complete event information.\n   * @name on\n   * @method\n   * @memberof module:Events#\n   * @param {String} name The event name to subscribe the listener to\n   * @param {Function} listener A listener callback to subscribe to the event name\n   */\n\n  /**\n   * Adds a listener for one occurrence of an event of a particular name.\n   * Listener arguments include any argument passed to `events.emit`, followed by an object describing the complete event information.\n   * @name once\n   * @method\n   * @memberof module:Events#\n   * @param {String} name The event name to subscribe the listener to\n   * @param {Function}listener A listener callback to subscribe to the event name\n   */\n\n  /**\n   * Adds a listener for all occurrences of any event, regardless of name.\n   * Listener arguments begin with the event name, followed by any arguments passed to `events.emit`, followed by an object describing the complete event information.\n   * @name onAny\n   * @method\n   * @memberof module:Events#\n   * @param {Function} listener A listener callback to subscribe for any event name\n   */\n\n  /**\n   * Removes a particular listener for an event.\n   * @name off\n   * @method\n   * @memberof module:Events#\n   * @param {String} name The event name to unsubscribe the listener from\n   * @param {Function} listener The listener callback to unsubscribe from the event name\n   */\n\n  /**\n   * Removes all listeners from an event name, or unsubscribes all event-name-specific listeners\n   * if no name if given.\n   * @name offAll\n   * @method\n   * @memberof module:Events#\n   * @param {String} [name] The event name to unsubscribe all listeners from\n   */\n\n  /**\n   * Removes an `any` event listener.\n   * @name offAny\n   * @method\n   * @memberof module:Events#\n   * @param {Function} listener A listener callback to unsubscribe from any event name\n   */\n\n  /**\n   * Emits an event on this bus, firing listeners by name as well as all 'any' listeners. Arguments following the\n   * name parameter are captured and passed to listeners.\n   * @name emit\n   * @method\n   * @memberof module:Events#\n   * @param {String} name The name of event to emit\n   * @param {String[]} args 0 or more additional data arguments to deliver with the event\n   */\n};\n\n","import util from './util';\nimport $ from './dollar';\nimport consumerOptions from './consumer-options';\nimport EventsModule from './events';\nimport DialogCompat from './dialog';\nimport amd from './amd';\n\nconst AMD = amd(AP);\nAP._hostModules._dollar = $;\n\nif(consumerOptions.get('sizeToParent') === true) {\n  AP.env.sizeToParent();\n}\n\n$.each(EventsModule, (i, method) => {\n  AP._hostModules.events[i] = AP.events[i] = method;\n});\n\nAP.define = util.deprecateApi((...args) => AMD.define(...args),\n  'AP.define()', null, '5.0');\n\nAP.require = util.deprecateApi((...args) => AMD.require(...args),\n  'AP.require()', null, '5.0');","// universal iterator utility\nfunction each(o, it) {\n  var l;\n  var k;\n  if (o) {\n    l = o.length;\n    if (l != null && typeof o !== 'function') {\n        k = 0;\n        while (k < l) {\n            if (it.call(o[k], k, o[k]) === false) break;\n            k += 1;\n          }\n      } else {\n        for (k in o) {\n            if (o.hasOwnProperty(k)) {\n                if (it.call(o[k], k, o[k]) === false) break;\n              }\n          }\n      }\n  }\n}\n\nfunction binder(std, odd) {\n  std += 'EventListener';\n  odd += 'Event';\n  return function (el, e, fn) {\n    if (el[std]) {\n        el[std](e, fn, false);\n      } else if (el[odd]) {\n          el[odd]('on' + e, fn);\n        }\n  };\n}\n\nfunction log() {\n  var console = this.console;\n  if (console && console.log) {\n    var args = [].slice.call(arguments);\n    if (console.log.apply) {\n        console.log.apply(console, args);\n      } else {\n        for (var i = 0, l = args.length; i < l; i += 1) {\n            args[i] = JSON.stringify(args[i]);\n          }\n        console.log(args.join(' '));\n      }\n    return true;\n  }\n}\n\nfunction decodeQueryComponent(encodedURI) {\n  return encodedURI == null ? null : decodeURIComponent(encodedURI.replace(/\\+/g, '%20'));\n}\n\nfunction deprecateApi(fn, name, alternate, sinceVersion) {\n  let called = false;\n  return (...args) => {\n    if (!called && typeof console !== 'undefined' && console.warn) {\n      called = true;\n      console.warn(`DEPRECATED API - ${name} has been deprecated since ACJS ${sinceVersion}` +\n        ` and will be removed in a future release. ${ alternate ? `Use ${alternate} instead.` : '' }`);\n    }\n    fn(...args);\n  }\n}\n\nexport default {\n  each,\n  log,\n  decodeQueryComponent,\n  deprecateApi,\n  bind: binder('add', 'attach'),\n  unbind: binder('remove', 'detach'),\n\n  extend: function (dest) {\n    var args = arguments;\n    var srcs = [].slice.call(args, 1, args.length);\n    each(srcs, function (i, src) {\n        each(src, function (k, v) {\n            dest[k] = v;\n          });\n      });\n    return dest;\n  },\n\n  trim: function (s) {\n    return s && s.replace(/^\\s+|\\s+$/g, '');\n  },\n\n  debounce: function (fn, wait) {\n    var timeout;\n    return function () {\n        var ctx = this;\n        var args = [].slice.call(arguments);\n        function later() {\n            timeout = null;\n            fn.apply(ctx, args);\n          }\n        if (timeout) {\n            clearTimeout(timeout);\n          }\n        timeout = setTimeout(later, wait || 50);\n      };\n  },\n\n  inArray: function (value, array, fromIndex) {\n        //optimisation for all browsers after IE8\n    if (Array.prototype.indexOf) {\n        return Array.prototype.indexOf.call(array, value, fromIndex);\n      }\n\n    var k = fromIndex >>> 0, len = array.length >>> 0;\n    for (; k < len; k += 1) {\n        if (array[k] === value) return k;\n      }\n    return -1;\n  },\n\n  isFunction: function (fn) {\n    return typeof fn === 'function';\n  },\n\n  handleError: function (err) {\n    if (!log.apply(this, err && err.message ? [err, err.message] : [err])) {\n        throw err;\n      }\n  }\n}"]}