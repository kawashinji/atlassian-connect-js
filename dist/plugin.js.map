{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/base-64/base64.js","node_modules/jsuri/Uri.js","node_modules/utf8/utf8.js","src/common/base64.js","src/common/dollar.js","src/common/dom-events.js","src/common/events.js","src/common/jwt.js","src/common/ui-params.js","src/common/uri.js","src/common/xdm-rpc.js","src/plugin/amd.js","src/plugin/dialog.js","src/plugin/dollar.js","src/plugin/env.js","src/plugin/events.js","src/plugin/index.js","src/plugin/inline-dialog.js","src/plugin/messages.js","src/plugin/propagate.js","src/plugin/resize_listener.js","src/plugin/rpc.js","src/plugin/util.js","../simple-xdm/dist/node_modules/simple-xdm/dist/node_modules/browser-pack/_prelude.js","../simple-xdm/src/host/index.js","../simple-xdm/src/common/postmessage.js","../simple-xdm/src/common/util.js","../simple-xdm/src/host/xdmrpc.js"],"names":[],"mappings":"AAAA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACrKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC5cA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;sBCpPmB,SAAS;;;;oBACX,MAAM;;;;qBAER;AACb,QAAM,EAAE,gBAAU,MAAM,EAAE;AACxB,WAAO,oBAAO,MAAM,CAAC,kBAAK,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;GAC3C;AACD,QAAM,EAAE,gBAAU,MAAM,EAAE;AACxB,WAAO,kBAAK,MAAM,CAAC,oBAAO,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;GAC3C;CACF;;;;;;;;;ACVD,IAAI,CAAC,CAAC;AACN,IAAI,OAAO,CAAC,GAAG,CAAC,GAAG,KAAK,MAAM,EAAE;AAC9B,GAAC,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC;CAC/B,MAAM;AACL,GAAC,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC;C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","file":"plugin.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */\n;(function(root) {\n\n\t// Detect free variables `exports`.\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`.\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code, and use\n\t// it as `root`.\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar InvalidCharacterError = function(message) {\n\t\tthis.message = message;\n\t};\n\tInvalidCharacterError.prototype = new Error;\n\tInvalidCharacterError.prototype.name = 'InvalidCharacterError';\n\n\tvar error = function(message) {\n\t\t// Note: the error messages used throughout this file match those used by\n\t\t// the native `atob`/`btoa` implementation in Chromium.\n\t\tthrow new InvalidCharacterError(message);\n\t};\n\n\tvar TABLE = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\t// http://whatwg.org/html/common-microsyntaxes.html#space-character\n\tvar REGEX_SPACE_CHARACTERS = /[\\t\\n\\f\\r ]/g;\n\n\t// `decode` is designed to be fully compatible with `atob` as described in the\n\t// HTML Standard. http://whatwg.org/html/webappapis.html#dom-windowbase64-atob\n\t// The optimized base64-decoding algorithm used is based on @atk’s excellent\n\t// implementation. https://gist.github.com/atk/1020396\n\tvar decode = function(input) {\n\t\tinput = String(input)\n\t\t\t.replace(REGEX_SPACE_CHARACTERS, '');\n\t\tvar length = input.length;\n\t\tif (length % 4 == 0) {\n\t\t\tinput = input.replace(/==?$/, '');\n\t\t\tlength = input.length;\n\t\t}\n\t\tif (\n\t\t\tlength % 4 == 1 ||\n\t\t\t// http://whatwg.org/C#alphanumeric-ascii-characters\n\t\t\t/[^+a-zA-Z0-9/]/.test(input)\n\t\t) {\n\t\t\terror(\n\t\t\t\t'Invalid character: the string to be decoded is not correctly encoded.'\n\t\t\t);\n\t\t}\n\t\tvar bitCounter = 0;\n\t\tvar bitStorage;\n\t\tvar buffer;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\twhile (++position < length) {\n\t\t\tbuffer = TABLE.indexOf(input.charAt(position));\n\t\t\tbitStorage = bitCounter % 4 ? bitStorage * 64 + buffer : buffer;\n\t\t\t// Unless this is the first of a group of 4 characters…\n\t\t\tif (bitCounter++ % 4) {\n\t\t\t\t// …convert the first 8 bits to a single ASCII character.\n\t\t\t\toutput += String.fromCharCode(\n\t\t\t\t\t0xFF & bitStorage >> (-2 * bitCounter & 6)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t};\n\n\t// `encode` is designed to be fully compatible with `btoa` as described in the\n\t// HTML Standard: http://whatwg.org/html/webappapis.html#dom-windowbase64-btoa\n\tvar encode = function(input) {\n\t\tinput = String(input);\n\t\tif (/[^\\0-\\xFF]/.test(input)) {\n\t\t\t// Note: no need to special-case astral symbols here, as surrogates are\n\t\t\t// matched, and the input is supposed to only contain ASCII anyway.\n\t\t\terror(\n\t\t\t\t'The string to be encoded contains characters outside of the ' +\n\t\t\t\t'Latin1 range.'\n\t\t\t);\n\t\t}\n\t\tvar padding = input.length % 3;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\tvar a;\n\t\tvar b;\n\t\tvar c;\n\t\tvar d;\n\t\tvar buffer;\n\t\t// Make sure any padding is handled outside of the loop.\n\t\tvar length = input.length - padding;\n\n\t\twhile (++position < length) {\n\t\t\t// Read three bytes, i.e. 24 bits.\n\t\t\ta = input.charCodeAt(position) << 16;\n\t\t\tb = input.charCodeAt(++position) << 8;\n\t\t\tc = input.charCodeAt(++position);\n\t\t\tbuffer = a + b + c;\n\t\t\t// Turn the 24 bits into four chunks of 6 bits each, and append the\n\t\t\t// matching character for each of them to the output.\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 18 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 12 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 6 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer & 0x3F)\n\t\t\t);\n\t\t}\n\n\t\tif (padding == 2) {\n\t\t\ta = input.charCodeAt(position) << 8;\n\t\t\tb = input.charCodeAt(++position);\n\t\t\tbuffer = a + b;\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 10) +\n\t\t\t\tTABLE.charAt((buffer >> 4) & 0x3F) +\n\t\t\t\tTABLE.charAt((buffer << 2) & 0x3F) +\n\t\t\t\t'='\n\t\t\t);\n\t\t} else if (padding == 1) {\n\t\t\tbuffer = input.charCodeAt(position);\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 2) +\n\t\t\t\tTABLE.charAt((buffer << 4) & 0x3F) +\n\t\t\t\t'=='\n\t\t\t);\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tvar base64 = {\n\t\t'encode': encode,\n\t\t'decode': decode,\n\t\t'version': '0.1.0'\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn base64;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = base64;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (var key in base64) {\n\t\t\t\tbase64.hasOwnProperty(key) && (freeExports[key] = base64[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.base64 = base64;\n\t}\n\n}(this));\n","/*!\n * jsUri\n * https://github.com/derek-watson/jsUri\n *\n * Copyright 2013, Derek Watson\n * Released under the MIT license.\n *\n * Includes parseUri regular expressions\n * http://blog.stevenlevithan.com/archives/parseuri\n * Copyright 2007, Steven Levithan\n * Released under the MIT license.\n */\n\n /*globals define, module */\n\n(function(global) {\n\n  var re = {\n    starts_with_slashes: /^\\/+/,\n    ends_with_slashes: /\\/+$/,\n    pluses: /\\+/g,\n    query_separator: /[&;]/,\n    uri_parser: /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@\\/]*)(?::([^:@]*))?)?@)?(\\[[0-9a-fA-F:.]+\\]|[^:\\/?#]*)(?::(\\d+|(?=:)))?(:)?)((((?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/\n  };\n\n  /**\n   * Define forEach for older js environments\n   * @see https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach#Compatibility\n   */\n  if (!Array.prototype.forEach) {\n    Array.prototype.forEach = function(callback, thisArg) {\n      var T, k;\n\n      if (this == null) {\n        throw new TypeError(' this is null or not defined');\n      }\n\n      var O = Object(this);\n      var len = O.length >>> 0;\n\n      if (typeof callback !== \"function\") {\n        throw new TypeError(callback + ' is not a function');\n      }\n\n      if (arguments.length > 1) {\n        T = thisArg;\n      }\n\n      k = 0;\n\n      while (k < len) {\n        var kValue;\n        if (k in O) {\n          kValue = O[k];\n          callback.call(T, kValue, k, O);\n        }\n        k++;\n      }\n    };\n  }\n\n  /**\n   * unescape a query param value\n   * @param  {string} s encoded value\n   * @return {string}   decoded value\n   */\n  function decode(s) {\n    if (s) {\n        s = s.toString().replace(re.pluses, '%20');\n        s = decodeURIComponent(s);\n    }\n    return s;\n  }\n\n  /**\n   * Breaks a uri string down into its individual parts\n   * @param  {string} str uri\n   * @return {object}     parts\n   */\n  function parseUri(str) {\n    var parser = re.uri_parser;\n    var parserKeys = [\"source\", \"protocol\", \"authority\", \"userInfo\", \"user\", \"password\", \"host\", \"port\", \"isColonUri\", \"relative\", \"path\", \"directory\", \"file\", \"query\", \"anchor\"];\n    var m = parser.exec(str || '');\n    var parts = {};\n\n    parserKeys.forEach(function(key, i) {\n      parts[key] = m[i] || '';\n    });\n\n    return parts;\n  }\n\n  /**\n   * Breaks a query string down into an array of key/value pairs\n   * @param  {string} str query\n   * @return {array}      array of arrays (key/value pairs)\n   */\n  function parseQuery(str) {\n    var i, ps, p, n, k, v, l;\n    var pairs = [];\n\n    if (typeof(str) === 'undefined' || str === null || str === '') {\n      return pairs;\n    }\n\n    if (str.indexOf('?') === 0) {\n      str = str.substring(1);\n    }\n\n    ps = str.toString().split(re.query_separator);\n\n    for (i = 0, l = ps.length; i < l; i++) {\n      p = ps[i];\n      n = p.indexOf('=');\n\n      if (n !== 0) {\n        k = decode(p.substring(0, n));\n        v = decode(p.substring(n + 1));\n        pairs.push(n === -1 ? [p, null] : [k, v]);\n      }\n\n    }\n    return pairs;\n  }\n\n  /**\n   * Creates a new Uri object\n   * @constructor\n   * @param {string} str\n   */\n  function Uri(str) {\n    this.uriParts = parseUri(str);\n    this.queryPairs = parseQuery(this.uriParts.query);\n    this.hasAuthorityPrefixUserPref = null;\n  }\n\n  /**\n   * Define getter/setter methods\n   */\n  ['protocol', 'userInfo', 'host', 'port', 'path', 'anchor'].forEach(function(key) {\n    Uri.prototype[key] = function(val) {\n      if (typeof val !== 'undefined') {\n        this.uriParts[key] = val;\n      }\n      return this.uriParts[key];\n    };\n  });\n\n  /**\n   * if there is no protocol, the leading // can be enabled or disabled\n   * @param  {Boolean}  val\n   * @return {Boolean}\n   */\n  Uri.prototype.hasAuthorityPrefix = function(val) {\n    if (typeof val !== 'undefined') {\n      this.hasAuthorityPrefixUserPref = val;\n    }\n\n    if (this.hasAuthorityPrefixUserPref === null) {\n      return (this.uriParts.source.indexOf('//') !== -1);\n    } else {\n      return this.hasAuthorityPrefixUserPref;\n    }\n  };\n\n  Uri.prototype.isColonUri = function (val) {\n    if (typeof val !== 'undefined') {\n      this.uriParts.isColonUri = !!val;\n    } else {\n      return !!this.uriParts.isColonUri;\n    }\n  };\n\n  /**\n   * Serializes the internal state of the query pairs\n   * @param  {string} [val]   set a new query string\n   * @return {string}         query string\n   */\n  Uri.prototype.query = function(val) {\n    var s = '', i, param, l;\n\n    if (typeof val !== 'undefined') {\n      this.queryPairs = parseQuery(val);\n    }\n\n    for (i = 0, l = this.queryPairs.length; i < l; i++) {\n      param = this.queryPairs[i];\n      if (s.length > 0) {\n        s += '&';\n      }\n      if (param[1] === null) {\n        s += param[0];\n      } else {\n        s += param[0];\n        s += '=';\n        if (typeof param[1] !== 'undefined') {\n          s += encodeURIComponent(param[1]);\n        }\n      }\n    }\n    return s.length > 0 ? '?' + s : s;\n  };\n\n  /**\n   * returns the first query param value found for the key\n   * @param  {string} key query key\n   * @return {string}     first value found for key\n   */\n  Uri.prototype.getQueryParamValue = function (key) {\n    var param, i, l;\n    for (i = 0, l = this.queryPairs.length; i < l; i++) {\n      param = this.queryPairs[i];\n      if (key === param[0]) {\n        return param[1];\n      }\n    }\n  };\n\n  /**\n   * returns an array of query param values for the key\n   * @param  {string} key query key\n   * @return {array}      array of values\n   */\n  Uri.prototype.getQueryParamValues = function (key) {\n    var arr = [], i, param, l;\n    for (i = 0, l = this.queryPairs.length; i < l; i++) {\n      param = this.queryPairs[i];\n      if (key === param[0]) {\n        arr.push(param[1]);\n      }\n    }\n    return arr;\n  };\n\n  /**\n   * removes query parameters\n   * @param  {string} key     remove values for key\n   * @param  {val}    [val]   remove a specific value, otherwise removes all\n   * @return {Uri}            returns self for fluent chaining\n   */\n  Uri.prototype.deleteQueryParam = function (key, val) {\n    var arr = [], i, param, keyMatchesFilter, valMatchesFilter, l;\n\n    for (i = 0, l = this.queryPairs.length; i < l; i++) {\n\n      param = this.queryPairs[i];\n      keyMatchesFilter = decode(param[0]) === decode(key);\n      valMatchesFilter = param[1] === val;\n\n      if ((arguments.length === 1 && !keyMatchesFilter) || (arguments.length === 2 && (!keyMatchesFilter || !valMatchesFilter))) {\n        arr.push(param);\n      }\n    }\n\n    this.queryPairs = arr;\n\n    return this;\n  };\n\n  /**\n   * adds a query parameter\n   * @param  {string}  key        add values for key\n   * @param  {string}  val        value to add\n   * @param  {integer} [index]    specific index to add the value at\n   * @return {Uri}                returns self for fluent chaining\n   */\n  Uri.prototype.addQueryParam = function (key, val, index) {\n    if (arguments.length === 3 && index !== -1) {\n      index = Math.min(index, this.queryPairs.length);\n      this.queryPairs.splice(index, 0, [key, val]);\n    } else if (arguments.length > 0) {\n      this.queryPairs.push([key, val]);\n    }\n    return this;\n  };\n\n  /**\n   * test for the existence of a query parameter\n   * @param  {string}  key        add values for key\n   * @param  {string}  val        value to add\n   * @param  {integer} [index]    specific index to add the value at\n   * @return {Uri}                returns self for fluent chaining\n   */\n  Uri.prototype.hasQueryParam = function (key) {\n    var i, len = this.queryPairs.length;\n    for (i = 0; i < len; i++) {\n      if (this.queryPairs[i][0] == key)\n        return true;\n    }\n    return false;\n  };\n\n  /**\n   * replaces query param values\n   * @param  {string} key         key to replace value for\n   * @param  {string} newVal      new value\n   * @param  {string} [oldVal]    replace only one specific value (otherwise replaces all)\n   * @return {Uri}                returns self for fluent chaining\n   */\n  Uri.prototype.replaceQueryParam = function (key, newVal, oldVal) {\n    var index = -1, len = this.queryPairs.length, i, param;\n\n    if (arguments.length === 3) {\n      for (i = 0; i < len; i++) {\n        param = this.queryPairs[i];\n        if (decode(param[0]) === decode(key) && decodeURIComponent(param[1]) === decode(oldVal)) {\n          index = i;\n          break;\n        }\n      }\n      if (index >= 0) {\n        this.deleteQueryParam(key, decode(oldVal)).addQueryParam(key, newVal, index);\n      }\n    } else {\n      for (i = 0; i < len; i++) {\n        param = this.queryPairs[i];\n        if (decode(param[0]) === decode(key)) {\n          index = i;\n          break;\n        }\n      }\n      this.deleteQueryParam(key);\n      this.addQueryParam(key, newVal, index);\n    }\n    return this;\n  };\n\n  /**\n   * Define fluent setter methods (setProtocol, setHasAuthorityPrefix, etc)\n   */\n  ['protocol', 'hasAuthorityPrefix', 'isColonUri', 'userInfo', 'host', 'port', 'path', 'query', 'anchor'].forEach(function(key) {\n    var method = 'set' + key.charAt(0).toUpperCase() + key.slice(1);\n    Uri.prototype[method] = function(val) {\n      this[key](val);\n      return this;\n    };\n  });\n\n  /**\n   * Scheme name, colon and doubleslash, as required\n   * @return {string} http:// or possibly just //\n   */\n  Uri.prototype.scheme = function() {\n    var s = '';\n\n    if (this.protocol()) {\n      s += this.protocol();\n      if (this.protocol().indexOf(':') !== this.protocol().length - 1) {\n        s += ':';\n      }\n      s += '//';\n    } else {\n      if (this.hasAuthorityPrefix() && this.host()) {\n        s += '//';\n      }\n    }\n\n    return s;\n  };\n\n  /**\n   * Same as Mozilla nsIURI.prePath\n   * @return {string} scheme://user:password@host:port\n   * @see  https://developer.mozilla.org/en/nsIURI\n   */\n  Uri.prototype.origin = function() {\n    var s = this.scheme();\n\n    if (this.userInfo() && this.host()) {\n      s += this.userInfo();\n      if (this.userInfo().indexOf('@') !== this.userInfo().length - 1) {\n        s += '@';\n      }\n    }\n\n    if (this.host()) {\n      s += this.host();\n      if (this.port() || (this.path() && this.path().substr(0, 1).match(/[0-9]/))) {\n        s += ':' + this.port();\n      }\n    }\n\n    return s;\n  };\n\n  /**\n   * Adds a trailing slash to the path\n   */\n  Uri.prototype.addTrailingSlash = function() {\n    var path = this.path() || '';\n\n    if (path.substr(-1) !== '/') {\n      this.path(path + '/');\n    }\n\n    return this;\n  };\n\n  /**\n   * Serializes the internal state of the Uri object\n   * @return {string}\n   */\n  Uri.prototype.toString = function() {\n    var path, s = this.origin();\n\n    if (this.isColonUri()) {\n      if (this.path()) {\n        s += ':'+this.path();\n      }\n    } else if (this.path()) {\n      path = this.path();\n      if (!(re.ends_with_slashes.test(s) || re.starts_with_slashes.test(path))) {\n        s += '/';\n      } else {\n        if (s) {\n          s.replace(re.ends_with_slashes, '/');\n        }\n        path = path.replace(re.starts_with_slashes, '/');\n      }\n      s += path;\n    } else {\n      if (this.host() && (this.query().toString() || this.anchor())) {\n        s += '/';\n      }\n    }\n    if (this.query().toString()) {\n      s += this.query().toString();\n    }\n\n    if (this.anchor()) {\n      if (this.anchor().indexOf('#') !== 0) {\n        s += '#';\n      }\n      s += this.anchor();\n    }\n\n    return s;\n  };\n\n  /**\n   * Clone a Uri object\n   * @return {Uri} duplicate copy of the Uri\n   */\n  Uri.prototype.clone = function() {\n    return new Uri(this.toString());\n  };\n\n  /**\n   * export via AMD or CommonJS, otherwise leak a global\n   */\n  if (typeof define === 'function' && define.amd) {\n    define(function() {\n      return Uri;\n    });\n  } else if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\n    module.exports = Uri;\n  } else {\n    global.Uri = Uri;\n  }\n}(this));\n","/*! https://mths.be/utf8js v2.0.0 by @mathias */\n;(function(root) {\n\n\t// Detect free variables `exports`\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code,\n\t// and use it as `root`\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar stringFromCharCode = String.fromCharCode;\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2decode(string) {\n\t\tvar output = [];\n\t\tvar counter = 0;\n\t\tvar length = string.length;\n\t\tvar value;\n\t\tvar extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2encode(array) {\n\t\tvar length = array.length;\n\t\tvar index = -1;\n\t\tvar value;\n\t\tvar output = '';\n\t\twhile (++index < length) {\n\t\t\tvalue = array[index];\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t}\n\t\treturn output;\n\t}\n\n\tfunction checkScalarValue(codePoint) {\n\t\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\t\tthrow Error(\n\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t' is not a scalar value'\n\t\t\t);\n\t\t}\n\t}\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction createByte(codePoint, shift) {\n\t\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n\t}\n\n\tfunction encodeCodePoint(codePoint) {\n\t\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\t\treturn stringFromCharCode(codePoint);\n\t\t}\n\t\tvar symbol = '';\n\t\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t\t}\n\t\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\t\tcheckScalarValue(codePoint);\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\t\tsymbol += createByte(codePoint, 12);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\t\treturn symbol;\n\t}\n\n\tfunction utf8encode(string) {\n\t\tvar codePoints = ucs2decode(string);\n\t\tvar length = codePoints.length;\n\t\tvar index = -1;\n\t\tvar codePoint;\n\t\tvar byteString = '';\n\t\twhile (++index < length) {\n\t\t\tcodePoint = codePoints[index];\n\t\t\tbyteString += encodeCodePoint(codePoint);\n\t\t}\n\t\treturn byteString;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction readContinuationByte() {\n\t\tif (byteIndex >= byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\tif ((continuationByte & 0xC0) == 0x80) {\n\t\t\treturn continuationByte & 0x3F;\n\t\t}\n\n\t\t// If we end up here, it’s not a continuation byte\n\t\tthrow Error('Invalid continuation byte');\n\t}\n\n\tfunction decodeSymbol() {\n\t\tvar byte1;\n\t\tvar byte2;\n\t\tvar byte3;\n\t\tvar byte4;\n\t\tvar codePoint;\n\n\t\tif (byteIndex > byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tif (byteIndex == byteCount) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Read first byte\n\t\tbyte1 = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\t// 1-byte sequence (no continuation bytes)\n\t\tif ((byte1 & 0x80) == 0) {\n\t\t\treturn byte1;\n\t\t}\n\n\t\t// 2-byte sequence\n\t\tif ((byte1 & 0xE0) == 0xC0) {\n\t\t\tvar byte2 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\t\tif (codePoint >= 0x80) {\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 3-byte sequence (may include unpaired surrogates)\n\t\tif ((byte1 & 0xF0) == 0xE0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\t\tif (codePoint >= 0x0800) {\n\t\t\t\tcheckScalarValue(codePoint);\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 4-byte sequence\n\t\tif ((byte1 & 0xF8) == 0xF0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tbyte4 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x0F) << 0x12) | (byte2 << 0x0C) |\n\t\t\t\t(byte3 << 0x06) | byte4;\n\t\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\t\treturn codePoint;\n\t\t\t}\n\t\t}\n\n\t\tthrow Error('Invalid UTF-8 detected');\n\t}\n\n\tvar byteArray;\n\tvar byteCount;\n\tvar byteIndex;\n\tfunction utf8decode(byteString) {\n\t\tbyteArray = ucs2decode(byteString);\n\t\tbyteCount = byteArray.length;\n\t\tbyteIndex = 0;\n\t\tvar codePoints = [];\n\t\tvar tmp;\n\t\twhile ((tmp = decodeSymbol()) !== false) {\n\t\t\tcodePoints.push(tmp);\n\t\t}\n\t\treturn ucs2encode(codePoints);\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar utf8 = {\n\t\t'version': '2.0.0',\n\t\t'encode': utf8encode,\n\t\t'decode': utf8decode\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn utf8;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = utf8;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tvar object = {};\n\t\t\tvar hasOwnProperty = object.hasOwnProperty;\n\t\t\tfor (var key in utf8) {\n\t\t\t\thasOwnProperty.call(utf8, key) && (freeExports[key] = utf8[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.utf8 = utf8;\n\t}\n\n}(this));\n","import base64 from 'base-64';\nimport utf8 from 'utf8';\n\nexport default {\n  encode: function (string) {\n    return base64.encode(utf8.encode(string));\n  },\n  decode: function (string) {\n    return utf8.decode(base64.decode(string));\n  }\n};","var $;\nif (process.env.ENV === 'host') {\n  $ = require('../host/dollar');\n} else {\n  $ = require('../plugin/dollar');\n}\n\nexport default $;","'use strict';\n/**\n * Common methods for propagating DOM events between host/plugin iframes\n */\n\nvar w = window;\nvar log = (w.AJS && w.AJS.log) || (w.console && w.console.log) || function () {};\n\nconst SUPPORTED_MOUSE_EVENTS = [\n  'click'\n];\n\nconst SUPPORTED_KEYBOARD_EVENTS = [\n  'keydown',\n  'keyup'\n];\n\nconst ALLOWED_KEYCODES = [\n  27 // ESCAPE\n];\n\nvar boundEvents = {};\n\nexport default  {\n  // Public API\n  bindListeners,\n  unbindListeners,\n  receiveEvent,\n\n  // Visible for testing only\n  constructLegacyModifierString,\n  supportedMouseEvents: SUPPORTED_MOUSE_EVENTS,\n  supportedKeyboardEvents: SUPPORTED_KEYBOARD_EVENTS,\n  isAllowedKeyCode,\n  createEvent\n};\n\nfunction _attachEvents(callback){\n  if(boundEvents.length > 0){\n    log('events already bound');\n    return false;\n  }\n\n  var events = [].concat(SUPPORTED_MOUSE_EVENTS, SUPPORTED_KEYBOARD_EVENTS);\n  events.forEach((event) => {\n    boundEvents[event] = callback;\n    document.addEventListener(event, callback);\n  });\n}\n\nfunction _sanitizeEvent(e){\n  var sanitizedEvent;\n  if(e.keyCode) {\n    if(isAllowedKeyCode(e.keyCode)){\n      sanitizedEvent = sanitiseKeyboardEvent(e);\n    }\n  } else {\n    sanitizedEvent = sanitiseMouseEvent(e);\n  }\n  return sanitizedEvent;\n}\n\n/**\n * Bind listeners to the document to propagate events to the rpc endpoint\n *\n * @param {String} channelKey The unique key that identifies the rpc channel the listeners are bound to\n * @param {function} endpoint The rpc endpoint to send events to\n */\nfunction bindListeners(channelKey, endpoint) {\n  _attachEvents(function(e){\n    var sanitized = _sanitizeEvent(e);\n    if (e.channelKey === channelKey) {\n      return;\n    }\n    endpoint(channelKey, e.type, sanitized);\n  });\n}\n\nfunction unbindListeners() {\n  var eventNames = Object.getOwnPropertyNames(boundEvents);\n  eventNames.forEach((e) => {\n    document.removeEventListener(e, boundEvents[e]);\n  });\n  boundEvents = {};\n}\n\n/**\n * Receive a DOM event from the remote and dispatch to this page,\n * unless we have already seen it.\n *\n * @param {String} channelKey The channel identifier\n * @param {String} eventName The event received\n * @param {EventInit} eventData The data to attach to the event\n */\nfunction receiveEvent(channelKey, eventName, eventData) {\n  let event = createEvent(channelKey, eventName, eventData);\n  if (!event) {\n    return;\n  }\n\n  dispatchEvent(event);\n}\n\n/**\n * Return a sanitised data object that can be used to re-create\n * a synthetic click event\n *\n * @param {MouseEvent} mouseEvent The event to sanitise\n * @return {MouseEventInit} Sanitised data suitable for sending between iframes\n */\nfunction sanitiseMouseEvent(mouseEvent) {\n  return {\n    bubbles: true,\n    cancelable: true,\n    button: mouseEvent.button,\n    ctrlKey: mouseEvent.ctrlKey,\n    shiftKey: mouseEvent.shiftKey,\n    altKey: mouseEvent.altKey,\n    metaKey: mouseEvent.metaKey\n  };\n}\n\n/**\n * Return a sanitised data object that can be used to\n * re-create a synthetic keyboard event.\n *\n * @param {KeyboardEvent} keyboardEvent The event to sanitise\n * @return {KeyboardEventInit} Sanities data suitable for sending between iframes\n */\nfunction sanitiseKeyboardEvent(keyboardEvent) {\n  return {\n    bubbles: true,\n    cancelable: true,\n    key: keyboardEvent.key,\n    code: keyboardEvent.code,\n    keyCode: keyboardEvent.keyCode,\n    ctrlKey: keyboardEvent.ctrlKey,\n    shiftKey: keyboardEvent.shiftKey,\n    altKey: keyboardEvent.altKey,\n    metaKey: keyboardEvent.metaKey,\n    locale: null\n  };\n}\n\n/**\n * Create a synthetic DOM event using the provided data\n *\n * The returned event will include a param <code>channelKey</code> that can be\n * used to identify which channel the event was received on.\n *\n * @param {String} channelKey The key for the channel the event was received on\n * @param {String} eventName The name of the event to create\n * @param {KeyboardEventInit|MouseEventInit} eventData The data to create the event with\n *\n * @returns {KeyboardEvent|MouseEvent} The constructed synthetic event\n */\nfunction createEvent(channelKey, eventName, eventData) {\n  eventData.view = window;\n\n  let event;\n  if (SUPPORTED_MOUSE_EVENTS.indexOf(eventName) > -1) {\n    if (typeof window.Event === 'function') {\n      event = new MouseEvent(eventName, eventData);\n    }\n    else {\n      // To support older browsers\n      // (e.g. IE - https://msdn.microsoft.com/en-us/library/dn905219%28v=vs.85%29.aspx)\n      event = document.createEvent('MouseEvent');\n      event.initMouseEvent(eventName,\n          eventData.bubbles, eventData.cancelable, eventData.view,\n          0, 0, 0, 0, 0,\n          eventData.ctrlKey, eventData.altKey, eventData.shiftKey,\n          eventData.metaKey, eventData.button, null);\n    }\n  }\n  else if (SUPPORTED_KEYBOARD_EVENTS.indexOf(eventName) > -1) {\n    if (typeof window.Event === 'function') {\n      event = new KeyboardEvent(eventName, eventData);\n    }\n    else {\n      // To support older browsers\n      // (e.g. IE - https://msdn.microsoft.com/en-us/library/dn905219%28v=vs.85%29.aspx)\n      event = document.createEvent('KeyboardEvent');\n      event.initKeyboardEvent(eventName,\n          eventData.bubbles, eventData.cancelable, eventData.view,\n          eventData.key, 0, constructLegacyModifierString(eventData),\n          false, eventData.locale);\n    }\n  }\n  else {\n    log('Event ' + eventName + ' not supported');\n  }\n\n  if (event) {\n    event.channelKey = channelKey;\n  }\n  return event;\n}\n\n/**\n * Dispatch the given event to the current document\n *\n * Includes some AUI-specific dispatch if AUI is detected to ensure dialogs work correctly etc.\n *\n * @param event The event to dispatch\n */\nfunction dispatchEvent(event) {\n  document.body.dispatchEvent(event);\n\n  if (AJS && event.type === 'click') {\n    // If AJS is present we should fire the event on dialog curtains\n    // if they exist, to ensure AUI dialogs etc. are dismissed.\n    var blanket = AJS.$('.aui-blanket');\n    if (blanket.length > 0 && blanket[0]) {\n      blanket[0].dispatchEvent(event);\n    }\n  }\n}\n\n/**\n * Construct the legacy DOM L3 key modifier string required for pre-L4 keyboard event initialisation\n * @see https://msdn.microsoft.com/en-us/library/ff975297%28v=vs.85%29.aspx\n *\n * @param {KeyboardEventInit} eventData The data to create the modifier string from\n * @returns {String} The modifier string (e.g. \"Ctr,Shift\")\n */\nfunction constructLegacyModifierString(eventData) {\n  let result = [];\n  if (eventData.shiftKey) {\n    result.push('Shift');\n  }\n  if (eventData.ctrlKey) {\n    result.push('Ctrl');\n  }\n  if (eventData.metaKey) {\n    result.push('Meta');\n  }\n  if (eventData.altKey) {\n    result.push('Alt');\n  }\n  return result.join(',');\n}\n\n/**\n * Determine if the provided keycode is allowed to be propagated between iframes\n *\n * @param {Number} keyCode The keycode to test\n *\n * @returns {boolean} Whether the provided keycode is allowed to be propagated between iframes\n */\nfunction isAllowedKeyCode(keyCode) {\n  return ALLOWED_KEYCODES.indexOf(keyCode) > -1;\n}","import $ from './dollar';\n\nvar w = window;\nvar log = (w.AJS && w.AJS.log) || (w.console && w.console.log) || (function () {});\n\n/**\n * A simple pub/sub event bus capable of running on either side of the XDM bridge with no external\n * JS lib dependencies.\n *\n * @param {String} key The key of the event source\n * @param {String} origin The origin of the event source\n * @constructor\n */\nfunction Events(key, origin) {\n  this._key = key;\n  this._origin = origin;\n  this._events = {};\n  this._any = [];\n}\n\nvar proto = Events.prototype;\n\n/**\n * Subscribes a callback to an event name.\n *\n * @param {String} name The event name to subscribe the listener to\n * @param {Function} listener A listener callback to subscribe to the event name\n * @returns {Events} This Events instance\n */\nproto.on = function (name, listener) {\n  if (name && listener) {\n    this._listeners(name).push(listener);\n  }\n  return this;\n};\n\n/**\n * Subscribes a callback to an event name, removing the it once fired.\n *\n * @param {String} name The event name to subscribe the listener to\n * @param {Function}listener A listener callback to subscribe to the event name\n * @returns {Events} This Events instance\n */\nproto.once = function (name, listener) {\n  var self = this;\n  var interceptor = function () {\n    self.off(name, interceptor);\n    listener.apply(null, arguments);\n  };\n  this.on(name, interceptor);\n  return this;\n};\n\n/**\n * Subscribes a callback to all events, regardless of name.\n *\n * @param {Function} listener A listener callback to subscribe for any event name\n * @returns {Events} This Events instance\n */\nproto.onAny = function (listener) {\n  this._any.push(listener);\n  return this;\n};\n\n/**\n * Unsubscribes a callback to an event name.\n *\n * @param {String} name The event name to unsubscribe the listener from\n * @param {Function} listener The listener callback to unsubscribe from the event name\n * @returns {Events} This Events instance\n */\nproto.off = function (name, listener) {\n  var all = this._events[name];\n  if (all) {\n    var i = $.inArray(listener, all);\n    if (i >= 0) {\n      all.splice(i, 1);\n    }\n    if (all.length === 0) {\n      delete this._events[name];\n    }\n  }\n  return this;\n};\n\n/**\n * Unsubscribes all callbacks from an event name, or unsubscribes all event-name-specific listeners\n * if no name if given.\n *\n * @param {String} [name] The event name to unsubscribe all listeners from\n * @returns {Events} This Events instance\n */\nproto.offAll = function (name) {\n  if (name) {\n    delete this._events[name];\n  } else {\n    this._events = {};\n  }\n  return this;\n};\n\n/**\n * Unsubscribes a callback from the set of 'any' event listeners.\n *\n * @param {Function} listener A listener callback to unsubscribe from any event name\n * @returns {Events} This Events instance\n */\nproto.offAny = function (listener) {\n  var any = this._any;\n  var i = $.inArray(listener, any);\n  if (i >= 0) {\n    any.splice(i, 1);\n  }\n  return this;\n};\n\n/**\n * Emits an event on this bus, firing listeners by name as well as all 'any' listeners. Arguments following the\n * name parameter are captured and passed to listeners.  The last argument received by all listeners after the\n * unpacked arguments array will be the fired event object itself, which can be useful for reacting to event\n * metadata (e.g. the bus's namespace).\n *\n * @param {String} name The name of event to emit\n * @param {Array.<String>} args 0 or more additional data arguments to deliver with the event\n * @returns {Events} This Events instance\n */\nproto.emit = function (name) {\n  return this._emitEvent(this._event.apply(this, arguments));\n};\n\n/**\n * Creates an opaque event object from an argument list containing at least a name, and optionally additional\n * event payload arguments.\n *\n * @param {String} name The name of event to emit\n * @param {Array.<String>} args 0 or more additional data arguments to deliver with the event\n * @returns {Object} A new event object\n * @private\n */\nproto._event = function (name) {\n  return {\n    name: name,\n    args: [].slice.call(arguments, 1),\n    attrs: {},\n    source: {\n      key: this._key,\n      origin: this._origin\n    }\n  };\n};\n\n/**\n * Emits a previously-constructed event object to all listeners.\n *\n * @param {Object} event The event object to emit\n * @param {String} event.name The name of the event\n * @param {Object} event.source Metadata about the original source of the event, containing key and origin\n * @param {Array} event.args The args passed to emit, to be delivered to listeners\n * @returns {Events} This Events instance\n * @private\n */\nproto._emitEvent = function (event) {\n  var args = event.args.concat(event);\n  fire(this._listeners(event.name), args);\n  fire(this._any, [event.name].concat(args));\n  return this;\n};\n\n/**\n * Returns an array of listeners by event name, creating a new name array if none are found.\n *\n * @param {String} name The event name for which listeners should be returned\n * @returns {Array} An array of listeners; empty if none are registered\n * @private\n */\nproto._listeners = function (name) {\n  return this._events[name] = this._events[name] || [];\n};\n\n// Internal helper for firing an event to an array of listeners\nfunction fire(listeners, args) {\n  for (var i = 0; i < listeners.length; ++i) {\n    try {\n      listeners[i].apply(null, args);\n    } catch (e) {\n      log(e.stack || e.message || e);\n    }\n  }\n}\n\nexport default {Events: Events}","import base64 from './base64';\n\nfunction parseJwtIssuer(jwt) {\n  return parseJwtClaims(jwt)['iss'];\n}\n\nfunction parseJwtClaims(jwt) {\n\n  if (null === jwt || '' === jwt) {\n    throw('Invalid JWT: must be neither null nor empty-string.');\n  }\n\n  var firstPeriodIndex = jwt.indexOf('.');\n  var secondPeriodIndex = jwt.indexOf('.', firstPeriodIndex + 1);\n\n  if (firstPeriodIndex < 0 || secondPeriodIndex <= firstPeriodIndex) {\n    throw('Invalid JWT: must contain 2 period (\".\") characters.');\n  }\n\n  var encodedClaims = jwt.substring(firstPeriodIndex + 1, secondPeriodIndex);\n\n  if (null === encodedClaims || '' === encodedClaims) {\n    throw('Invalid JWT: encoded claims must be neither null nor empty-string.');\n  }\n\n  var claimsString = base64.decode.call(window, encodedClaims);\n  return JSON.parse(claimsString);\n}\n\nfunction isJwtExpired(jwtString, skew) {\n  if (skew === undefined) {\n    skew = 60; // give a minute of leeway to allow clock skew\n  }\n  var claims = parseJwtClaims(jwtString);\n  var expires = 0;\n  var now = Math.floor(Date.now() / 1000); // UTC timestamp now\n\n  if (claims && claims.exp) {\n    expires = claims.exp;\n  }\n\n  if ((expires - now) < skew) {\n    return true;\n  }\n\n  return false;\n\n}\n\n\nexport default {\n  parseJwtIssuer,\n  parseJwtClaims,\n  isJwtExpired\n}","import base64 from './base64';\nimport uri from './uri';\n/**\n * These are passed into the main host create statement and can override\n * any options inside the velocity template.\n * Additionally these are accessed by the js inside the client iframe to check if we are in a dialog.\n */\n\nexport default {\n  /**\n   * Encode options for transport\n   */\n  encode: function (options) {\n    if (options) {\n      var str = JSON.stringify(options);\n      return base64.encode.call(window, str);\n    }\n  },\n  /**\n   * return ui params from a Url\n   **/\n  fromUrl: function (url) {\n    var params = new uri.init(url).getQueryParamValue('ui-params');\n    return this.decode(params);\n  },\n  /**\n   * returns ui params from window.name\n   */\n  fromWindowName: function (w, param) {\n    w = w || window;\n    var decoded = this.decode(w.name);\n\n    if (!param) {\n      return decoded;\n    }\n    return (decoded) ? decoded[param] : undefined;\n  },\n  /**\n   * Decode a base64 encoded json string containing ui params\n   */\n  decode: function (params) {\n    var obj = {};\n    if (params && params.length > 0) {\n      try {\n        obj = JSON.parse(base64.decode.call(window, params));\n      } catch (e) {\n        if (console && console.log) {\n          console.log('Cannot decode passed ui params', params);\n        }\n      }\n    }\n    return obj;\n  }\n};","import Uri from 'jsuri';\n\nexport default {init: Uri}","import events from './events';\nimport jwt from './jwt';\nimport uri from './uri';\nimport uiParams from './ui-params';\nimport simpleXdm from 'simple-xdm/dist/host';\nimport $ from './dollar';\n\nfunction XdmRpc($, config, bindings) {\n\n    var extension = {\n        addon_key: config.remoteKey,\n        key: config.moduleKey,\n        url: config.remote\n    };\n\n    Object.getOwnPropertyNames(bindings.local).forEach(function (name) {\n        if(typeof bindings.local[name] === \"object\") {\n            simpleXdm.defineModule(name, bindings.local[name]);\n        }\n    });\n    var create = simpleXdm.create(extension, function(extension_id){\n        console.log('i initd', extension_id);\n    });\n\n\n    //create iframe tag\n    var props = $.extend({frameBorder: '0'}, config.props, create);\n    props.id = 'easyXDM_' + config.container + '_provider';\n    \n    var iframe = $(\"<iframe />\").attr(props)[0];\n    iframe.setAttribute('rel', 'nofollow');\n\n    $('body').append(iframe);\n    $(iframe).trigger('ra.iframe.create');\n\n}   \n\n\nexport default XdmRpc;","import util from './util';\nimport $ from './dollar';\nimport _events from '../common/events';\nimport base64 from '../common/base64';\nimport uri from '../common/uri';\nimport uiParams from '../common/ui-params';\nimport xdm from '../common/xdm-rpc';\nimport rpc from './rpc';\nimport events from './events';\nimport env from './env';\n\nimport messages from './messages';\nimport dialog from './dialog';\nimport inlineDialog from './inline-dialog';\nimport resize_listener from './resize_listener';\n// pre-populate all the old core modules for the old AP.require syntax.\n\nvar modules = {\n  '_util': {exports: util},\n  '_dollar': {exports: $},\n  '_events': {exports: _events},\n  '_base64': {exports: base64},\n  '_uri': {exports: uri},\n  '_ui-params': {exports: uiParams},\n  '_xdm': {exports: xdm},\n  '_rpc': {exports: rpc},\n  'events': {exports: events},\n  'env': {exports: env},\n  'messages': {exports: messages},\n  'dialog': {exports: dialog},\n  'inline-dialog': {exports: inlineDialog},\n  '_resize_listener': {exports: resize_listener}\n};\n\nfunction reqAll(deps, callback) {\n  var mods = [];\n  var i = 0;\n  var len = deps.length;\n  function addOne(mod) {\n    mods.push(mod);\n    if (mods.length === len) {\n      var exports = [];\n      var i = 0;\n      for (; i < len; i += 1) {\n        exports[i] = mods[i].exports;\n      }\n      if (callback) {\n        callback.apply(window, exports);\n      }\n    }\n  }\n  if (deps && deps.length > 0) {\n    for (; i < len; i += 1) {\n      reqOne(deps[i], addOne);\n    }\n  } else {\n    if (callback) {\n      callback();\n    }\n  }\n}\n\nfunction reqOne(name, callback) {\n  // naive impl that assumes all modules are already loaded\n  callback(getOrCreate(name));\n}\n\nfunction getOrCreate(name) {\n  return modules[name] = modules[name] || {\n    name: name,\n    exports: function () {\n      function exports() {\n        var target = exports.__target__;\n        if (target) {\n          return target.apply(window, arguments);\n        }\n      }\n      return exports;\n    }()\n  };\n}\n\n// define(name, objOrFn)\n// define(name, deps, fn(dep1, dep2, ...))\nexport default {\n  define: function (name, deps, exports) {\n    var mod = getOrCreate(name);\n    var factory;\n    if (!exports) {\n      exports = deps;\n      deps = [];\n    }\n    if (exports) {\n      factory = typeof exports !== 'function' ? function () {\n        return exports;\n      } : exports;\n      reqAll(deps, function () {\n        var exports = factory.apply(window, arguments);\n        if (exports) {\n          if (typeof exports === 'function') {\n            mod.exports.__target__ = exports;\n          }\n          for (var k in exports) {\n            if (exports.hasOwnProperty(k)) {\n              mod.exports[k] = exports[k];\n            }\n          }\n        }\n      });\n    }\n  },\n  require: function (deps, callback) {\n\n    reqAll(typeof deps === 'string' ? [deps] : deps, callback);\n  }\n};\n","import $ from './dollar';\nimport rpc from './rpc';\nimport UiParams from '../common/ui-params';\nimport Uri from '../common/uri';\n\n/**\n * The Dialog module provides a mechanism for launching an add-on's modules as modal dialogs from within an add-on's iframe.\n * A modal dialog displays information without requiring the user to leave the current page.\n * The dialog is opened over the entire window, rather than within the iframe itself.\n * ###Styling your dialog to look like a standard Atlassian dialog\n * By default the dialog iframe is undecorated. It's up to the developer to style the dialog.\n * <img src=\"../assets/images/connectdialogchromelessexample.jpeg\" width=\"100%\" />\n *\n * In order to maintain a consistent look and feel between the host application and the add-on,\n * we encourage add-on developers to style their dialogs to match Atlassian's Design Guidelines for modal dialogs.\n * To do that, you'll need to add the AUI styles to your dialog.\n *\n * For more information, read about the Atlassian User Interface [dialog component](https://docs.atlassian.com/aui/latest/docs/dialog.html).\n * @exports Dialog\n */\n\nvar uiParams = UiParams.fromUrl(window.location.toString());\nvar isDialog = Boolean(uiParams.dlg) || Boolean(uiParams.isDialog);\nvar exports;\nvar url = new Uri.init(window.location.toString());\n\n// if it has been set to a dialog on the server.\nif (url.getQueryParamValue('dialog') === '1') {\n  isDialog = true;\n}\n\nrpc.extend(function (remote) {\n\n  // dialog-related sub-api for use when the remote plugin is running as the content of a host dialog\n\n  var listeners = {};\n\n  exports = {\n    /**\n     * Creates a dialog for a web-item or page module key.\n     * @name Dialog\n     * @class\n     * @property {function} on Takes parameters event name ({String}) and callback ({Function})\n     * @param {DialogOptions} options configuration object of dialog options.\n     * @example\n     * AP.require('dialog', function(dialog){\n    *   dialog.create({\n    *     key: 'my-module-key',\n    *     width: '500px',\n    *     height: '200px',\n    *     chrome: true\n    *   }).on('close', callbackFunc);\n    * });\n     *\n     * @return {Dialog} Dialog object allowing for callback registrations\n     */\n    create: function (options) {\n      /**\n       * @name DialogOptions\n       * @class\n       * @property {String}        key         The module key of the page you want to open as a dialog\n       * @property {String}        size        Opens the dialog at a preset size: small, medium, large, x-large or maximum (full screen).\n       * @property {Number|String} width       overrides size, define the width as a percentage (append a % to the number) or pixels.\n       * @property {Number|String} height      overrides size, define the height as a percentage (append a % to the number) or pixels.\n       * @property {Boolean}       chrome      (optional) opens the dialog with heading and buttons.\n       * @property {String}        header      (optional) text to display in the header if opening a dialog with chrome.\n       * @property {String}        submitText  (optional) text for the submit button if opening a dialog with chrome.\n       * @property {String}        cancelText  (optional) text for the cancel button if opening a dialog with chrome.\n       */\n      remote.createDialog(options);\n      return {\n        on: function (event, callback) {\n          // HACK: Note this is a 'once' as it's assumed the only event is 'close', and close is only fired\n          // once per dialog. If we changed this to 'on', then it would be fired when *any* dialog is closed,\n          // meaning that if say two dialog were opened, closed, opened, then closed, then the callback\n          // registered for the first dialog would be issued when the second was closed.\n          remote.events.once('dialog.' + event, callback);\n        }\n      };\n    },\n    /**\n     * Closes the currently open dialog. Optionally pass data to listeners of the `dialog.close` event.\n     * This will only close a dialog that has been opened by your add-on.\n     * You can register for close events using the `dialog.close` event and the [events module](module-Events.html)\n     * @param {Object} data An object to be emitted on dialog close.\n     * @noDemo\n     * @example\n     * AP.require('dialog', function(dialog){\n    *   dialog.close({foo: 'bar'});\n    * });\n     */\n    close: function (data) {\n      remote.events.emit('dialog.close', data);\n      remote.closeDialog();\n    },\n\n    isDialog: isDialog,\n\n    /**\n     * register callbacks responding to messages from the host dialog, such as 'submit' or 'cancel'\n     * @param String button either 'cancel' or 'submit'\n     * @param Function callback function\n     * @deprecated\n     */\n    onDialogMessage: function (message, listener) {\n      this.getButton(message).bind(listener);\n    },\n    /**\n     * Returns the button that was requested (either cancel or submit)\n     * @returns {DialogButton}\n     * @noDemo\n     * @example\n     * AP.require('dialog', function(dialog){\n    *   dialog.getButton('submit');\n    * });\n     */\n    getButton: function (name) {\n      /**\n       * @class DialogButton\n       * @description A dialog button that can be controlled with javascript\n       */\n      return {\n        name: name,\n\n        /**\n         * Sets the button state to enabled\n         * @memberOf DialogButton\n         * @noDemo\n         * @example\n         * AP.require('dialog', function(dialog){\n        *   dialog.getButton('submit').enable();\n        * });\n         */\n        enable: function () {\n          remote.setDialogButtonEnabled(name, true);\n        },\n        /**\n         * Sets the button state to disabled\n         * @memberOf DialogButton\n         * @noDemo\n         * @example\n         * AP.require('dialog', function(dialog){\n        *   dialog.getButton('submit').disable();\n        * });\n         */\n        disable: function () {\n          remote.setDialogButtonEnabled(name, false);\n        },\n        /**\n         * Toggle the button state between enabled and disabled.\n         * @memberOf DialogButton\n         * @noDemo\n         * @example\n         * AP.require('dialog', function(dialog){\n        *   dialog.getButton('submit').toggle();\n        * });\n         */\n        toggle: function () {\n          var self = this;\n          self.isEnabled(function (enabled) {\n            self[enabled ? 'disable' : 'enable'](name);\n          });\n        },\n        /**\n         * Query a button for it's current state.\n         * @memberOf DialogButton\n         * @param {Function} callback function to receive the button state.\n         * @noDemo\n         * @example\n         * AP.require('dialog', function(dialog){\n        *   dialog.getButton('submit').isEnabled(function(enabled){\n        *     if(enabled){\n        *       //button is enabled\n        *     }\n        *   });\n        * });\n         */\n        isEnabled: function (callback) {\n          remote.isDialogButtonEnabled(name, callback);\n        },\n        /**\n         * Registers a function to be called when the button is clicked.\n         * @memberOf DialogButton\n         * @param {Function} callback function to be triggered on click or programatically.\n         * @noDemo\n         * @example\n         * AP.require('dialog', function(dialog){\n        *   dialog.getButton('submit').bind(function(){\n        *     alert('clicked!');\n        *   });\n        * });\n         */\n        bind: function (listener) {\n          remote.dialogListenerBound();\n          var list = listeners[name];\n          if (!list) {\n            list = listeners[name] = [];\n          }\n          list.push(listener);\n        },\n        /**\n         * Trigger a callback bound to a button.\n         * @memberOf DialogButton\n         * @noDemo\n         * @example\n         * AP.require('dialog', function(dialog){\n        *   dialog.getButton('submit').bind(function(){\n        *     alert('clicked!');\n        *   });\n        *   dialog.getButton('submit').trigger();\n        * });\n         */\n        trigger: function () {\n          var self = this;\n          var cont = true;\n          var result = true;\n          var list = listeners[name];\n          $.each(list, function (i, listener) {\n            result = listener.call(self, {\n              button: self,\n              stopPropagation: function () {\n                cont = false;\n              }\n            });\n            return cont;\n          });\n          return !!result;\n        }\n      };\n    }\n\n  };\n\n  return {\n\n    internals: {\n\n      // forwards dialog event messages from the host application to locally registered handlers\n      dialogMessage: function (name) {\n        var result = true;\n        try {\n          if (isDialog) {\n            result = exports.getButton(name).trigger();\n          } else {\n            $.handleError('Received unexpected dialog button event from host:', name);\n          }\n        } catch (e) {\n          $.handleError(e);\n        }\n        return result;\n      }\n\n    },\n\n    stubs: [\n      'dialogListenerBound',\n      'setDialogButtonEnabled',\n      'isDialogButtonEnabled',\n      'createDialog',\n      'closeDialog'\n    ],\n\n    init: function () {\n      if (isDialog) {\n        window.addEventListener('keydown', function (event) {\n          if (event.keyCode === 27) {\n            exports.close();\n          }\n        });\n      }\n    }\n\n  };\n\n});\n\nexport default exports;","import util from './util';\n\nvar each = util.each;\nvar extend = util.extend;\nvar document = window.document;\n\nfunction $(sel, context) {\n\n  context = context || document;\n\n  var els = [];\n  if (sel) {\n    if (typeof sel === 'string') {\n      var results = context.querySelectorAll(sel);\n      each(results, function (i, v) {\n        els.push(v);\n      });\n    } else if (sel.nodeType === 1) {\n      els.push(sel);\n    } else if (sel === window) {\n      els.push(sel);\n    }\n  }\n\n  extend(els, {\n    each: function (it) {\n      each(this, it);\n      return this;\n    },\n    bind: function (name, callback) {\n      this.each(function (i, el) {\n        util.bind(el, name, callback);\n      });\n    },\n    attr: function (k) {\n      var v;\n      this.each(function (i, el) {\n        v = el[k] || (el.getAttribute && el.getAttribute(k));\n        return !v;\n      });\n      return v;\n    },\n    removeClass: function (className) {\n      return this.each(function (i, el) {\n        if (el.className) {\n          el.className = el.className.replace(new RegExp('(^|\\\\s)' + className + '(\\\\s|$)'), ' ');\n        }\n      });\n    },\n    html: function (html) {\n      return this.each(function (i, el) {\n        el.innerHTML = html;\n      });\n    },\n    append: function (spec) {\n      return this.each(function (i, to) {\n        var el = context.createElement(spec.tag);\n        each(spec, function (k, v) {\n          if (k === '$text') {\n            if (el.styleSheet) { // style tags in ie\n              el.styleSheet.cssText = v;\n            } else {\n              el.appendChild(context.createTextNode(v));\n            }\n          } else if (k !== 'tag') {\n            el[k] = v;\n          }\n        });\n        to.appendChild(el);\n      });\n    }\n  });\n\n  return els;\n}\n\nexport default extend($, util);\n","import $ from './dollar';\nimport rpc from './rpc';\nimport UiParams from '../common/ui-params';\n\nvar uiParams = UiParams.fromWindowName();\nvar isInlineDialog = Boolean(uiParams.isInlineDialog);\nvar isInlineAddon = Boolean(uiParams.isInlineAddon);\n\nvar apis = rpc.extend(function (remote) {\n\n  return {\n    /**\n     * @exports AP\n     * Utility methods that are available without requiring additional modules.\n     */\n    apis: {\n\n      /**\n       * get the location of the host page\n       *\n       * @param {Function} callback function (location) {...}\n       * @example\n       * AP.getLocation(function(location){\n      *   alert(location);\n      * });\n       */\n      getLocation: function (callback) {\n        remote.getLocation(callback);\n      },\n\n      getUser: function (callback) {\n        AP.require(['user'], function (user) {\n          if (user && user.getUser) {\n            return user.getUser(callback);\n          }\n        });\n      },\n\n      /**\n       * resize this iframe\n       * @method\n       * @param {String} width   the desired width\n       * @param {String} height  the desired height\n       */\n      resize: $.debounce(function (width, height) {\n        var dim = apis.size(width, height, apis.container());\n        remote.resize(dim.w, dim.h);\n      }, 50),\n\n      sizeToParent: $.debounce(function () {\n        remote.sizeToParent();\n      }, 50)\n    }\n\n  };\n\n});\n\nexport default $.extend(apis, {\n\n  meta: function (name) {\n    //IE8 fallback: querySelectorAll will never find nodes by name.\n    if (navigator.userAgent.indexOf('MSIE 8') >= 0) {\n      var i;\n      var metas = document.getElementsByTagName('meta');\n\n      for (i = 0; i < metas.length; i++) {\n        if (metas[i].getAttribute('name') === 'ap-' + name) {\n          return metas[i].getAttribute('content');\n        }\n      }\n    } else {\n      return $('meta[name=\"ap-' + name + '\"]').attr('content');\n    }\n  },\n\n  container: function () {\n    // Look for these two selectors first... you need these to allow for the auto-shrink to work\n    // Otherwise, it'll default to document.body which can't auto-grow or auto-shrink\n    var container = $('.ac-content, #content');\n    return container.length > 0 ? container[0] : document.body;\n  },\n\n  localUrl: function (path) {\n    return this.meta('local-base-url') + (path == null ? '' : path);\n  },\n\n  size: function (width, height, container) {\n    var w = width == null ? '100%' : width;\n    var h;\n    var docHeight;\n\n    if (!container) {\n      container = this.container();\n    }\n\n    // if it's an inline dialog. 100% won't work. Instead, get the container pixel width.\n    if ((!w || w === '100%') && (isInlineAddon || (isInlineDialog && width === '100%'))) {\n      w = Math.max(\n          container.scrollWidth,\n          container.offsetWidth,\n          container.clientWidth\n      );\n\n    }\n\n    if (height) {\n      h = height;\n    } else {\n      // Determine height\n      docHeight = Math.max(\n          container.scrollHeight, document.documentElement.scrollHeight,\n          container.offsetHeight, document.documentElement.offsetHeight,\n          container.clientHeight, document.documentElement.clientHeight\n      );\n\n      if (container === document.body) {\n        h = docHeight;\n      } else {\n        // Started with http://james.padolsey.com/javascript/get-document-height-cross-browser/\n        // to determine page height across browsers. Turns out that in our case, we can get by with\n        // document.body.offsetHeight and document.body.clientHeight. Those two return the proper\n        // height even when the dom shrinks. Tested on Chrome, Safari, IE8/9/10, and Firefox\n        h = Math.max(container.offsetHeight, container.clientHeight);\n        if (h === 0) {\n          h = docHeight;\n        }\n      }\n    }\n    // we need to return pixel width for inline elements such as dialogs and inline dialogs\n    // as they cannot get height from the parent.\n    return {w: w, h: h};\n  }\n});\n","import $ from './dollar';\nimport rpc from './rpc';\n/**\n * The Events module provides a mechanism for emitting and receiving events.\n * <h3>Basic example</h3>\n * ```\n * //The following will create an alert message every time the event `customEvent` is triggered.\n * AP.require('events', function(events){\n*   events.on('customEvent', function(){\n*       alert('event fired');\n*   });\n*   events.emit('customEvent');\n* });\n * ```\n * @name Events\n * @module\n */\n\nexport default rpc.extend(function (remote) {\n  // Expose an Events API that delegates the to the underlying XdmRpc events bus; this is necessary since the bus\n  // itself isn't actually created until the XdmRpc object is constructed, which hasn't happened yet at this point;\n  // see the jsdoc in ../_events.js for API docs\n  var apis = {};\n  $.each(['on', 'once', 'onAny', 'off', 'offAll', 'offAny', 'emit'], function (_, name) {\n    apis[name] = function () {\n      var events = remote.events;\n      events[name].apply(events, arguments);\n      return apis;\n    };\n  });\n\n  // TODO: Experimental cross-addon eventing\n  //    // Add additional methods that tag the event as being globally-distributable to all addons.\n  //\n  //    apis.emitGlobal = function (name) {\n  //      return apis.emitWhitelist.apply(apis, [/.*/].concat([].slice.call(arguments, 1)));\n  //    };\n  //\n  //    apis.emitWhitelist = function (regex, name) {\n  //      var events = remote.events;\n  //      var event = events._event.apply(events, arguments);\n  //      event.attrs._acAllow = regex.toString();\n  //      events._emitEvent(event);\n  //      return apis;\n  //    };\n\n  return {\n    /**\n     * Adds a listener for all occurrences of an event of a particular name.\n     * Listener arguments include any arguments passed to `events.emit`, followed by an object describing the complete event information.\n     * @name on\n     * @method\n     * @memberof module:Events#\n     * @param {String} name The event name to subscribe the listener to\n     * @param {Function} listener A listener callback to subscribe to the event name\n     */\n\n    /**\n     * Adds a listener for one occurrence of an event of a particular name.\n     * Listener arguments include any argument passed to `events.emit`, followed by an object describing the complete event information.\n     * @name once\n     * @method\n     * @memberof module:Events#\n     * @param {String} name The event name to subscribe the listener to\n     * @param {Function}listener A listener callback to subscribe to the event name\n     */\n\n    /**\n     * Adds a listener for all occurrences of any event, regardless of name.\n     * Listener arguments begin with the event name, followed by any arguments passed to `events.emit`, followed by an object describing the complete event information.\n     * @name onAny\n     * @method\n     * @memberof module:Events#\n     * @param {Function} listener A listener callback to subscribe for any event name\n     */\n\n    /**\n     * Removes a particular listener for an event.\n     * @name off\n     * @method\n     * @memberof module:Events#\n     * @param {String} name The event name to unsubscribe the listener from\n     * @param {Function} listener The listener callback to unsubscribe from the event name\n     */\n\n    /**\n     * Removes all listeners from an event name, or unsubscribes all event-name-specific listeners\n     * if no name if given.\n     * @name offAll\n     * @method\n     * @memberof module:Events#\n     * @param {String} [name] The event name to unsubscribe all listeners from\n     */\n\n    /**\n     * Removes an `any` event listener.\n     * @name offAny\n     * @method\n     * @memberof module:Events#\n     * @param {Function} listener A listener callback to unsubscribe from any event name\n     */\n\n    /**\n     * Emits an event on this bus, firing listeners by name as well as all 'any' listeners. Arguments following the\n     * name parameter are captured and passed to listeners.\n     * @name emit\n     * @method\n     * @memberof module:Events#\n     * @param {String} name The name of event to emit\n     * @param {String[]} args 0 or more additional data arguments to deliver with the event\n     */\n    apis: apis\n  };\n});\n","var AP = window.AP = {};\n//INSERT AMD STUBBER HERE!\nimport amd from './amd';\nimport util from './util';\nimport $ from './dollar';\nimport _events from '../common/events';\nimport base64 from  '../common/base64';\nimport uri from '../common/uri';\nimport uiParams from '../common/ui-params';\nimport jwt from '../common/jwt';\nimport xdmRpc from '../common/xdm-rpc';\nimport rpc from './rpc';\nimport events from './events';\nimport env from './env';\nimport dialog from './dialog';\nimport inlineDialog from './inline-dialog';\nimport messages from './messages';\nimport propagator from './propagate.js';\n\n// import cookie from './cookie';\n// import request from './request';\n\n$.extend(AP, env, amd, {\n  rpc: {extend: rpc.extend, init: rpc.init},\n  Meta: {get: env.meta},\n//    request: request,\n  Dialog: dialog,\n});\n\nwindow.AP = AP;\nexport default AP\n","import $ from './dollar';\nimport rpc from './rpc';\n\n/**\n * The inline dialog is a wrapper for secondary content/controls to be displayed on user request. Consider this component as displayed in context to the triggering control with the dialog overlaying the page content.\n * A inline dialog should be preferred over a modal dialog when a connection between the action has a clear benefit versus having a lower user focus.\n *\n * For more information, read about the Atlassian User Interface [inline dialog component](https://docs.atlassian.com/aui/latest/docs/inlineDialog.html).\n * @exports inline-dialog\n */\n\nvar exports;\n\nrpc.extend(function (remote) {\n  exports = {\n    /**\n     * Hide the inline dialog that contains your connect add-on.\n     * @noDemo\n     * @example\n     * AP.require('inline-dialog', function(inlineDialog){\n        *   inlineDialog.hide();\n        * });\n     */\n    hide: function () {\n      remote.hideInlineDialog();\n    }\n  };\n  return {\n    stubs: ['hideInlineDialog']\n  }\n});\n\nexport default exports;","import $ from './dollar';\nimport rpc from './rpc';\n\n/**\n * Messages are the primary method for providing system feedback in the product user interface.\n * Messages include notifications of various kinds: alerts, confirmations, notices, warnings, info and errors.\n * For visual examples of each kind please see the [Design guide](https://developer.atlassian.com/design/latest/communicators/messages/).\n * ### Example ###\n * ```\n * AP.require('messages', function(messages){\n*   //create a message\n*   var message = messages.info('plain text title', 'plain text body');\n* });\n * ```\n * @exports messages\n */\n\nvar messageId = 0;\n\nfunction getMessageId() {\n  messageId++;\n  return 'ap-message-' + messageId;\n}\n\nexport default rpc.extend(function (remote) {\n\n  var apis = {};\n  $.each(['generic', 'error', 'warning', 'success', 'info', 'hint'], function (_, name) {\n    apis[name] = function (title, body, options) {\n      options = options || {};\n      options.id = getMessageId();\n      remote.showMessage(name, title, body, options);\n      return options.id;\n    };\n  });\n\n  /**\n   * clear a message\n   * @name clear\n   * @method\n   * @memberof module:messages#\n   * @param    {String}    id  The id that was returned when the message was created.\n   * @example\n   * AP.require('messages', function(messages){\n    *   //create a message\n    *   var message = messages.info('title', 'body');\n    *   setTimeout(function(){\n    *     messages.clear(message);\n    *   }, 2000);\n    * });\n   */\n\n  apis.clear = function (id) {\n    remote.clearMessage(id);\n  }\n\n  return {\n    /**\n     * Show a generic message\n     * @name generic\n     * @method\n     * @memberof module:messages#\n     * @param    {String}            title       Sets the title text of the message.\n     * @param    {String}            body        The main content of the message.\n     * @param    {MessageOptions}    options     Message Options\n     * @returns  {String}    The id to be used when clearing the message\n     * @example\n     * AP.require('messages', function(messages){\n        *   //create a message\n        *   var message = messages.generic('title', 'generic message example');\n        * });\n     */\n\n    /**\n     * Show an error message\n     * @name error\n     * @method\n     * @memberof module:messages#\n     * @param    {String}            title       Sets the title text of the message.\n     * @param    {String}            body        The main content of the message.\n     * @param    {MessageOptions}    options     Message Options\n     * @returns  {String}    The id to be used when clearing the message\n     * @example\n     * AP.require('messages', function(messages){\n        *   //create a message\n        *   var message = messages.error('title', 'error message example');\n        * });\n     */\n\n    /**\n     * Show a warning message\n     * @name warning\n     * @method\n     * @memberof module:messages#\n     * @param    {String}            title       Sets the title text of the message.\n     * @param    {String}            body        The main content of the message.\n     * @param    {MessageOptions}    options     Message Options\n     * @returns  {String}    The id to be used when clearing the message\n     * @example\n     * AP.require('messages', function(messages){\n        *   //create a message\n        *   var message = messages.warning('title', 'warning message example');\n        * });\n     */\n\n    /**\n     * Show a success message\n     * @name success\n     * @method\n     * @memberof module:messages#\n     * @param    {String}            title       Sets the title text of the message.\n     * @param    {String}            body        The main content of the message.\n     * @param    {MessageOptions}    options     Message Options\n     * @returns  {String}    The id to be used when clearing the message\n     * @example\n     * AP.require('messages', function(messages){\n        *   //create a message\n        *   var message = messages.success('title', 'success message example');\n        * });\n     */\n\n    /**\n     * Show an info message\n     * @name info\n     * @method\n     * @memberof module:messages#\n     * @param    {String}            title       Sets the title text of the message.\n     * @param    {String}            body        The main content of the message.\n     * @param    {MessageOptions}    options     Message Options\n     * @returns  {String}    The id to be used when clearing the message\n     * @example\n     * AP.require('messages', function(messages){\n        *   //create a message\n        *   var message = messages.info('title', 'info message example');\n        * });\n     */\n\n    /**\n     * Show a hint message\n     * @name hint\n     * @method\n     * @memberof module:messages#\n     * @param    {String}            title       Sets the title text of the message.\n     * @param    {String}            body        The main content of the message.\n     * @param    {MessageOptions}    options     Message Options\n     * @returns  {String}    The id to be used when clearing the message\n     * @example\n     * AP.require('messages', function(messages){\n        *   //create a message\n        *   var message = messages.hint('title', 'hint message example');\n        * });\n     */\n\n    apis: apis,\n    stubs: ['showMessage', 'clearMessage']\n  };\n});\n\n/**\n * @name MessageOptions\n * @class\n * @property {Boolean}   closeable   Adds a control allowing the user to close the message, removing it from the page.\n * @property {Boolean}   fadeout     Toggles the fade away on the message\n * @property {Number}    delay       Time to wait (in ms) before starting fadeout animation (ignored if fadeout==false)\n * @property {Number}    duration    Fadeout animation duration in milliseconds (ignored if fadeout==false)\n */","import rpc from './rpc';\nimport events from '../common/dom-events.js';\n\n/**\n * Allows add-ons to receive whitelisted DOM events from the host page in the addon iframe.\n */\nexport default rpc.extend(function (remote) {\n  'use strict';\n  return {\n    init: function () {\n      events.bindListeners(remote.channel, remote.propagateToHost);\n    },\n    internals: {\n      propagateToPlugin: events.receiveEvent\n    },\n    stubs: ['propagateToHost']\n  };\n});","import $ from './dollar';\n\n// Normalize overflow/underflow events across browsers\n// http://www.backalleycoder.com/2013/03/14/oft-overlooked-overflow-and-underflow-events/\nfunction addFlowListener(element, type, fn) {\n  var flow = type === 'over';\n  element.addEventListener('OverflowEvent' in window ? 'overflowchanged' : type + 'flow', function (e) {\n    if (e.type === (type + 'flow') ||\n        ((e.orient === 0 && e.horizontalOverflow === flow) ||\n        (e.orient === 1 && e.verticalOverflow === flow) ||\n        (e.orient === 2 && e.horizontalOverflow === flow && e.verticalOverflow === flow))) {\n      e.flow = type;\n      return fn.call(this, e);\n    }\n  }, false);\n};\n\n// Adds a resize listener to a DOM element (other within <body>). It first adds a set of invisible\n// 'sensor' divs to the bottom of the selected element. Those sensor divs serve as over/underflow\n// detectors using the addFlowLister. The flowListener triggers the over/underflow within the div\n// which tells us that the element has resized. We compare the previous and current size. If it's\n// changed, we trigger the resize event.\n//\n// This listener is initiated during the page load event in _init.js. The callback function is\n// the actual iframe resize function in env.js.\nfunction addListener(element, fn) {\n  var resize = 'onresize' in element;\n  if (!resize && !element._resizeSensor) {\n    $('head').append({tag: 'style', type: 'text/css', $text: '.ac-resize-sensor,.ac-resize-sensor>div {position: absolute;top: 0;left: 0;width: 100%;height: 100%;overflow: hidden;z-index: -1;}'});\n    var sensor = element._resizeSensor = document.createElement('div');\n    sensor.className = 'ac-resize-sensor';\n    sensor.innerHTML = '<div class=\"ac-resize-overflow\"><div></div></div><div class=\"ac-resize-underflow\"><div></div></div>';\n\n    var x = 0;\n    var y = 0;\n    var first = sensor.firstElementChild.firstChild;\n    var last = sensor.lastElementChild.firstChild;\n    var matchFlow = function (event) {\n      var change = false;\n      var width = element.offsetWidth;\n      if (x !== width) {\n        first.style.width = width - 1 + 'px';\n        last.style.width = width + 1 + 'px';\n        change = true;\n        x = width;\n      }\n      var height = element.offsetHeight;\n      if (y !== height) {\n        first.style.height = height - 1 + 'px';\n        last.style.height = height + 1 + 'px';\n        change = true;\n        y = height;\n      }\n      if (change && event.currentTarget !== element) {\n        var event = document.createEvent('Event');\n        event.initEvent('resize', true, true);\n        element.dispatchEvent(event);\n      }\n    };\n\n    if (getComputedStyle(element).position === 'static') {\n      element.style.position = 'relative';\n      element._resizeSensor._resetPosition = true;\n    }\n    addFlowListener(sensor, 'over', matchFlow);\n    addFlowListener(sensor, 'under', matchFlow);\n    addFlowListener(sensor.firstElementChild, 'over', matchFlow);\n    addFlowListener(sensor.lastElementChild, 'under', matchFlow);\n    element.appendChild(sensor);\n    matchFlow({});\n  }\n  var events = element._flowEvents || (element._flowEvents = []);\n  if ($.inArray(fn, events) === -1) {\n    events.push(fn);\n  }\n  if (!resize) {\n    element.addEventListener('resize', fn, false);\n  }\n  element.onresize = function (e) {\n    $.each(events, function (idx, fn) {\n      fn.call(element, e);\n    });\n  };\n};\n\nexport default {\n  addListener: addListener\n};\n","import $ from './dollar';\nimport XdmRpc from '../common/xdm-rpc';\n\nvar each = $.each;\nvar extend = $.extend;\nvar isFn = $.isFunction;\nvar proxy = {};\nvar rpc;\nvar apis = {};\nvar stubs = ['init'];\nvar internals = {};\nvar inits = [];\nvar isInited;\n\nexport default {\n\n  extend: function (config) {\n    if (isFn(config)) {\n      config = config(proxy);\n    }\n    extend(apis, config.apis);\n    extend(internals, config.internals);\n    stubs = stubs.concat(config.stubs || []);\n    var init = config.init;\n    if (isFn(init)) {\n      inits.push(init);\n    }\n    return config.apis;\n  },\n\n  // inits the connect add-on on iframe content load\n  init: function (options) {\n    options = options || {};\n    if (!isInited) {\n      // add stubs for each public api\n      each(apis, function (method) {\n        stubs.push(method);\n      });\n      // empty config for add-on-side ctor\n      rpc = this.rpc = new XdmRpc($, {}, {remote: stubs, local: internals});\n      rpc.init();\n      extend(proxy, rpc);\n      each(inits, function (_, init) {\n        try {\n          init(extend({}, options));\n        } catch (ex) {\n          $.handleError(ex);\n        }\n      });\n      isInited = true;\n    }\n  }\n\n};","// universal iterator utility\nfunction each(o, it) {\n  var l;\n  var k;\n  if (o) {\n    l = o.length;\n    if (l != null && typeof o !== 'function') {\n      k = 0;\n      while (k < l) {\n        if (it.call(o[k], k, o[k]) === false) {\n          break;\n        }\n        k += 1;\n      }\n    } else {\n      for (k in o) {\n        if (o.hasOwnProperty(k)) {\n          if (it.call(o[k], k, o[k]) === false) {\n            break;\n          }\n        }\n      }\n    }\n  }\n}\n\nfunction binder(std, odd) {\n  std += 'EventListener';\n  odd += 'Event';\n  return function (el, e, fn) {\n    if (el[std]) {\n      el[std](e, fn, false);\n    } else if (el[odd]) {\n      el[odd]('on' + e, fn);\n    }\n  };\n}\n\nfunction log() {\n  var console = this.console;\n  if (console && console.log) {\n    var args = [].slice.call(arguments);\n    if (console.log.apply) {\n      console.log.apply(console, args);\n    } else {\n      for (var i = 0, l = args.length; i < l; i += 1) {\n        args[i] = JSON.stringify(args[i]);\n      }\n      console.log(args.join(' '));\n    }\n    return true;\n  }\n}\n\nfunction decodeQueryComponent(encodedURI) {\n  return encodedURI == null ? null : decodeURIComponent(encodedURI.replace(/\\+/g, '%20'));\n}\n\nexport default {\n  each,\n  log,\n  decodeQueryComponent,\n  bind: binder('add', 'attach'),\n  unbind: binder('remove', 'detach'),\n\n  extend: function (dest) {\n    var args = arguments;\n    var srcs = [].slice.call(args, 1, args.length);\n    each(srcs, function (i, src) {\n      each(src, function (k, v) {\n        dest[k] = v;\n      });\n    });\n    return dest;\n  },\n\n  trim: function (s) {\n    return s && s.replace(/^\\s+|\\s+$/g, '');\n  },\n\n  debounce: function (fn, wait) {\n    var timeout;\n    return function () {\n      var ctx = this;\n      var args = [].slice.call(arguments);\n      function later() {\n        timeout = null;\n        fn.apply(ctx, args);\n      }\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n      timeout = setTimeout(later, wait || 50);\n    };\n  },\n\n  inArray: function (value, array, fromIndex) {\n    //optimisation for all browsers after IE8\n    if (Array.prototype.indexOf) {\n      return Array.prototype.indexOf.call(array, value, fromIndex);\n    }\n\n    var k = fromIndex >>> 0;\n    var len = array.length >>> 0;\n    for (; k < len; k += 1) {\n      if (array[k] === value) {\n        return k;\n      }\n    }\n    return -1;\n  },\n\n  isFunction: function (fn) {\n    return typeof fn === 'function';\n  },\n\n  handleError: function (err) {\n    if (!log.apply(this, err && err.message ? [err, err.message] : [err])) {\n      throw err;\n    }\n  }\n}","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import XDMRPC from './xdmrpc';\nimport Utils from '../common/util';\n\nclass Connect {\n\n  constructor() {\n    this._xdm = new XDMRPC();\n  }\n\n  dispatch(type, targetSpec, event, callback) {\n    this._xdm.queueEvent(type, targetSpec, event, callback);\n    return this.getExtensions(targetSpec);\n  }\n\n  _createId(extension) {\n    if(!extension.addon_key || !extension.key){\n      throw Error('Extensions require addon_key and key');\n    }\n    return extension.addon_key + '__' + extension.key + '__' + Utils.randomString();\n  }\n  /**\n  * Creates a new iframed module, without actually creating the DOM element.\n  * The iframe attributes are passed to the 'setupCallback', which is responsible for creating\n  * the DOM element and returning the window reference.\n  *\n  * @param extension The extension definition. Example:\n  *   {\n  *     addon_key: 'my-addon',\n  *     key: 'my-module',\n  *     url: 'https://example.com/my-module',\n  *     options: { autoresize: false }\n  *   }\n  *\n  * @param initCallback The optional initCallback is called when the bridge between host and iframe is established.\n  **/\n  create(extension, initCallback) {\n    let extension_id = this.registerExtension(extension, initCallback);\n\n    let data = {\n      extension_id: extension_id,\n      api: this._xdm.getApiSpec(),\n      origin: Utils.locationOrigin(),\n      options: extension.options || {}\n    };\n\n    return {\n      id: extension_id,\n      name: JSON.stringify(data),\n      src: extension.url\n    };\n  }\n\n  registerExtension(extension, initCallback) {\n    let extension_id = this._createId(extension);\n    this._xdm.registerExtension(extension_id, {\n      extension: extension,\n      initCallback: initCallback\n    });\n    return extension_id;\n  }\n\n  defineModule(moduleName, module) {\n    this._xdm.defineAPIModule(module, moduleName);\n  }\n\n  defineGlobals(module) {\n    this._xdm.defineAPIModule(module);\n  }\n\n  getExtensions(filter) {\n    return this._xdm.getRegisteredExtensions(filter);\n  }\n\n  unregisterExtension(filter) {\n    return this._xdm.unregisterExtension(filter);\n  }\n\n}\n\nmodule.exports = new Connect();","import Util from './util';\nclass PostMessage {\n\n  constructor(data) {\n    let d = data || {};\n    this._registerListener(d.listenOn);\n  }\n\n // listen for postMessage events (defaults to window).\n  _registerListener(listenOn) {\n    if(!listenOn || !listenOn.addEventListener) {\n      listenOn = window;\n    }\n    listenOn.addEventListener(\"message\", Util._bind(this, this._receiveMessage), false);\n  }\n\n  _receiveMessage (event) {\n    let extensionId = event.data.eid,\n    reg;\n\n    if(extensionId && this._registeredExtensions){\n      reg = this._registeredExtensions[extensionId];\n    }\n\n    if (!this._checkOrigin(event, reg)) {\n      return false;\n    }\n\n    var handler = this._messageHandlers[event.data.type];\n    if (handler) {\n      handler.call(this, event, reg);\n    }\n  }\n\n}\n\nmodule.exports = PostMessage;","const LOG_PREFIX = \"[Simple-XDM] \";\n\nclass Util {\n\n  locationOrigin() {\n    if (!window.location.origin) {\n      return window.location.protocol + \"//\" + window.location.hostname + ( window.location.port ? ':' + window.location.port : '' );\n    } else {\n      return window.location.origin;\n    }\n  }\n\n  randomString() {\n    return Math.floor(Math.random() * 1000000000).toString(16);\n  }\n\n  isString(str) {\n    return typeof str === \"string\" || str instanceof String;\n  }\n\n  // might be un-needed\n  argumentsToArray(arrayLike) {\n    return Array.prototype.slice.call(arrayLike);\n  }\n\n  hasCallback(args) {\n    var length = args.length;\n    return length > 0 && typeof args[length - 1] === 'function';\n  }\n\n  error(msg) {\n      if (window.console) {\n          console.error(LOG_PREFIX + msg);\n      }\n  }\n\n  warn(msg) {\n      if (window.console) {\n          console.warn(LOG_PREFIX + msg);\n      }\n  }\n\n  _bind(thisp, fn){\n    if(Function.prototype.bind) {\n      return fn.bind(thisp);\n    }\n    return function () {\n      return fn.apply(thisp, arguments);\n    };\n  }\n\n  each(o, it) {\n    var l;\n    var k;\n    if (o) {\n      l = o.length;\n      if (l != null && typeof o !== 'function') {\n        k = 0;\n        while (k < l) {\n          if (it.call(o[k], k, o[k]) === false){\n            break;\n          }\n          k += 1;\n        }\n      } else {\n        for (k in o) {\n          if (o.hasOwnProperty(k)) {\n            if (it.call(o[k], k, o[k]) === false){\n              break;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  extend(dest) {\n    var args = arguments;\n    var srcs = [].slice.call(args, 1, args.length);\n    srcs.forEach(function(source) {\n      Object.getOwnPropertyNames(source).forEach(function (name) {\n        dest[name] = source[name];\n      });\n    });\n    return dest;\n  }\n\n}\n\nmodule.exports = new Util();","/**\n* Postmessage format:\n*\n* Initialization\n* --------------\n* {\n*   type: 'init',\n*   eid: 'my-addon__my-module-xyz'  // the extension identifier, unique across iframes\n* }\n*\n* Request\n* -------\n* {\n*   type: 'req',\n*   eid: 'my-addon__my-module-xyz',  // the extension identifier, unique for iframe\n*   mid: 'xyz',  // a unique message identifier, required for callbacks\n*   mod: 'cookie',  // the module name\n*   fn: 'read',  // the method name\n*   args: [arguments]  // the method arguments\n* }\n*\n* Response\n* --------\n* {\n*   type: 'resp'\n*   eid: 'my-addon__my-module-xyz',  // the extension identifier, unique for iframe\n*   mid: 'xyz',  // a unique message identifier, obtained from the request\n*   args: [arguments]  // the callback arguments\n* }\n*\n* Event\n* -----\n* {\n*   type: 'evt',\n*   etyp: 'some-event',\n*   evnt: { ... }  // the event data\n*   mid: 'xyz', // a unique message identifier for the event\n* }\n**/\n\nimport Utils from '../common/util';\nimport PostMessage from '../common/postmessage';\n\nlet VALID_EVENT_TIME_MS = 30000; //30 seconds\n\nclass XDMRPC extends PostMessage {\n\n  constructor(config) {\n    config = config || {};\n    super(config);\n    this._registeredExtensions = config.extensions || {};\n    this._registeredAPIModules = {};\n    this._pendingCallbacks = {};\n    this._pendingEvents = {};\n    this._messageHandlers = {\n      init: this._handleInit,\n      req: this._handleRequest,\n      resp: this._handleResponse,\n      event_query: this._handleEventQuery,\n      broadcast: this._handleBroadcast\n    };\n  }\n\n  _handleInit(event, reg) {\n    this._registeredExtensions[reg.extension_id].source = event.source;\n    if (reg.initCallback) {\n      reg.initCallback(event.data.eid);\n      delete reg.initCallback;\n    }\n  }\n\n  _handleResponse(event) {\n    var data = event.data;\n    var pendingCallback = this._pendingCallbacks[data.mid];\n    if (pendingCallback) {\n      delete this._pendingCallbacks[data.mid];\n      pendingCallback.apply(window, data.args);\n    }\n  }\n\n  _handleRequest(event, reg) {\n    function sendResponse() {\n      var args = Utils.argumentsToArray(arguments);\n      event.source.postMessage({\n        mid: event.data.mid,\n        type: 'resp',\n        args: args\n      }, reg.extension.url);\n    }\n\n    var data = event.data;\n    var module = this._registeredAPIModules[data.mod];\n    if (module) {\n      var method = module[data.fn];\n      if (method) {\n        var methodArgs = data.args;\n        sendResponse._context = this.getRegisteredExtensions(reg.extension)[0];\n        sendResponse.mid = event.data.mid;\n        methodArgs.push(sendResponse);\n        method.apply(module, methodArgs);\n      }\n    }\n  }\n\n  _handleBroadcast(event, reg) {\n    var event_data = event.data;\n    var targetSpec = r => r.extension.addon_key === reg.extension.addon_key && r.extension_id !== reg.extension_id;\n    this.dispatch(event_data.etyp, targetSpec, event_data.evnt, null, null);\n  }\n\n\n  defineAPIModule(module, moduleName){\n    if(!moduleName){\n      this._registeredAPIModules._globals = module;\n    }\n    this._registeredAPIModules[moduleName] = module;\n    return this._registeredAPIModules;\n  }\n\n  _fullKey(targetSpec){\n    var key = targetSpec.addon_key || 'global';\n    if(targetSpec.key){\n      key = `${key}@@${targetSpec.key}`;\n    }\n\n    return key;\n  }\n\n  queueEvent(type, targetSpec, event, callback) {\n    var loaded_frame,\n    targets = this._findRegistrations(targetSpec);\n\n    loaded_frame = targets.some((target) => {\n      return target.registered_events !== undefined;\n    }, this);\n\n    if(loaded_frame){\n      this.dispatch(type, targetSpec, event, callback);\n    } else {\n      this._pendingEvents[this._fullKey(targetSpec)] = {\n        type,\n        targetSpec,\n        event,\n        callback,\n        time: new Date().getTime(),\n        uid: Utils.randomString()\n      };\n    }\n  }\n\n  _handleEventQuery(message, extension) {\n    let executed = {};\n    let now = new Date().getTime();\n    let keys = Object.keys(this._pendingEvents);\n    keys.forEach((index) => {\n      let element = this._pendingEvents[index];\n      if( (now - element.time) <= VALID_EVENT_TIME_MS) {\n        executed[index] = element;\n        element.targetSpec.addon_key = extension.extension.addon_key;\n        element.targetSpec.key = extension.extension.key;\n        this.dispatch(element.type, element.targetSpec, element.event, element.callback, message.source);\n      }\n      delete this._pendingEvents[index];\n    });\n\n    this._registeredExtensions[extension.extension_id].registered_events = message.data.args;\n\n    return executed;\n  }\n\n  dispatch(type, targetSpec, event, callback, source) {\n    function sendEvent(reg, evnt) {\n      if (reg.source) {\n        var mid;\n        if (callback) {\n          mid = Utils.randomString();\n          this._pendingCallbacks[mid] = callback;\n        }\n\n        reg.source.postMessage({\n          type: 'evt',\n          mid: mid,\n          etyp: type,\n          evnt: evnt\n        }, reg.extension.url);\n      } else {\n        throw \"Cannot send post message without a source\";\n      }\n    }\n\n    var registrations = this._findRegistrations(targetSpec || {});\n    registrations.forEach(function (reg) {\n      if(source){\n        reg.source = source;\n      }\n      Utils._bind(this, sendEvent)(reg, event);\n    }, this);\n  }\n\n  _findRegistrations(targetSpec) {\n    if(this._registeredExtensions.length === 0){\n      Utils.error('no registered extensions', this._registeredExtensions);\n      return [];\n    }\n    var keys = Object.getOwnPropertyNames(targetSpec);\n    var registrations = Object.getOwnPropertyNames(this._registeredExtensions).map((key) => {\n      return this._registeredExtensions[key];\n    });\n\n    if (targetSpec instanceof Function) {\n      return registrations.filter(targetSpec);\n    } else {\n      return registrations.filter(function (reg) {\n        return keys.every(function (key) {\n          return reg.extension[key] === targetSpec[key];\n        });\n      });\n    }\n  }\n\n  registerExtension(extension_id, data) {\n    // delete duplicate registrations\n    if(data.extension.addon_key && data.extension.key){\n      let existingView = this._findRegistrations({\n        addon_key: data.extension.addon_key,\n        key: data.extension.key\n      });\n      if(existingView.length !== 0){\n        delete this._registeredExtensions[existingView[0].extension_id];\n      }\n    }\n    data.extension_id = extension_id;\n    this._registeredExtensions[extension_id] = data;\n  }\n\n  getApiSpec() {\n    let that = this;\n    function createModule(moduleName) {\n      var module = that._registeredAPIModules[moduleName];\n      if(!module){\n        throw new Error(\"unregistered API module: \" + moduleName);\n      }\n      return Object.getOwnPropertyNames(module).reduce((accumulator, functionName) => {\n          if (typeof module[functionName] === 'function') {\n              accumulator[functionName] = {}; // could hold function metadata, empty for now\n          }\n          return accumulator;\n      }, {});\n    }\n\n    return Object.getOwnPropertyNames(this._registeredAPIModules).reduce((accumulator, moduleName) => {\n        accumulator[moduleName] = createModule(moduleName);\n        return accumulator;\n    }, {});\n  }\n\n\n  // validate origin of postMessage\n  _checkOrigin(event, reg) {\n    let no_source_types = ['init', 'event_query'];\n    let isNoSourceType = reg && !reg.source && no_source_types.indexOf(event.data.type) > -1;\n    let sourceTypeMatches = reg && event.source === reg.source;\n    let hasExtensionUrl = reg && reg.extension.url.indexOf(event.origin) === 0;\n    let isValidOrigin = hasExtensionUrl && (isNoSourceType || sourceTypeMatches);\n    if(!isValidOrigin) {\n        Utils.warn(\"Failed to validate origin: \" + event.origin);\n    }\n    return isValidOrigin;\n  }\n\n  getRegisteredExtensions(filter) {\n    if(filter) {\n      return this._findRegistrations(filter);\n    }\n    return this._registeredExtensions;\n  }\n\n  unregisterExtension(filter) {\n    let registrations = this._findRegistrations(filter);\n    if(registrations.length !== 0){\n      registrations.forEach(function(registration) {\n        delete this._registeredExtensions[registration.extension_id];\n      }, this);\n    }\n  }\n\n}\n\nmodule.exports = XDMRPC;"]}